---
# .htaccess is evaluated by Jekyll. You shouldn't need to change
# versions for redirects here.
---

RewriteEngine on
RedirectMatch 302 ^/api/image/$ /api/image/{{ site.image_api.latest.major }}.{{ site.image_api.latest.minor }}/
RewriteRule ^/?api/image/([^/]+)$ /api/image/{{ site.image_api.latest.major }}.{{ site.image_api.latest.minor }}/$1 [L,R=302]
RedirectMatch 302 ^/api/presentation/$ /api/presentation/{{ site.presentation_api.latest.major }}.{{ site.presentation_api.latest.minor }}/
RewriteRule ^/?api/presentation/([^/]+)$ /api/presentation/{{ site.presentation_api.latest.major }}.{{ site.presentation_api.latest.minor }}/$1 [L,R=302]

RewriteRule ^/?api/presentation/1.0/ /api/metadata/1.0/ [L,R=302]

# http://msdn.microsoft.com/en-us/library/cc817573.aspx
<FilesMatch "\.(html)$">
    <IfModule mod_headers.c>
        BrowserMatch MSIE ie
        Header set X-UA-Compatible "IE=edge,chrome=1" env=ie
    </IfModule>
</FilesMatch>

# http://httpd.apache.org/docs/current/mod/core.html#keepalive
KeepAlive On

# http://httpd.apache.org/docs/current/mod/mod_expires.html
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 1 day"
  ExpiresByType text/html "access plus 1 hour"
  ExpiresByType text/xml "access plus 1 hour"
</IfModule>

# http://httpd.apache.org/docs/current/mod/core.html#fileetag
FileETag none

# http://httpd.apache.org/docs/current/mod/core.html#adddefaultcharset
AddDefaultCharset utf-8

# Set charset for CSS and JS files
# http://httpd.apache.org/docs/current/mod/mod_mime.html#addcharset
<IfModule mod_mime.c>
  AddCharset utf-8 .css .js .xml
</IfModule>

# http://httpd.apache.org/docs/current/mod/mod_deflate.html
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/xml text/css text/javascript
</IfModule>
