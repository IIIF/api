//! Mirador 0.8.0
//! Built on 2014-02-13
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
*/
(function(t,e){function n(t){var e=t.length,n=le.type(t);return le.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=_e[t]={};return le.each(t.match(he)||[],function(t,n){e[n]=!0}),e}function o(t,n,i,o){if(le.acceptData(t)){var r,s,a=le.expando,l="string"==typeof n,u=t.nodeType,h=u?le.cache:t,c=u?t[a]:t[a]&&a;if(c&&h[c]&&(o||h[c].data)||!l||i!==e)return c||(u?t[a]=c=J.pop()||le.guid++:c=a),h[c]||(h[c]={},u||(h[c].toJSON=le.noop)),("object"==typeof n||"function"==typeof n)&&(o?h[c]=le.extend(h[c],n):h[c].data=le.extend(h[c].data,n)),r=h[c],o||(r.data||(r.data={}),r=r.data),i!==e&&(r[le.camelCase(n)]=i),l?(s=r[n],null==s&&(s=r[le.camelCase(n)])):s=r,s}}function r(t,e,n){if(le.acceptData(t)){var i,o,r,s=t.nodeType,l=s?le.cache:t,u=s?t[le.expando]:le.expando;if(l[u]){if(e&&(r=n?l[u]:l[u].data)){le.isArray(e)?e=e.concat(le.map(e,le.camelCase)):e in r?e=[e]:(e=le.camelCase(e),e=e in r?[e]:e.split(" "));for(i=0,o=e.length;o>i;i++)delete r[e[i]];if(!(n?a:le.isEmptyObject)(r))return}(n||(delete l[u].data,a(l[u])))&&(s?le.cleanData([t],!0):le.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}}function s(t,n,i){if(i===e&&1===t.nodeType){var o="data-"+n.replace(Ee,"-$1").toLowerCase();if(i=t.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Te.test(i)?le.parseJSON(i):i}catch(r){}le.data(t,n,i)}else i=e}return i}function a(t){var e;for(e in t)if(("data"!==e||!le.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function u(){return!1}function h(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function c(t,e,n){if(e=e||0,le.isFunction(e))return le.grep(t,function(t,i){var o=!!e.call(t,i,t);return o===n});if(e.nodeType)return le.grep(t,function(t){return t===e===n});if("string"==typeof e){var i=le.grep(t,function(t){return 1===t.nodeType});if(Ue.test(e))return le.filter(e,i,!n);e=le.filter(e,i)}return le.grep(t,function(t){return le.inArray(t,e)>=0===n})}function d(t){var e=$e.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function p(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function f(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function g(t){var e=rn.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n,i=0;null!=(n=t[i]);i++)le._data(n,"globalEval",!e||le._data(e[i],"globalEval"))}function v(t,e){if(1===e.nodeType&&le.hasData(t)){var n,i,o,r=le._data(t),s=le._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)le.event.add(e,n,a[n][i])}s.data&&(s.data=le.extend({},s.data))}}function y(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!le.support.noCloneEvent&&e[le.expando]){o=le._data(e);for(i in o.events)le.removeEvent(e,i,o.handle);e.removeAttribute(le.expando)}"script"===n&&e.text!==t.text?(f(e).text=t.text,g(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),le.support.html5Clone&&t.innerHTML&&!le.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&en.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function b(t,n){var i,o,r=0,s=typeof t.getElementsByTagName!==Q?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==Q?t.querySelectorAll(n||"*"):e;if(!s)for(s=[],i=t.childNodes||t;null!=(o=i[r]);r++)!n||le.nodeName(o,n)?s.push(o):le.merge(s,b(o,n));return n===e||n&&le.nodeName(t,n)?le.merge([t],s):s}function w(t){en.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=En.length;o--;)if(e=En[o]+n,e in t)return e;return i}function S(t,e){return t=e||t,"none"===le.css(t,"display")||!le.contains(t.ownerDocument,t)}function _(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=le._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(r[s]=le._data(i,"olddisplay",C(i.nodeName)))):r[s]||(o=S(i),(n&&"none"!==n||!o)&&le._data(i,"olddisplay",o?n:le.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function T(t,e,n){var i=yn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function E(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=le.css(t,n+Tn[r],!0,o)),i?("content"===n&&(s-=le.css(t,"padding"+Tn[r],!0,o)),"margin"!==n&&(s-=le.css(t,"border"+Tn[r]+"Width",!0,o))):(s+=le.css(t,"padding"+Tn[r],!0,o),"padding"!==n&&(s+=le.css(t,"border"+Tn[r]+"Width",!0,o)));return s}function k(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=cn(t),s=le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=dn(t,e,r),(0>o||null==o)&&(o=t.style[e]),bn.test(o))return o;i=s&&(le.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+E(t,e,n||(s?"border":"content"),i,r)+"px"}function C(t){var e=G,n=xn[t];return n||(n=M(t,e),"none"!==n&&n||(hn=(hn||le("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(hn[0].contentWindow||hn[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=M(t,e),hn.detach()),xn[t]=n),n}function M(t,e){var n=le(e.createElement(t)).appendTo(e.body),i=le.css(n[0],"display");return n.remove(),i}function z(t,e,n,i){var o;if(le.isArray(e))le.each(e,function(e,o){n||Cn.test(t)?i(t,o):z(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==le.type(e))i(t,e);else for(o in e)z(t+"["+o+"]",e[o],n,i)}function P(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(he)||[];if(le.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function A(t,n,i,o){function r(l){var u;return s[l]=!0,le.each(t[l]||[],function(t,l){var h=l(n,i,o);return"string"!=typeof h||a||s[h]?a?!(u=h):e:(n.dataTypes.unshift(h),r(h),!1)}),u}var s={},a=t===qn;return r(n.dataTypes[0])||!s["*"]&&r("*")}function I(t,n){var i,o,r=le.ajaxSettings.flatOptions||{};for(o in n)n[o]!==e&&((r[o]?t:i||(i={}))[o]=n[o]);return i&&le.extend(!0,t,i),t}function N(t,n,i){var o,r,s,a,l=t.contents,u=t.dataTypes,h=t.responseFields;for(a in h)a in i&&(n[h[a]]=i[a]);for(;"*"===u[0];)u.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){u.unshift(a);break}if(u[0]in i)s=u[0];else{for(a in i){if(!u[0]||t.converters[a+" "+u[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==u[0]&&u.unshift(s),i[s]):e}function H(t,e){var n,i,o,r,s={},a=0,l=t.dataTypes.slice(),u=l[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l[1])for(o in t.converters)s[o.toLowerCase()]=t.converters[o];for(;i=l[++a];)if("*"!==i){if("*"!==u&&u!==i){if(o=s[u+" "+i]||s["* "+i],!o)for(n in s)if(r=n.split(" "),r[1]===i&&(o=s[u+" "+r[0]]||s["* "+r[0]])){o===!0?o=s[n]:s[n]!==!0&&(i=r[0],l.splice(a--,0,i));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(h){return{state:"parsererror",error:o?h:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:e}}function O(){try{return new t.XMLHttpRequest}catch(e){}}function L(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function D(){return setTimeout(function(){Jn=e}),Jn=le.now()}function R(t,e){le.each(e,function(e,n){for(var i=(ri[e]||[]).concat(ri["*"]),o=0,r=i.length;r>o;o++)if(i[o].call(t,e,n))return})}function j(t,e,n){var i,o,r=0,s=oi.length,a=le.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Jn||D(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(r);return a.notifyWith(t,[u,r,n]),1>r&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:le.extend({},e),opts:le.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Jn||D(),duration:n.duration,tweens:[],createTween:function(e,n){var i=le.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),h=u.props;for(B(h,u.opts.specialEasing);s>r;r++)if(i=oi[r].call(u,t,h,u.opts))return i;return R(u,h),le.isFunction(u.opts.start)&&u.opts.start.call(t,u),le.fx.timer(le.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(t,e){var n,i,o,r,s;for(o in t)if(i=le.camelCase(o),r=e[i],n=t[o],le.isArray(n)&&(r=n[1],n=t[o]=n[0]),o!==i&&(t[i]=n,delete t[o]),s=le.cssHooks[i],s&&"expand"in s){n=s.expand(n),delete t[i];for(o in n)o in t||(t[o]=n[o],e[o]=r)}else e[i]=r}function F(t,e,n){var i,o,r,s,a,l,u,h,c,d=this,p=t.style,f={},g=[],m=t.nodeType&&S(t);n.queue||(h=le._queueHooks(t,"fx"),null==h.unqueued&&(h.unqueued=0,c=h.empty.fire,h.empty.fire=function(){h.unqueued||c()}),h.unqueued++,d.always(function(){d.always(function(){h.unqueued--,le.queue(t,"fx").length||h.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===le.css(t,"display")&&"none"===le.css(t,"float")&&(le.support.inlineBlockNeedsLayout&&"inline"!==C(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",le.support.shrinkWrapBlocks||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(o in e)if(s=e[o],ei.exec(s)){if(delete e[o],l=l||"toggle"===s,s===(m?"hide":"show"))continue;g.push(o)}if(r=g.length){a=le._data(t,"fxshow")||le._data(t,"fxshow",{}),"hidden"in a&&(m=a.hidden),l&&(a.hidden=!m),m?le(t).show():d.done(function(){le(t).hide()}),d.done(function(){var e;le._removeData(t,"fxshow");for(e in f)le.style(t,e,f[e])});for(o=0;r>o;o++)i=g[o],u=d.createTween(i,m?a[i]:0),f[i]=a[i]||le.style(t,i),i in a||(a[i]=u.start,m&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function W(t,e,n,i,o){return new W.prototype.init(t,e,n,i,o)}function U(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Tn[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function q(t){return le.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var V,$,Q=typeof e,G=t.document,X=t.location,Z=t.jQuery,Y=t.$,K={},J=[],te="1.9.1",ee=J.concat,ne=J.push,ie=J.slice,oe=J.indexOf,re=K.toString,se=K.hasOwnProperty,ae=te.trim,le=function(t,e){return new le.fn.init(t,e,$)},ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=/\S+/g,ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,de=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^[\],:{}\s]*$/,ge=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ye=/^-ms-/,be=/-([\da-z])/gi,we=function(t,e){return e.toUpperCase()},xe=function(t){(G.addEventListener||"load"===t.type||"complete"===G.readyState)&&(Se(),le.ready())},Se=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",xe,!1),t.removeEventListener("load",xe,!1)):(G.detachEvent("onreadystatechange",xe),t.detachEvent("onload",xe))};le.fn=le.prototype={jquery:te,constructor:le,init:function(t,n,i){var o,r;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:de.exec(t),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(o[1]){if(n=n instanceof le?n[0]:n,le.merge(this,le.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),pe.test(o[1])&&le.isPlainObject(n))for(o in n)le.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}if(r=G.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return i.find(t);this.length=1,this[0]=r}return this.context=G,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):le.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),le.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ie.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=le.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return le.each(this,t,e)},ready:function(t){return le.ready.promise().done(t),this},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(le.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},le.fn.init.prototype=le.fn,le.extend=le.fn.extend=function(){var t,n,i,o,r,s,a=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||le.isFunction(a)||(a={}),u===l&&(a=this,--l);u>l;l++)if(null!=(r=arguments[l]))for(o in r)t=a[o],i=r[o],a!==i&&(h&&i&&(le.isPlainObject(i)||(n=le.isArray(i)))?(n?(n=!1,s=t&&le.isArray(t)?t:[]):s=t&&le.isPlainObject(t)?t:{},a[o]=le.extend(h,s,i)):i!==e&&(a[o]=i));return a},le.extend({noConflict:function(e){return t.$===le&&(t.$=Y),e&&t.jQuery===le&&(t.jQuery=Z),le},isReady:!1,readyWait:1,holdReady:function(t){t?le.readyWait++:le.ready(!0)},ready:function(t){if(t===!0?!--le.readyWait:!le.isReady){if(!G.body)return setTimeout(le.ready);le.isReady=!0,t!==!0&&--le.readyWait>0||(V.resolveWith(G,[le]),le.fn.trigger&&le(G).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===le.type(t)},isArray:Array.isArray||function(t){return"array"===le.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[re.call(t)]||"object":typeof t},isPlainObject:function(t){if(!t||"object"!==le.type(t)||t.nodeType||le.isWindow(t))return!1;try{if(t.constructor&&!se.call(t,"constructor")&&!se.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return i===e||se.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||G;var i=pe.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=le.buildFragment([t],e,o),o&&le(o).remove(),le.merge([],i.childNodes))},parseJSON:function(n){return t.JSON&&t.JSON.parse?t.JSON.parse(n):null===n?n:"string"==typeof n&&(n=le.trim(n),n&&fe.test(n.replace(me,"@").replace(ve,"]").replace(ge,"")))?Function("return "+n)():(le.error("Invalid JSON: "+n),e)},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&le.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ye,"ms-").replace(be,we)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:ae&&!ae.call("﻿ ")?function(t){return null==t?"":ae.call(t)}:function(t){return null==t?"":(t+"").replace(ce,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?le.merge(i,"string"==typeof t?[t]:t):ne.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(oe)return oe.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,o=t.length,r=0;if("number"==typeof i)for(;i>r;r++)t[o++]=n[r];else for(;n[r]!==e;)t[o++]=n[r++];return t.length=o,t},grep:function(t,e,n){var i,o=[],r=0,s=t.length;for(n=!!n;s>r;r++)i=!!e(t[r],r),n!==i&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&(l[l.length]=o);else for(r in t)o=e(t[r],r,i),null!=o&&(l[l.length]=o);return ee.apply([],l)},guid:1,proxy:function(t,n){var i,o,r;return"string"==typeof n&&(r=t[n],n=t,t=r),le.isFunction(t)?(i=ie.call(arguments,2),o=function(){return t.apply(n||this,i.concat(ie.call(arguments)))},o.guid=t.guid=t.guid||le.guid++,o):e},access:function(t,n,i,o,r,s,a){var l=0,u=t.length,h=null==i;if("object"===le.type(i)){r=!0;for(l in i)le.access(t,n,l,i[l],!0,s,a)}else if(o!==e&&(r=!0,le.isFunction(o)||(a=!0),h&&(a?(n.call(t,o),n=null):(h=n,n=function(t,e,n){return h.call(le(t),n)})),n))for(;u>l;l++)n(t[l],i,a?o:o.call(t[l],l,n(t[l],i)));return r?t:h?n.call(t):u?n(t[0],i):s},now:function(){return(new Date).getTime()}}),le.ready.promise=function(e){if(!V)if(V=le.Deferred(),"complete"===G.readyState)setTimeout(le.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",xe,!1),t.addEventListener("load",xe,!1);else{G.attachEvent("onreadystatechange",xe),t.attachEvent("onload",xe);var n=!1;try{n=null==t.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&function o(){if(!le.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}Se(),le.ready()}}()}return V.promise(e)},le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),$=le(G);var _e={};le.Callbacks=function(t){t="string"==typeof t?_e[t]||i(t):le.extend({},t);var n,o,r,s,a,l,u=[],h=!t.once&&[],c=function(e){for(o=t.memory&&e,r=!0,a=l||0,l=0,s=u.length,n=!0;u&&s>a;a++)if(u[a].apply(e[0],e[1])===!1&&t.stopOnFalse){o=!1;break}n=!1,u&&(h?h.length&&c(h.shift()):o?u=[]:d.disable())},d={add:function(){if(u){var e=u.length;(function i(e){le.each(e,function(e,n){var o=le.type(n);"function"===o?t.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==o&&i(n)})})(arguments),n?s=u.length:o&&(l=e,c(o))}return this},remove:function(){return u&&le.each(arguments,function(t,e){for(var i;(i=le.inArray(e,u,i))>-1;)u.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(t){return t?le.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=h=o=e,this},disabled:function(){return!u},lock:function(){return h=e,o||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!u||r&&!h||(n?h.push(e):c(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},le.extend({Deferred:function(t){var e=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return le.Deferred(function(n){le.each(e,function(e,r){var s=r[0],a=le.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&le.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?le.extend(t,i):i}},o={};return i.pipe=i.then,le.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=ie.call(arguments),s=r.length,a=1!==s||t&&le.isFunction(t.promise)?s:0,l=1===a?t:le.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?ie.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>o;o++)r[o]&&le.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(l.reject).progress(u(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}}),le.support=function(){var e,n,i,o,r,s,a,l,u,h,c=G.createElement("div");if(c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=c.getElementsByTagName("*"),i=c.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=G.createElement("select"),a=r.appendChild(G.createElement("option")),o=c.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==c.className,leadingWhitespace:3===c.firstChild.nodeType,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!o.value,optSelected:a.selected,enctype:!!G.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===G.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!a.disabled;try{delete c.test}catch(d){e.deleteExpando=!1}o=G.createElement("input"),o.setAttribute("value",""),e.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),s=G.createDocumentFragment(),s.appendChild(o),e.appendChecked=o.checked,e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,c.attachEvent&&(c.attachEvent("onclick",function(){e.noCloneEvent=!1}),c.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})c.setAttribute(l="on"+h,"t"),e[h+"Bubbles"]=l in t||c.attributes[l].expando===!1;return c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===c.style.backgroundClip,le(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=G.getElementsByTagName("body")[0];s&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(c),c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=c.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",e.reliableHiddenOffsets=u&&0===o[0].offsetHeight,c.innerHTML="",c.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===c.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(c,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(c,null)||{width:"4px"}).width,i=c.appendChild(G.createElement("div")),i.style.cssText=c.style.cssText=r,i.style.marginRight=i.style.width="0",c.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof c.style.zoom!==Q&&(c.innerHTML="",c.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===c.offsetWidth,c.style.display="block",c.innerHTML="<div></div>",c.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==c.offsetWidth,e.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=c=o=i=null)}),n=r=s=a=i=o=null,e}();var Te=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ee=/([A-Z])/g;le.extend({cache:{},expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?le.cache[t[le.expando]]:t[le.expando],!!t&&!a(t)},data:function(t,e,n){return o(t,e,n)},removeData:function(t,e){return r(t,e)},_data:function(t,e,n){return o(t,e,n,!0)},_removeData:function(t,e){return r(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&le.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),le.fn.extend({data:function(t,n){var i,o,r=this[0],a=0,l=null;if(t===e){if(this.length&&(l=le.data(r),1===r.nodeType&&!le._data(r,"parsedAttrs"))){for(i=r.attributes;i.length>a;a++)o=i[a].name,o.indexOf("data-")||(o=le.camelCase(o.slice(5)),s(r,o,l[o]));le._data(r,"parsedAttrs",!0)}return l}return"object"==typeof t?this.each(function(){le.data(this,t)}):le.access(this,function(n){return n===e?r?s(r,t,le.data(r,t)):null:(this.each(function(){le.data(this,t,n)}),e)},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){le.removeData(this,t)})}}),le.extend({queue:function(t,n,i){var o;return t?(n=(n||"fx")+"queue",o=le._data(t,n),i&&(!o||le.isArray(i)?o=le._data(t,n,le.makeArray(i)):o.push(i)),o||[]):e},dequeue:function(t,e){e=e||"fx";var n=le.queue(t,e),i=n.length,o=n.shift(),r=le._queueHooks(t,e),s=function(){le.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),r.cur=o,o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return le._data(t,n)||le._data(t,n,{empty:le.Callbacks("once memory").add(function(){le._removeData(t,e+"queue"),le._removeData(t,n)})})}}),le.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?le.queue(this[0],t):n===e?this:this.each(function(){var e=le.queue(this,t,n);le._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&le.dequeue(this,t)})},dequeue:function(t){return this.each(function(){le.dequeue(this,t)})},delay:function(t,e){return t=le.fx?le.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,o=1,r=le.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=le._data(s[a],t+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var ke,Ce,Me=/[\t\r\n]/g,ze=/\r/g,Pe=/^(?:input|select|textarea|button|object)$/i,Ae=/^(?:a|area)$/i,Ie=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ne=/^(?:checked|selected)$/i,He=le.support.getSetAttribute,Oe=le.support.input;le.fn.extend({attr:function(t,e){return le.access(this,le.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){le.removeAttr(this,t)})},prop:function(t,e){return le.access(this,le.prop,t,e,arguments.length>1)},removeProp:function(t){return t=le.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,o,r,s=0,a=this.length,l="string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):" ")){for(r=0;o=e[r++];)0>i.indexOf(" "+o+" ")&&(i+=o+" ");n.className=le.trim(i)}return this},removeClass:function(t){var e,n,i,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=t?le.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return le.isFunction(t)?this.each(function(n){le(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var o,r=0,s=le(this),a=e,l=t.match(he)||[];o=l[r++];)a=i?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else(n===Q||"boolean"===n)&&(this.className&&le._data(this,"__className__",this.className),this.className=this.className||t===!1?"":le._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Me," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,o,r=this[0];return arguments.length?(o=le.isFunction(t),this.each(function(n){var r,s=le(this);1===this.nodeType&&(r=o?t.call(this,n,s.val()):t,null==r?r="":"number"==typeof r?r+="":le.isArray(r)&&(r=le.map(r,function(t){return null==t?"":t+""})),i=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))})):r?(i=le.valHooks[r.type]||le.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==e?n:(n=r.value,"string"==typeof n?n.replace(ze,""):null==n?"":n)):void 0}}),le.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(le.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&le.nodeName(n.parentNode,"optgroup"))){if(e=le(n).val(),r)return e;s.push(e)}return s},set:function(t,e){var n=le.makeArray(e);return le(t).find("option").each(function(){this.selected=le.inArray(le(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attr:function(t,n,i){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?typeof t.getAttribute===Q?le.prop(t,n,i):(r=1!==a||!le.isXMLDoc(t),r&&(n=n.toLowerCase(),o=le.attrHooks[n]||(Ie.test(n)?Ce:ke)),i===e?o&&r&&"get"in o&&null!==(s=o.get(t,n))?s:(typeof t.getAttribute!==Q&&(s=t.getAttribute(n)),null==s?e:s):null!==i?o&&r&&"set"in o&&(s=o.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(le.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(he);if(r&&1===t.nodeType)for(;n=r[o++];)i=le.propFix[n]||n,Ie.test(n)?!He&&Ne.test(n)?t[le.camelCase("default-"+n)]=t[i]=!1:t[i]=!1:le.attr(t,n,""),t.removeAttribute(He?n:i)},attrHooks:{type:{set:function(t,e){if(!le.support.radioValue&&"radio"===e&&le.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!le.isXMLDoc(t),s&&(n=le.propFix[n]||n,r=le.propHooks[n]),i!==e?r&&"set"in r&&(o=r.set(t,i,n))!==e?o:t[n]=i:r&&"get"in r&&null!==(o=r.get(t,n))?o:t[n]):void 0},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Pe.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:e}}}}),Ce={get:function(t,n){var i=le.prop(t,n),o="boolean"==typeof i&&t.getAttribute(n),r="boolean"==typeof i?Oe&&He?null!=o:Ne.test(n)?t[le.camelCase("default-"+n)]:!!o:t.getAttributeNode(n);return r&&r.value!==!1?n.toLowerCase():e
},set:function(t,e,n){return e===!1?le.removeAttr(t,n):Oe&&He||!Ne.test(n)?t.setAttribute(!He&&le.propFix[n]||n,n):t[le.camelCase("default-"+n)]=t[n]=!0,n}},Oe&&He||(le.attrHooks.value={get:function(t,n){var i=t.getAttributeNode(n);return le.nodeName(t,"input")?t.defaultValue:i&&i.specified?i.value:e},set:function(t,n,i){return le.nodeName(t,"input")?(t.defaultValue=n,e):ke&&ke.set(t,n,i)}}),He||(ke=le.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:e},set:function(t,n,i){var o=t.getAttributeNode(i);return o||t.setAttributeNode(o=t.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},le.attrHooks.contenteditable={get:ke.get,set:function(t,e,n){ke.set(t,""===e?!1:e,n)}},le.each(["width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{set:function(t,i){return""===i?(t.setAttribute(n,"auto"),i):e}})})),le.support.hrefNormalized||(le.each(["href","src","width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null==i?e:i}})}),le.each(["href","src"],function(t,e){le.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),le.support.style||(le.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),le.support.optSelected||(le.propHooks.selected=le.extend(le.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),le.support.enctype||(le.propFix.enctype="encoding"),le.support.checkOn||le.each(["radio","checkbox"],function(){le.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]=le.extend(le.valHooks[this],{set:function(t,n){return le.isArray(n)?t.checked=le.inArray(le(t).val(),n)>=0:e}})});var Le=/^(?:input|select|textarea)$/i,De=/^key/,Re=/^(?:mouse|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,Be=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(t,n,i,o,r){var s,a,l,u,h,c,d,p,f,g,m,v=le._data(t);if(v){for(i.handler&&(u=i,i=u.handler,r=u.selector),i.guid||(i.guid=le.guid++),(a=v.events)||(a=v.events={}),(c=v.handle)||(c=v.handle=function(t){return typeof le===Q||t&&le.event.triggered===t.type?e:le.event.dispatch.apply(c.elem,arguments)},c.elem=t),n=(n||"").match(he)||[""],l=n.length;l--;)s=Be.exec(n[l])||[],f=m=s[1],g=(s[2]||"").split(".").sort(),h=le.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=le.event.special[f]||{},d=le.extend({type:f,origType:m,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&le.expr.match.needsContext.test(r),namespace:g.join(".")},u),(p=a[f])||(p=a[f]=[],p.delegateCount=0,h.setup&&h.setup.call(t,o,g,c)!==!1||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),le.event.global[f]=!0;t=null}},remove:function(t,e,n,i,o){var r,s,a,l,u,h,c,d,p,f,g,m=le.hasData(t)&&le._data(t);if(m&&(h=m.events)){for(e=(e||"").match(he)||[""],u=e.length;u--;)if(a=Be.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(c=le.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=h[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(t,s));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,m.handle)!==!1||le.removeEvent(t,p,m.handle),delete h[p])}else for(p in h)le.event.remove(t,p+e[u],n,i,!0);le.isEmptyObject(h)&&(delete m.handle,le._removeData(t,"events"))}},trigger:function(n,i,o,r){var s,a,l,u,h,c,d,p=[o||G],f=se.call(n,"type")?n.type:n,g=se.call(n,"namespace")?n.namespace.split("."):[];if(l=c=o=o||G,3!==o.nodeType&&8!==o.nodeType&&!je.test(f+le.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),a=0>f.indexOf(":")&&"on"+f,n=n[le.expando]?n:new le.Event(f,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=o),i=null==i?[n]:le.makeArray(i,[n]),h=le.event.special[f]||{},r||!h.trigger||h.trigger.apply(o,i)!==!1)){if(!r&&!h.noBubble&&!le.isWindow(o)){for(u=h.delegateType||f,je.test(u+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),c=l;c===(o.ownerDocument||G)&&p.push(c.defaultView||c.parentWindow||t)}for(d=0;(l=p[d++])&&!n.isPropagationStopped();)n.type=d>1?u:h.bindType||f,s=(le._data(l,"events")||{})[n.type]&&le._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&le.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!(r||n.isDefaultPrevented()||h._default&&h._default.apply(o.ownerDocument,i)!==!1||"click"===f&&le.nodeName(o,"a")||!le.acceptData(o)||!a||!o[f]||le.isWindow(o))){c=o[a],c&&(o[a]=null),le.event.triggered=f;try{o[f]()}catch(m){}le.event.triggered=e,c&&(o[a]=c)}return n.result}},dispatch:function(t){t=le.event.fix(t);var n,i,o,r,s,a=[],l=ie.call(arguments),u=(le._data(this,"events")||{})[t.type]||[],h=le.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=le.event.handlers.call(this,t,u),n=0;(r=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,i=((le.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,o,r,s,a=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(r=[],s=0;l>s;s++)o=n[s],i=o.selector+" ",r[i]===e&&(r[i]=o.needsContext?le(i,this).index(u)>=0:le.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(t){if(t[le.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Re.test(o)?this.mouseHooks:De.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new le.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||G),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,o,r,s=n.button,a=n.fromElement;return null==t.pageX&&null!=n.clientX&&(o=t.target.ownerDocument||G,r=o.documentElement,i=o.body,t.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?n.toElement:a),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return le.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):e}},focus:{trigger:function(){if(this!==G.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===G.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=le.extend(new le.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?le.event.trigger(o,null,e):le.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},le.removeEvent=G.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Q&&(t[i]=null),t.detachEvent(i,n))},le.Event=function(t,n){return this instanceof le.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:u):this.type=t,n&&le.extend(this,n),this.timeStamp=t&&t.timeStamp||le.now(),this[le.expando]=!0,e):new le.Event(t,n)},le.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){le.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!le.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),le.support.submitBubbles||(le.event.special.submit={setup:function(){return le.nodeName(this,"form")?!1:(le.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=le.nodeName(n,"input")||le.nodeName(n,"button")?n.form:e;i&&!le._data(i,"submitBubbles")&&(le.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),le._data(i,"submitBubbles",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&le.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return le.nodeName(this,"form")?!1:(le.event.remove(this,"._submit"),e)}}),le.support.changeBubbles||(le.event.special.change={setup:function(){return Le.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(le.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,t,!0)})),!1):(le.event.add(this,"beforeactivate._change",function(t){var e=t.target;Le.test(e.nodeName)&&!le._data(e,"changeBubbles")&&(le.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||le.event.simulate("change",this.parentNode,t,!0)}),le._data(e,"changeBubbles",!0))}),e)},handle:function(t){var n=t.target;return this!==n||t.isSimulated||t.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return le.event.remove(this,"._change"),!Le.test(this.nodeName)}}),le.support.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){le.event.simulate(e,t.target,le.event.fix(t),!0)};le.event.special[e]={setup:function(){0===n++&&G.addEventListener(t,i,!0)},teardown:function(){0===--n&&G.removeEventListener(t,i,!0)}}}),le.fn.extend({on:function(t,n,i,o,r){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(s in t)this.on(s,n,i,t[s],r);return this}if(null==i&&null==o?(o=n,i=n=e):null==o&&("string"==typeof n?(o=i,i=e):(o=i,i=n,n=e)),o===!1)o=u;else if(!o)return this;return 1===r&&(a=o,o=function(t){return le().off(t),a.apply(this,arguments)},o.guid=a.guid||(a.guid=le.guid++)),this.each(function(){le.event.add(this,t,o,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,le(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,n,t[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=u),this.each(function(){le.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){le.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?le.event.trigger(t,n,i,!0):e}}),function(t,e){function n(t){return fe.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>T.cacheLength&&delete t[e.shift()],t[n]=i}}function o(t){return t[j]=!0,t}function r(t){var e=A.createElement("div");try{return t(e)}catch(n){return!1}finally{e=null}}function s(t,e,n,i){var o,r,s,a,l,u,h,p,f,g;if((e?e.ownerDocument||e:B)!==A&&P(e),e=e||A,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(!N&&!i){if(o=ge.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&D(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Y.apply(n,K.call(e.getElementsByTagName(t),0)),n;if((s=o[3])&&F.getByClassName&&e.getElementsByClassName)return Y.apply(n,K.call(e.getElementsByClassName(s),0)),n}if(F.qsa&&!H.test(t)){if(h=!0,p=j,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=c(t),(h=e.getAttribute("id"))?p=h.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=pe.test(t)&&e.parentNode||e,g=u.join(",")}if(g)try{return Y.apply(n,K.call(f.querySelectorAll(g),0)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return w(t.replace(se,"$1"),e,n,i)}function a(t,e){var n=e&&t,i=n&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return o(function(e){return e=+e,o(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t,e){var n,i,o,r,a,l,u,h=V[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],u=T.preFilter;a;){(!n||(i=ae.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=ue.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(se," ")}),a=a.slice(n.length));for(r in T.filter)!(i=de[r].exec(a))||u[r]&&!(i=u[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):V(t,l).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=U++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,u,h=W+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[j]||(e[j]={}),(l=u[i])&&l[0]===h){if((a=l[1])===!0||a===_)return a===!0}else if(l=u[i]=[h],l[1]=t(e,n,s)||_,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),u&&e.push(a));return s}function m(t,e,n,i,r,s){return i&&!i[j]&&(i=m(i)),r&&!r[j]&&(r=m(r,s)),o(function(o,s,a,l){var u,h,c,d=[],p=[],f=s.length,m=o||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?m:g(m,d,t,a,l),y=n?r||(o?t:f||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(u=g(y,p),i(u,[],a,l),h=u.length;h--;)(c=u[h])&&(y[p[h]]=!(v[p[h]]=c));if(o){if(r||t){if(r){for(u=[],h=y.length;h--;)(c=y[h])&&u.push(v[h]=c);r(null,y=[],u,l)}for(h=y.length;h--;)(c=y[h])&&(u=r?J.call(o,c):d[h])>-1&&(o[u]=!(s[u]=c))}}else y=g(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):Y.apply(s,y)})}function v(t){for(var e,n,i,o=t.length,r=T.relative[t[0].type],s=r||T.relative[" "],a=r?1:0,l=p(function(t){return t===e},s,!0),u=p(function(t){return J.call(e,t)>-1},s,!0),h=[function(t,n,i){return!r&&(i||n!==z)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];o>a;a++)if(n=T.relative[t[a].type])h=[p(f(h),n)];else{if(n=T.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;o>i&&!T.relative[t[i].type];i++);return m(a>1&&f(h),a>1&&d(t.slice(0,a-1)).replace(se,"$1"),n,i>a&&v(t.slice(a,i)),o>i&&v(t=t.slice(i)),o>i&&d(t))}h.push(n)}return f(h)}function y(t,e){var n=0,i=e.length>0,r=t.length>0,a=function(o,a,l,u,h){var c,d,p,f=[],m=0,v="0",y=o&&[],b=null!=h,w=z,x=o||r&&T.find.TAG("*",h&&a.parentNode||a),S=W+=null==w?1:Math.random()||.1;for(b&&(z=a!==A&&a,_=n);null!=(c=x[v]);v++){if(r&&c){for(d=0;p=t[d++];)if(p(c,a,l)){u.push(c);break}b&&(W=S,_=++n)}i&&((c=!p&&c)&&m--,o&&y.push(c))}if(m+=v,i&&v!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(o){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=Z.call(u));f=g(f)}Y.apply(u,f),b&&!o&&f.length>0&&m+e.length>1&&s.uniqueSort(u)}return b&&(W=S,z=w),y};return i?o(a):a}function b(t,e,n){for(var i=0,o=e.length;o>i;i++)s(t,e[i],n);return n}function w(t,e,n,i){var o,r,s,a,l,u=c(t);if(!i&&1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&!N&&T.relative[r[1].type]){if(e=T.find.ID(s.matches[0].replace(we,xe),e)[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!T.relative[a=s.type]);)if((l=T.find[a])&&(i=l(s.matches[0].replace(we,xe),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&d(r),!t)return Y.apply(n,K.call(i,0)),n;break}}return C(t,u)(i,e,N,n,pe.test(t)),n}function x(){}var S,_,T,E,k,C,M,z,P,A,I,N,H,O,L,D,R,j="sizzle"+-new Date,B=t.document,F={},W=0,U=0,q=i(),V=i(),$=i(),Q=typeof e,G=1<<31,X=[],Z=X.pop,Y=X.push,K=X.slice,J=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},te="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=ee.replace("w","w#"),ie="([*^$|!~]?=)",oe="\\["+te+"*("+ee+")"+te+"*(?:"+ie+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+te+"*\\]",re=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",se=RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),ae=RegExp("^"+te+"*,"+te+"*"),ue=RegExp("^"+te+"*([\\x20\\t\\r\\n\\f>+~])"+te+"*"),he=RegExp(re),ce=RegExp("^"+ne+"$"),de={ID:RegExp("^#("+ee+")"),CLASS:RegExp("^\\.("+ee+")"),NAME:RegExp("^\\[name=['\"]?("+ee+")['\"]?\\]"),TAG:RegExp("^("+ee.replace("w","w*")+")"),ATTR:RegExp("^"+oe),PSEUDO:RegExp("^"+re),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),needsContext:RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,we=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xe=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(B.documentElement.childNodes,0)[0].nodeType}catch(Se){K=function(t){for(var e,n=[];e=this[t++];)n.push(e);return n}}k=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},P=s.setDocument=function(t){var i=t?t.ownerDocument||t:B;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,I=i.documentElement,N=k(i),F.tagNameNoComments=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),F.attributes=r(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),F.getByClassName=r(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),F.getByName=r(function(t){t.id=j+0,t.innerHTML="<a name='"+j+"'></a><div name='"+j+"'></div>",I.insertBefore(t,I.firstChild);var e=i.getElementsByName&&i.getElementsByName(j).length===2+i.getElementsByName(j+0).length;return F.getIdNotName=!i.getElementById(j),I.removeChild(t),e}),T.attrHandle=r(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Q&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},F.getIdNotName?(T.find.ID=function(t,e){if(typeof e.getElementById!==Q&&!N){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(T.find.ID=function(t,n){if(typeof n.getElementById!==Q&&!N){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==Q&&i.getAttributeNode("id").value===t?[i]:e:[]}},T.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==Q&&t.getAttributeNode("id");return n&&n.value===e}}),T.find.TAG=F.tagNameNoComments?function(t,n){return typeof n.getElementsByTagName!==Q?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},T.find.NAME=F.getByName&&function(t,n){return typeof n.getElementsByName!==Q?n.getElementsByName(name):e},T.find.CLASS=F.getByClassName&&function(t,n){return typeof n.getElementsByClassName===Q||N?e:n.getElementsByClassName(t)},O=[],H=[":focus"],(F.qsa=n(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||H.push("\\["+te+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||H.push(":checked")}),r(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&H.push("[*^$]="+te+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),H.push(",.*:")})),(F.matchesSelector=n(L=I.matchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){F.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),O.push("!=",re)}),H=RegExp(H.join("|")),O=RegExp(O.join("|")),D=n(I.contains)||I.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},R=I.compareDocumentPosition?function(t,e){var n;return t===e?(M=!0,0):(n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&n||t.parentNode&&11===t.parentNode.nodeType?t===i||D(B,t)?-1:e===i||D(B,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,o=0,r=t.parentNode,s=e.parentNode,l=[t],u=[e];if(t===e)return M=!0,0;if(!r||!s)return t===i?-1:e===i?1:r?-1:s?1:0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?a(l[o],u[o]):l[o]===B?-1:u[o]===B?1:0},M=!1,[0,0].sort(R),F.detectDuplicates=M,A):A},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==A&&P(t),e=e.replace(be,"='$1']"),!(!F.matchesSelector||N||O&&O.test(e)||H.test(e)))try{var n=L.call(t,e);if(n||F.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return s(e,A,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==A&&P(t),D(t,e)},s.attr=function(t,e){var n;return(t.ownerDocument||t)!==A&&P(t),N||(e=e.toLowerCase()),(n=T.attrHandle[e])?n(t):N||F.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},s.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],i=1,o=0;if(M=!F.detectDuplicates,t.sort(R),M){for(;e=t[i];i++)e===t[i-1]&&(o=n.push(i));for(;o--;)t.splice(n[o],1)}return t},E=s.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=E(e);return n},T=s.selectors={cacheLength:50,createPseudo:o,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&he.test(n)&&(e=c(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(we,xe).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=q[t+" "];return e||(e=RegExp("(^|"+te+")"+t+"("+te+"|$)"))&&q(t,function(t){return e.test(t.className||typeof t.getAttribute!==Q&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var o=s.attr(i,t);return null==o?"!="===e:e?(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o+" ").indexOf(n)>-1:"|="===e?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,h,c,d,p,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(c=e;c=c[g];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(h=m[j]||(m[j]={}),u=h[t]||[],p=u[0]===W&&u[1],d=u[0]===W&&u[2],c=p&&m.childNodes[p];c=++p&&c&&c[g]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){h[t]=[W,p,d];break}}else if(y&&(u=(e[j]||(e[j]={}))[t])&&u[0]===W)d=u[1];else for(;(c=++p&&c&&c[g]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++d||(y&&((c[j]||(c[j]={}))[t]=[W,d]),c!==e)););return d-=o,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var n,i=T.pseudos[t]||T.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return i[j]?i(e):i.length>1?(n=[t,t,"",e],T.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,n){for(var o,r=i(t,e),s=r.length;s--;)o=J.call(t,r[s]),t[o]=!(n[o]=r[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:o(function(t){var e=[],n=[],i=C(t.replace(se,"$1"));return i[j]?o(function(t,e,n,o){for(var r,s=i(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),!n.pop()}}),has:o(function(t){return function(e){return s(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:o(function(t){return ce.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=N?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=l(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=u(S);C=s.compile=function(t,e){var n,i=[],o=[],r=$[t+" "];if(!r){for(e||(e=c(t)),n=e.length;n--;)r=v(e[n]),r[j]?i.push(r):o.push(r);r=$(t,y(o,i))}return r},T.pseudos.nth=T.pseudos.eq,T.filters=x.prototype=T.pseudos,T.setFilters=new x,P(),s.attr=le.attr,le.find=s,le.expr=s.selectors,le.expr[":"]=le.expr.pseudos,le.unique=s.uniqueSort,le.text=s.getText,le.isXMLDoc=s.isXML,le.contains=s.contains}(t);var Fe=/Until$/,We=/^(?:parents|prev(?:Until|All))/,Ue=/^.[^:#\[\.,]*$/,qe=le.expr.match.needsContext,Ve={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({find:function(t){var e,n,i,o=this.length;if("string"!=typeof t)return i=this,this.pushStack(le(t).filter(function(){for(e=0;o>e;e++)if(le.contains(i[e],this))return!0}));for(n=[],e=0;o>e;e++)le.find(t,this[e],n);return n=this.pushStack(o>1?le.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e,n=le(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(le.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(c(this,t,!1))},filter:function(t){return this.pushStack(c(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?qe.test(t)?le(t,this.context).index(this[0])>=0:le.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=qe.test(t)||"string"!=typeof t?le(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(s?s.index(n)>-1:le.find.matchesSelector(n,t)){r.push(n);break}n=n.parentNode}return this.pushStack(r.length>1?le.unique(r):r)},index:function(t){return t?"string"==typeof t?le.inArray(this[0],le(t)):le.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?le(t,e):le.makeArray(t&&t.nodeType?[t]:t),i=le.merge(this.get(),n);return this.pushStack(le.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),le.fn.andSelf=le.fn.addBack,le.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return le.dir(t,"parentNode")},parentsUntil:function(t,e,n){return le.dir(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return le.dir(t,"nextSibling")},prevAll:function(t){return le.dir(t,"previousSibling")
},nextUntil:function(t,e,n){return le.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return le.dir(t,"previousSibling",n)},siblings:function(t){return le.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return le.sibling(t.firstChild)},contents:function(t){return le.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:le.merge([],t.childNodes)}},function(t,e){le.fn[t]=function(n,i){var o=le.map(this,e,n);return Fe.test(t)||(i=n),i&&"string"==typeof i&&(o=le.filter(i,o)),o=this.length>1&&!Ve[t]?le.unique(o):o,this.length>1&&We.test(t)&&(o=o.reverse()),this.pushStack(o)}}),le.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?le.find.matchesSelector(e[0],t)?[e[0]]:[]:le.find.matches(t,e)},dir:function(t,n,i){for(var o=[],r=t[n];r&&9!==r.nodeType&&(i===e||1!==r.nodeType||!le(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var $e="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Qe=/ jQuery\d+="(?:null|\d+)"/g,Ge=RegExp("<(?:"+$e+")[\\s/>]","i"),Xe=/^\s+/,Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ye=/<([\w:]+)/,Ke=/<tbody/i,Je=/<|&#?\w+;/,tn=/<(?:script|style|link)/i,en=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,on=/^$|\/(?:java|ecma)script/i,rn=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:le.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=d(G),un=ln.appendChild(G.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,le.fn.extend({text:function(t){return le.access(this,function(t){return t===e?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(le.isFunction(t))return this.each(function(e){le(this).wrapAll(t.call(this,e))});if(this[0]){var e=le(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return le.isFunction(t)?this.each(function(e){le(this).wrapInner(t.call(this,e))}):this.each(function(){var e=le(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=le.isFunction(t);return this.each(function(n){le(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)(!t||le.filter(t,[n]).length>0)&&(e||1!==n.nodeType||le.cleanData(b(n)),n.parentNode&&(e&&le.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&le.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&le.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return le.clone(this,t,e)})},html:function(t){return le.access(this,function(t){var n=this[0]||{},i=0,o=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Qe,""):e;if(!("string"!=typeof t||tn.test(t)||!le.support.htmlSerialize&&Ge.test(t)||!le.support.leadingWhitespace&&Xe.test(t)||an[(Ye.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ze,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(le.cleanData(b(n,!1)),n.innerHTML=t);n=0}catch(r){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=le.isFunction(t);return e||"string"==typeof t||(t=le(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(le(this).remove(),n.insertBefore(t,e))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=ee.apply([],t);var o,r,s,a,l,u,h=0,c=this.length,d=this,m=c-1,v=t[0],y=le.isFunction(v);if(y||!(1>=c||"string"!=typeof v||le.support.checkClone)&&nn.test(v))return this.each(function(o){var r=d.eq(o);y&&(t[0]=v.call(this,o,n?r.html():e)),r.domManip(t,n,i)});if(c&&(u=le.buildFragment(t,this[0].ownerDocument,!1,this),o=u.firstChild,1===u.childNodes.length&&(u=o),o)){for(n=n&&le.nodeName(o,"tr"),a=le.map(b(u,"script"),f),s=a.length;c>h;h++)r=u,h!==m&&(r=le.clone(r,!0,!0),s&&le.merge(a,b(r,"script"))),i.call(n&&le.nodeName(this[h],"table")?p(this[h],"tbody"):this[h],r,h);if(s)for(l=a[a.length-1].ownerDocument,le.map(a,g),h=0;s>h;h++)r=a[h],on.test(r.type||"")&&!le._data(r,"globalEval")&&le.contains(l,r)&&(r.src?le.ajax({url:r.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):le.globalEval((r.text||r.textContent||r.innerHTML||"").replace(sn,"")));u=o=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){le.fn[t]=function(t){for(var n,i=0,o=[],r=le(t),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),le(r[i])[e](n),ne.apply(o,n.get());return this.pushStack(o)}}),le.extend({clone:function(t,e,n){var i,o,r,s,a,l=le.contains(t.ownerDocument,t);if(le.support.html5Clone||le.isXMLDoc(t)||!Ge.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(un.innerHTML=t.outerHTML,un.removeChild(r=un.firstChild)),!(le.support.noCloneEvent&&le.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||le.isXMLDoc(t)))for(i=b(r),a=b(t),s=0;null!=(o=a[s]);++s)i[s]&&y(o,i[s]);if(e)if(n)for(a=a||b(t),i=i||b(r),s=0;null!=(o=a[s]);s++)v(o,i[s]);else v(t,r);return i=b(r,"script"),i.length>0&&m(i,!l&&b(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,u,h,c=t.length,p=d(e),f=[],g=0;c>g;g++)if(r=t[g],r||0===r)if("object"===le.type(r))le.merge(f,r.nodeType?[r]:r);else if(Je.test(r)){for(a=a||p.appendChild(e.createElement("div")),l=(Ye.exec(r)||["",""])[1].toLowerCase(),h=an[l]||an._default,a.innerHTML=h[1]+r.replace(Ze,"<$1></$2>")+h[2],o=h[0];o--;)a=a.lastChild;if(!le.support.leadingWhitespace&&Xe.test(r)&&f.push(e.createTextNode(Xe.exec(r)[0])),!le.support.tbody)for(r="table"!==l||Ke.test(r)?"<table>"!==h[1]||Ke.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)le.nodeName(u=r.childNodes[o],"tbody")&&!u.childNodes.length&&r.removeChild(u);for(le.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(e.createTextNode(r));for(a&&p.removeChild(a),le.support.appendChecked||le.grep(b(f,"input"),w),g=0;r=f[g++];)if((!i||-1===le.inArray(r,i))&&(s=le.contains(r.ownerDocument,r),a=b(p.appendChild(r),"script"),s&&m(a),n))for(o=0;r=a[o++];)on.test(r.type||"")&&n.push(r);return a=null,p},cleanData:function(t,e){for(var n,i,o,r,s=0,a=le.expando,l=le.cache,u=le.support.deleteExpando,h=le.event.special;null!=(n=t[s]);s++)if((e||le.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)h[i]?le.event.remove(n,i):le.removeEvent(n,i,r.handle);l[o]&&(delete l[o],u?delete n[a]:typeof n.removeAttribute!==Q?n.removeAttribute(a):n[a]=null,J.push(o))}}});var hn,cn,dn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=RegExp("^("+ue+")(.*)$","i"),bn=RegExp("^("+ue+")(?!px)[a-z%]+$","i"),wn=RegExp("^([+-])=("+ue+")","i"),xn={BODY:"block"},Sn={position:"absolute",visibility:"hidden",display:"block"},_n={letterSpacing:0,fontWeight:400},Tn=["Top","Right","Bottom","Left"],En=["Webkit","O","Moz","ms"];le.fn.extend({css:function(t,n){return le.access(this,function(t,n,i){var o,r,s={},a=0;if(le.isArray(n)){for(r=cn(t),o=n.length;o>a;a++)s[n[a]]=le.css(t,n[a],!1,r);return s}return i!==e?le.style(t,n,i):le.css(t,n)},t,n,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:S(this))?le(this).show():le(this).hide()})}}),le.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=dn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":le.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,l=le.camelCase(n),u=t.style;if(n=le.cssProps[l]||(le.cssProps[l]=x(u,l)),a=le.cssHooks[n]||le.cssHooks[l],i===e)return a&&"get"in a&&(r=a.get(t,!1,o))!==e?r:u[n];if(s=typeof i,"string"===s&&(r=wn.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(le.css(t,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||le.cssNumber[l]||(i+="px"),le.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,o))===e)))try{u[n]=i}catch(h){}}},css:function(t,n,i,o){var r,s,a,l=le.camelCase(n);return n=le.cssProps[l]||(le.cssProps[l]=x(t.style,l)),a=le.cssHooks[n]||le.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=dn(t,n,o)),"normal"===s&&n in _n&&(s=_n[n]),""===i||i?(r=parseFloat(s),i===!0||le.isNumeric(r)?r||0:s):s},swap:function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o}}),t.getComputedStyle?(cn=function(e){return t.getComputedStyle(e,null)},dn=function(t,n,i){var o,r,s,a=i||cn(t),l=a?a.getPropertyValue(n)||a[n]:e,u=t.style;return a&&(""!==l||le.contains(t.ownerDocument,t)||(l=le.style(t,n)),bn.test(l)&&vn.test(n)&&(o=u.width,r=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=a.width,u.width=o,u.minWidth=r,u.maxWidth=s)),l}):G.documentElement.currentStyle&&(cn=function(t){return t.currentStyle},dn=function(t,n,i){var o,r,s,a=i||cn(t),l=a?a[n]:e,u=t.style;return null==l&&u&&u[n]&&(l=u[n]),bn.test(l)&&!gn.test(n)&&(o=u.left,r=t.runtimeStyle,s=r&&r.left,s&&(r.left=t.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=o,s&&(r.left=s)),""===l?"auto":l}),le.each(["height","width"],function(t,n){le.cssHooks[n]={get:function(t,i,o){return i?0===t.offsetWidth&&mn.test(le.css(t,"display"))?le.swap(t,Sn,function(){return k(t,n,o)}):k(t,n,o):e},set:function(t,e,i){var o=i&&cn(t);return T(t,e,i?E(t,n,i,le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,o),o):0)}}}),le.support.opacity||(le.cssHooks.opacity={get:function(t,e){return fn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=le.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===le.trim(r.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=pn.test(r)?r.replace(pn,o):r+" "+o)}}),le(function(){le.support.reliableMarginRight||(le.cssHooks.marginRight={get:function(t,n){return n?le.swap(t,{display:"inline-block"},dn,[t,"marginRight"]):e}}),!le.support.pixelPosition&&le.fn.position&&le.each(["top","left"],function(t,n){le.cssHooks[n]={get:function(t,i){return i?(i=dn(t,n),bn.test(i)?le(t).position()[n]+"px":i):e}}})}),le.expr&&le.expr.filters&&(le.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight||!le.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||le.css(t,"display"))},le.expr.filters.visible=function(t){return!le.expr.filters.hidden(t)}),le.each({margin:"",padding:"",border:"Width"},function(t,e){le.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Tn[i]+e]=r[i]||r[i-2]||r[0];return o}},vn.test(t)||(le.cssHooks[t+e].set=T)});var kn=/%20/g,Cn=/\[\]$/,Mn=/\r?\n/g,zn=/^(?:submit|button|image|reset|file)$/i,Pn=/^(?:input|select|textarea|keygen)/i;le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=le.prop(this,"elements");return t?le.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!le(this).is(":disabled")&&Pn.test(this.nodeName)&&!zn.test(t)&&(this.checked||!en.test(t))}).map(function(t,e){var n=le(this).val();return null==n?null:le.isArray(n)?le.map(n,function(t){return{name:e.name,value:t.replace(Mn,"\r\n")}}):{name:e.name,value:n.replace(Mn,"\r\n")}}).get()}}),le.param=function(t,n){var i,o=[],r=function(t,e){e=le.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(t)||t.jquery&&!le.isPlainObject(t))le.each(t,function(){r(this.name,this.value)});else for(i in t)z(i,t[i],n,r);return o.join("&").replace(kn,"+")},le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){le.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),le.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};var An,In,Nn=le.now(),Hn=/\?/,On=/#.*$/,Ln=/([?&])_=[^&]*/,Dn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Fn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Wn=le.fn.load,Un={},qn={},Vn="*/".concat("*");try{In=X.href}catch($n){In=G.createElement("a"),In.href="",In=In.href}An=Fn.exec(In.toLowerCase())||[],le.fn.load=function(t,n,i){if("string"!=typeof t&&Wn)return Wn.apply(this,arguments);var o,r,s,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l,t.length),t=t.slice(0,l)),le.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&le.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){r=arguments,a.html(o?le("<div>").append(le.parseHTML(t)).find(o):t)}).complete(i&&function(t,e){a.each(i,r||[t.responseText,e,t])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){le.fn[e]=function(t){return this.on(e,t)}}),le.each(["get","post"],function(t,n){le[n]=function(t,i,o,r){return le.isFunction(i)&&(r=r||o,o=i,i=e),le.ajax({url:t,type:n,dataType:r,data:i,success:o})}}),le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:In,type:"GET",isLocal:Rn.test(An[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?I(I(t,le.ajaxSettings),e):I(le.ajaxSettings,t)},ajaxPrefilter:P(Un),ajaxTransport:P(qn),ajax:function(t,n){function i(t,n,i,o){var r,c,y,b,x,_=n;2!==w&&(w=2,l&&clearTimeout(l),h=e,a=o||"",S.readyState=t>0?4:0,i&&(b=N(d,S,i)),t>=200&&300>t||304===t?(d.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(le.lastModified[s]=x),x=S.getResponseHeader("etag"),x&&(le.etag[s]=x)),204===t?(r=!0,_="nocontent"):304===t?(r=!0,_="notmodified"):(r=H(d,b),_=r.state,c=r.data,y=r.error,r=!y)):(y=_,(t||!_)&&(_="error",0>t&&(t=0))),S.status=t,S.statusText=(n||_)+"",r?g.resolveWith(p,[c,_,S]):g.rejectWith(p,[S,_,y]),S.statusCode(v),v=e,u&&f.trigger(r?"ajaxSuccess":"ajaxError",[S,d,r?c:y]),m.fireWith(p,[S,_]),u&&(f.trigger("ajaxComplete",[S,d]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var o,r,s,a,l,u,h,c,d=le.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?le(p):le.event,g=le.Deferred(),m=le.Callbacks("once memory"),v=d.statusCode||{},y={},b={},w=0,x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!c)for(c={};e=Dn.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return w||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)v[e]=[v[e],t[e]];else S.always(t[S.status]);return this},abort:function(t){var e=t||x;return h&&h.abort(e),i(0,e),this}};if(g.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,d.url=((t||d.url||In)+"").replace(On,"").replace(Bn,An[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=le.trim(d.dataType||"*").toLowerCase().match(he)||[""],null==d.crossDomain&&(o=Fn.exec(d.url.toLowerCase()),d.crossDomain=!(!o||o[1]===An[1]&&o[2]===An[2]&&(o[3]||("http:"===o[1]?80:443))==(An[3]||("http:"===An[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=le.param(d.data,d.traditional)),A(Un,d,n,S),2===w)return S;u=d.global,u&&0===le.active++&&le.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!jn.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(Hn.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ln.test(s)?s.replace(Ln,"$1_="+Nn++):s+(Hn.test(s)?"&":"?")+"_="+Nn++)),d.ifModified&&(le.lastModified[s]&&S.setRequestHeader("If-Modified-Since",le.lastModified[s]),le.etag[s]&&S.setRequestHeader("If-None-Match",le.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vn+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)S.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(p,S,d)===!1||2===w))return S.abort();x="abort";for(r in{success:1,error:1,complete:1})S[r](d[r]);if(h=A(qn,d,n,S)){S.readyState=1,u&&f.trigger("ajaxSend",[S,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){S.abort("timeout")},d.timeout));try{w=1,h.send(y,i)}catch(_){if(!(2>w))throw _;i(-1,_)}}else i(-1,"No Transport");return S},getScript:function(t,n){return le.get(t,e,n,"script")},getJSON:function(t,e,n){return le.get(t,e,n,"json")}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return le.globalEval(t),t}}}),le.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),le.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=G.head||le("head")[0]||G.documentElement;return{send:function(e,o){n=G.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Qn=[],Gn=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qn.pop()||le.expando+"_"+Nn++;return this[t]=!0,t}}),le.ajaxPrefilter("json jsonp",function(n,i,o){var r,s,a,l=n.jsonp!==!1&&(Gn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=le.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Gn,"$1"+r):n.jsonp!==!1&&(n.url+=(Hn.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||le.error(r+" was not called"),a[0]},n.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},o.always(function(){t[r]=s,n[r]&&(n.jsonpCallback=i.jsonpCallback,Qn.push(r)),a&&le.isFunction(s)&&s(a[0]),a=s=e}),"script"):e});var Xn,Zn,Yn=0,Kn=t.ActiveXObject&&function(){var t;for(t in Xn)Xn[t](e,!0)};le.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&O()||L()}:O,Zn=le.ajaxSettings.xhr(),le.support.cors=!!Zn&&"withCredentials"in Zn,Zn=le.support.ajax=!!Zn,Zn&&le.ajaxTransport(function(n){if(!n.crossDomain||le.support.cors){var i;return{send:function(o,r){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(t,o){var a,u,h,c;try{if(i&&(o||4===l.readyState))if(i=e,s&&(l.onreadystatechange=le.noop,Kn&&delete Xn[s]),o)4!==l.readyState&&l.abort();else{c={},a=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(c.text=l.responseText);try{h=l.statusText}catch(d){h=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(p){o||r(-1,p)}c&&r(a,h,c,u)},n.async?4===l.readyState?setTimeout(i):(s=++Yn,Kn&&(Xn||(Xn={},le(t).unload(Kn)),Xn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var Jn,ti,ei=/^(?:toggle|show|hide)$/,ni=RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ii=/queueHooks$/,oi=[F],ri={"*":[function(t,e){var n,i,o=this.createTween(t,e),r=ni.exec(e),s=o.cur(),a=+s||0,l=1,u=20;if(r){if(n=+r[2],i=r[3]||(le.cssNumber[t]?"":"px"),"px"!==i&&a){a=le.css(o.elem,t,!0)||n||1;do l=l||".5",a/=l,le.style(o.elem,t,a+i);while(l!==(l=o.cur()/s)&&1!==l&&--u)}o.unit=i,o.start=a,o.end=r[1]?a+(r[1]+1)*n:n}return o}]};le.Animation=le.extend(j,{tweener:function(t,e){le.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],ri[n]=ri[n]||[],ri[n].unshift(e)},prefilter:function(t,e){e?oi.unshift(t):oi.push(t)}}),le.Tween=W,W.prototype={constructor:W,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(le.cssNumber[n]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,n=W.propHooks[this.prop];return this.pos=e=this.options.duration?le.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=le.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){le.fx.step[t.prop]?le.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[le.cssProps[t.prop]]||le.cssHooks[t.prop])?le.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},le.each(["toggle","show","hide"],function(t,e){var n=le.fn[e];le.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(U(e,!0),t,i,o)}}),le.fn.extend({fadeTo:function(t,e,n,i){return this.filter(S).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=le.isEmptyObject(t),r=le.speed(e,n,i),s=function(){var e=j(this,le.extend({},t),r);s.finish=function(){e.stop(!0)},(o||le._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,n,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=le.timers,s=le._data(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&ii.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));(e||!i)&&le.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=le._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=le.timers,s=i?i.length:0;for(n.finish=!0,le.queue(this,t,[]),o&&o.cur&&o.cur.finish&&o.cur.finish.call(this),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),le.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){le.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),le.speed=function(t,e,n){var i=t&&"object"==typeof t?le.extend({},t):{complete:n||!n&&e||le.isFunction(t)&&t,duration:t,easing:n&&e||e&&!le.isFunction(e)&&e};return i.duration=le.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in le.fx.speeds?le.fx.speeds[i.duration]:le.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){le.isFunction(i.old)&&i.old.call(this),i.queue&&le.dequeue(this,i.queue)},i},le.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},le.timers=[],le.fx=W.prototype.init,le.fx.tick=function(){var t,n=le.timers,i=0;for(Jn=le.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||le.fx.stop(),Jn=e},le.fx.timer=function(t){t()&&le.timers.push(t)&&le.fx.start()},le.fx.interval=13,le.fx.start=function(){ti||(ti=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(ti),ti=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fx.step={},le.expr&&le.expr.filters&&(le.expr.filters.animated=function(t){return le.grep(le.timers,function(e){return t===e.elem}).length}),le.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){le.offset.setOffset(this,t,e)});var n,i,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;return s?(n=s.documentElement,le.contains(n,r)?(typeof r.getBoundingClientRect!==Q&&(o=r.getBoundingClientRect()),i=q(s),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},le.offset={setOffset:function(t,e,n){var i=le.css(t,"position");"static"===i&&(t.style.position="relative");var o,r,s=le(t),a=s.offset(),l=le.css(t,"top"),u=le.css(t,"left"),h=("absolute"===i||"fixed"===i)&&le.inArray("auto",[l,u])>-1,c={},d={};h?(d=s.position(),o=d.top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(u)||0),le.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(c.top=e.top-a.top+o),null!=e.left&&(c.left=e.left-a.left+r),"using"in e?e.using.call(t,c):s.css(c)}},le.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===le.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),le.nodeName(t[0],"html")||(n=t.offset()),n.top+=le.css(t[0],"borderTopWidth",!0),n.left+=le.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-le.css(i,"marginTop",!0),left:e.left-n.left-le.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||G.documentElement;t&&!le.nodeName(t,"html")&&"static"===le.css(t,"position");)t=t.offsetParent;return t||G.documentElement})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);le.fn[t]=function(o){return le.access(this,function(t,o,r){var s=q(t);return r===e?s?n in s?s[n]:s.document.documentElement[o]:t[o]:(s?s.scrollTo(i?le(s).scrollLeft():r,i?r:le(s).scrollTop()):t[o]=r,e)},t,o,arguments.length,null)}}),le.each({Height:"height",Width:"width"},function(t,n){le.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,o){le.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||r===!0?"margin":"border");return le.access(this,function(n,i,o){var r;return le.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+t],r["scroll"+t],n.body["offset"+t],r["offset"+t],r["client"+t])):o===e?le.css(n,i,a):le.style(n,i,o,a)},n,s?o:e,s,null)}})}),t.jQuery=t.$=le,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return le})})(window),/*! jQuery UI - v1.10.3 - 2013-06-06
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function n(e,n){var o,r,s,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,o,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function o(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,o(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,o(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n){var i,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;o.length>i;i++)t.options[o[i][0]]&&o[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[i]>0?!0:(e[i]=1,o=e[i]>0,e[i]=0,o)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(n,i,o){var r,s,a,l,u={},h=n.split(".")[0];n=n.split(".")[1],r=h+"-"+n,o||(o=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[h]=t[h]||{},s=t[h][n],a=t[h][n]=function(t,n){return this._createWidget?(arguments.length&&this._createWidget(t,n),e):new a(t,n)},t.extend(a,s,{version:o.version,_proto:t.extend({},o),_childConstructors:[]}),l=new i,l.options=t.widget.extend({},l.options),t.each(o,function(n,o){return t.isFunction(o)?(u[n]=function(){var t=function(){return i.prototype[n].apply(this,arguments)},e=function(t){return i.prototype[n].apply(this,t)};return function(){var n,i=this._super,r=this._superApply;return this._super=t,this._superApply=e,n=o.apply(this,arguments),this._super=i,this._superApply=r,n}}(),e):(u[n]=o,e)}),a.prototype=t.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix:n},u,{constructor:a,namespace:h,widgetName:n,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete s._childConstructors):i._childConstructors.push(a),t.widget.bridge(n,a)},t.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==e&&(n[o]=t.isPlainObject(r)?t.isPlainObject(n[o])?t.widget.extend({},n[o],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,o=t.data(this,r);return o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,l),i!==o&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):e):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new o(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var o,r,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(r=a[n]=t.widget.extend({},this.options[n]),s=0;o.length-1>s;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(n=o.pop(),i===e)return r[n]===e?null:r[n];r[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,o){var r,s=this;"boolean"!=typeof n&&(o=i,i=n,n=!1),o?(i=r=t(i),this.bindings=this.bindings.add(i)):(o=i,i=this.element,r=this.widget()),t.each(o,function(o,a){function l(){return n||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):e}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||t.guid++);var u=o.match(/^(\w+)\s*(.*)$/),h=u[1]+s.eventNamespace,c=u[2];c?r.delegate(c,h,l):i.bind(h,l)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function o(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var n,i,o=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return t("body").append(o),n=s.offsetWidth,o.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=o[0].clientWidth),o.remove(),r=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),o="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,r="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,p,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(w),S=(e.collision||"flip").split(" "),_={};return y=o(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),n=c.exec(i[1]),_[this]=[t?t[0]:0,n?n[0]:0],e[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),r=n(_.at,p,g),v.left+=r[0],v.top+=r[1],this.each(function(){var o,u,h=t(this),c=h.outerWidth(),d=h.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),T=c+f+i(this,"marginRight")+x.width,E=d+y+i(this,"marginBottom")+x.height,k=t.extend({},v),C=n(_.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?k.left-=c:"center"===e.my[0]&&(k.left-=c/2),"bottom"===e.my[1]?k.top-=d:"center"===e.my[1]&&(k.top-=d/2),k.left+=C[0],k.top+=C[1],t.support.offsetFractions||(k.left=l(k.left),k.top=l(k.top)),o={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[S[n]]&&t.ui.position[S[n]][i](k,{targetWidth:p,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:o,collisionWidth:T,collisionHeight:E,offset:[r[0]+C[0],r[1]+C[1]],my:e.my,at:e.at,within:w,elem:h})}),e.using&&(u=function(t){var n=m.left-k.left,i=n+p-c,o=m.top-k.top,r=o+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:h,left:k.left,top:k.top,width:c,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>r?"top":o>0?"bottom":"middle"};c>p&&p>a(n+i)&&(l.horizontal="center"),d>g&&g>a(o+r)&&(l.vertical="middle"),l.important=s(a(n),a(i))>s(a(o),a(r))?"horizontal":"vertical",e.using.call(this,t,l)}),h.offset(t.extend(k,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,u=a+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&0>=u?(n=t.left+l+e.collisionWidth-r-o,t.left+=l-n):t.left=u>0&&0>=l?o:l>u?o+r-e.collisionWidth:o:l>0?t.left+=l:u>0?t.left-=u:t.left=s(t.left-a,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,u=a+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&0>=u?(n=t.top+l+e.collisionHeight-r-o,t.top+=l-n):t.top=u>0&&0>=l?o:l>u?o+r-e.collisionHeight:o:l>0?t.top+=l:u>0?t.top-=u:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(n=t.left+d+p+f+e.collisionWidth-s-r,(0>n||a(h)>n)&&(t.left+=d+p+f)):c>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||c>a(i))&&(t.left+=d+p+f))},top:function(t,e){var n,i,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>h?(i=t.top+p+f+g+e.collisionHeight-s-r,t.top+p+f+g>h&&(0>i||a(h)>i)&&(t.top+=p+f+g)):c>0&&(n=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>c&&(n>0||c>a(n))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,o,r,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)e.style[r]=i[r];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=t(a).offset().left,t.support.offsetFractions=o>10&&11>o,e.innerHTML="",n.removeChild(e)}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;return o.containment?"window"===o.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===o.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):o.containment.constructor===Array?(this.containment=o.containment,void 0):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),i=n[0],i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,o,r,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),o=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(o.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),o=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,n){var i=t(this).data("ui-draggable"),o=this;t.each(i.sortables,function(){var r=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)
})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,o=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?o=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(o=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?o=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(o=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,o,r,s,a,l,u,h,c,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)a=p.snapElements[c].left,l=a+p.snapElements[c].width,u=p.snapElements[c].top,h=u+p.snapElements[c].height,a-g>v||m>l+g||u-g>b||y>h+g||!t.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)?(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(i=g>=Math.abs(u-b),o=g>=Math.abs(h-y),r=g>=Math.abs(a-v),s=g>=Math.abs(l-m),i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),o&&(n.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||o||r||s,"outer"!==f.snapMode&&(i=g>=Math.abs(u-y),o=g>=Math.abs(h-b),r=g>=Math.abs(a-m),s=g>=Math.abs(l-v),i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),o&&(n.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(i||o||r||s||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=i||o||r||s||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,n,i,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;e.length>n;n++)i=t.trim(e[n]),r="ui-resizable-"+i,o=t("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===i&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(o);this._renderAxis=function(e){var n,i,o,r;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=t(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,i,o=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(n){var i,o,r,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=e(this.helper.css("left")),o=e(this.helper.css("top")),s.containment&&(i+=t(s.containment).scrollLeft()||0,o+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var n,i=this.helper,o={},r=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,u=this.size.width,h=this.size.height,c=e.pageX-r.left||0,d=e.pageY-r.top||0,p=this._change[s];return p?(n=p.apply(this,[e,c,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==u&&(o.width=this.size.width+"px"),this.size.height!==h&&(o.height=this.size.height+"px"),i.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var n,i,o,r,s,a,l,u=this.options,h=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&t.ui.hasScroll(n[0],"left")?0:h.sizeDiff.height,r=i?0:h.sizeDiff.width,s={width:h.helper.width()-r,height:h.helper.height()-o},a=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,u.animate||this.element.css(t.extend(s,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,o,r,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),o>s.minHeight&&(s.minHeight=o),s.maxWidth>i&&(s.maxWidth=i),s.maxHeight>r&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,o=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===o&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,o=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=n(t.width)&&e.minWidth&&e.minWidth>t.width,a=n(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return s&&(t.width=e.minWidth),a&&(t.height=e.minHeight),o&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&h&&(t.left=l-e.minWidth),o&&h&&(t.left=l-e.maxWidth),a&&c&&(t.top=u-e.minHeight),r&&c&&(t.top=u-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,o,r=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(o=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],i=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],e=0;n.length>e;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);o.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("ui-resizable"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&t.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,h&&u?{top:h,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var n,i,o,r,s,a,l,u=t(this).data("ui-resizable"),h=u.options,c=u.element,d=h.containment,p=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(u.containerElement=t(p),/document/.test(d)||d===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(n=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,o){i[t]=e(n.css("padding"+o))}),u.containerOffset=n.offset(),u.containerPosition=n.position(),u.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},o=u.containerOffset,r=u.containerSize.height,s=u.containerSize.width,a=t.ui.hasScroll(p,"left")?p.scrollWidth:s,l=t.ui.hasScroll(p)?p.scrollHeight:r,u.parentData={element:p,left:o.left,top:o.top,width:a,height:l}))},resize:function(e){var n,i,o,r,s=t(this).data("ui-resizable"),a=s.options,l=s.containerOffset,u=s.position,h=s._aspectRatio||e.shiftKey,c={top:0,left:0},d=s.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=l),u.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-c.left),h&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),u.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),h&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,n=Math.abs((s._helper?s.offset.left-c.left:s.offset.left-c.left)+s.sizeDiff.width),i=Math.abs((s._helper?s.offset.top-c.top:s.offset.top-l.top)+s.sizeDiff.height),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r&&(n-=s.parentData.left),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,h&&(s.size.height=s.size.width/s.aspectRatio)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,h&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,u=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("ui-resizable"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(e,i){t(e).each(function(){var e=t(this),o=t(this).data("ui-resizable-alsoresize"),r={},s=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var n=(o[e]||0)+(a[e]||0);n&&n>=0&&(r[e]=n||null)}),e.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):t.each(o.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,h=Math.round((i.width-o.width)/l)*l,c=Math.round((i.height-o.height)/u)*u,d=o.width+h,p=o.height+c,f=n.maxWidth&&d>n.maxWidth,g=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=a,m&&(d+=l),v&&(p+=u),f&&(d-=l),g&&(p-=u),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=r.top-c):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=r.left-h):(e.size.width=d,e.size.height=p,e.position.top=r.top-c,e.position.left=r.left-h)}})}(jQuery),function(t){var e,n,i,o,r="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},u=function(e){var n=e.name,i=e.form,o=t([]);return n&&(n=n.replace(/'/g,"\\'"),o=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter(function(){return!this.form})),o};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,h="checkbox"===this.type||"radio"===this.type,c=h?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(c)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(d)}),h&&(this.element.bind("change"+this.eventNamespace,function(){o||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(o=!1,n=t.pageX,i=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(n!==t.pageX||i!==t.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;t(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var e=s.element[0];u(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,s.document.one("mouseup",function(){e=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(t(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var e=this.buttonElement.removeClass(a),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;0>n&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!e&&this._trigger("focus",t),n},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")
}),this._trigger("open"),void 0)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function n(){var e=this.document[0].activeElement,n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(o.focus(1),e.preventDefault()):(i.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(t.each(n,function(n,i){var o,r;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),o=i.click,i.click=function(){o.apply(e.element[0],arguments)},r={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,t("<button></button>",i).button(r).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){t(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(o))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(o,r){i.position=[r.position.left-n.document.scrollLeft(),r.position.top-n.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,e(r))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,o=i.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,o){t(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(o))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(o,r){i.height=t(this).height(),i.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",o,e(r))}}).css("position",r)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(i){var o=this,r=!1,s={};t.each(i,function(t,i){o._setOption(t,i),t in e&&(r=!0),t in n&&(s[t]=i)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var n,i,o=this.uiDialog;"dialogClass"===t&&o.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(n=o.is(":data(ui-draggable)"),n&&!e&&o.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(i=o.is(":data(ui-resizable)"),i&&!e&&o.resizable("destroy"),i&&"string"==typeof e&&o.resizable("option","handles",e),i||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,n=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){e._allowInteraction(i)||(i.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,n=this.options.position,i=[],o=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),t.each(["left","top"],function(t,e){+i[t]===i[t]&&(o[t]=i[t],i[t]=e)}),n={my:i[0]+(0>o[0]?o[0]:"+"+o[0])+" "+i[1]+(0>o[1]?o[1]:"+"+o[1]),at:i.join(" ")}),n=t.extend({},t.ui.dialog.prototype.options.position,n)):n=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(n),e||this.uiDialog.hide()}})}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,r,s,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(e.keyCode),s=!1,clearTimeout(this.filterTimer),r===o?s=!0:r=o+r,a=RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(e.keyCode),a=RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev("a"),o=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),e.attr("aria-labelledby",i.attr("id"))}),e=i.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,o,r,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.height(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,o;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),0>n.offset().top-i-o}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var n,i,o;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+o>0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),e=o.length;n>e;e++)s.push(r);this.handles=o.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,o,r,s,a,l,u,h=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-h.values(e));(o>n||o===n&&(e===h._lastChangedValue||h.values(e)===c.min))&&(o=n,r=t(this),s=e)}),a=this._start(e,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-r.width()/2,top:e.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,o,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(o=this.values(),o[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:o}),i=this.values(e?0:1),r!==!1&&this.values(e,n,!0))):n!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:n}),r!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,n){var i,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,o=arguments[0],r=0;i.length>r;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,o=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;o>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,o,r,s=this.options.range,a=this.options,l=this,u=this._animateOff?!1:a.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),h["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](h,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?100*((i-o)/(r-o)):0,h["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](h,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(n){var i,o,r,s,a=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(s=this.options.step,o=r=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(o===this._valueMax())return;r=this._trimAlignValue(o+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o===this._valueMin())return;r=this._trimAlignValue(o-s)}this._slide(n,a,r)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,i=t.ui.mouse.prototype,o=i._mouseInit;i._touchStart=function(t){var i=this;!n&&i._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},i._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},i._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},i._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),o.call(e)}}}(jQuery),/*! jquery-dialogextend 2.0.2 2013-08-06 */
function(){var t;t=jQuery,t.widget("ui.dialogExtend",{version:"2.0.0",modes:{},options:{closable:!0,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",restore:"ui-icon-newwin"},load:null,beforeRestore:null,restore:null},_create:function(){return this._state="normal",t(this.element[0]).data("ui-dialog")||t.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted"),this._verifyOptions(),this._initStyles(),this._initButtons(),this._initTitleBar(),this._setState("normal"),this._on("load",function(t){return console.log("test",t)}),this._trigger("load")},_setState:function(e){return t(this.element[0]).removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+e),this._state=e},_verifyOptions:function(){var e,n,i;!this.options.dblclick||this.options.dblclick in this.modes||(t.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+this.options.dblclick+"'"),this.options.dblclick=!1),this.options.titlebar&&"none"!==(n=this.options.titlebar)&&"transparent"!==n&&(t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'"),this.options.titlebar=!1),i=[];for(e in this.modes)this["_verifyOptions_"+e]?i.push(this["_verifyOptions_"+e]()):i.push(void 0);return i},_initStyles:function(){var e,n,i;t(".dialog-extend-css").length||(n="",n+='<style class="dialog-extend-css" type="text/css">',n+=".ui-dialog .ui-dialog-titlebar-buttonpane>a { float: right; }",n+=".ui-dialog .ui-dialog-titlebar-restore { width: 19px; height: 18px; }",n+=".ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }",n+=".ui-dialog .ui-dialog-titlebar-restore:hover,",n+=".ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }",n+=".ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }",n+="</style>",t(n).appendTo("body")),i=[];for(e in this.modes)i.push(this["_initStyles_"+e]());return i},_initButtons:function(){var e,n,i,o,r,s=this;o=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar"),e=t('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(o),e.css({position:"absolute",top:"50%",right:"0.3em","margin-top":"-10px",height:"18px"}),o.find(".ui-dialog-titlebar-close").css({position:"relative","float":"right",top:"auto",right:"auto",margin:0}).find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(e).end(),e.append('<a class="ui-dialog-titlebar-restore ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-close").toggle(this.options.closable).end().find(".ui-dialog-titlebar-restore").hide().click(function(t){return t.preventDefault(),s.restore()}).end(),r=this.modes;for(i in r)n=r[i],this._initModuleButton(i,n);return o.dblclick(function(){return s.options.dblclick?"normal"!==s._state?s.restore():s[s.options.dblclick]():void 0}).select(function(){return!1})},_initModuleButton:function(e,n){var i,o=this;return i=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-buttonpane"),i.append('<a class="ui-dialog-titlebar-'+e+' ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons[e]+'">'+e+"</span></a>").find(".ui-dialog-titlebar-"+e).attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-"+e).toggle(this.options[n.option]).click(function(t){return t.preventDefault(),o[e]()}).end()},_initTitleBar:function(){var e;switch(this.options.titlebar){case!1:return 0;case"none":return t(this.element[0]).dialog("option","draggable")&&(e=t("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5),t(this.element[0]).dialog("widget").prepend(e).draggable("option","handle",e)),t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("&nbsp;").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();case"transparent":return t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});default:return t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}},state:function(){return this._state},restore:function(){return this._trigger("beforeRestore"),this._restore(),this._setState("normal"),this._toggleButtons(),this._trigger("restore")},_restore:function(){return"normal"!==this._state?this["_restore_"+this._state]():void 0},_saveSnapshot:function(){return"normal"===this._state?(null==this.options.containerCls&&(this.options.containerCls="body"),this.original_config_resizable=t(this.element[0]).dialog("option","resizable"),this.original_config_draggable=t(this.element[0]).dialog("option","draggable"),this.original_size_height=t(this.element[0]).dialog("widget").outerHeight(),this.original_size_width=t(this.element[0]).dialog("option","width"),this.original_size_maxHeight=t(this.element[0]).dialog("option","maxHeight"),this.original_position_mode=t(this.element[0]).dialog("widget").css("position"),this.original_position_left=t(this.element[0]).dialog("widget").offset().left-t(this.options.containerCls).scrollLeft(),this.original_position_top=t(this.element[0]).dialog("widget").offset().top-t(this.options.containerCls).scrollTop(),this.original_titlebar_wrap=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")):void 0},_loadSnapshot:function(){return{config:{resizable:this.original_config_resizable,draggable:this.original_config_draggable},size:{height:this.original_size_height,width:this.original_size_width,maxHeight:this.original_size_maxHeight},position:{mode:this.original_position_mode,left:this.original_position_left,top:this.original_position_top},titlebar:{wrap:this.original_titlebar_wrap}}},_toggleButtons:function(){var e,n,i,o;t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").toggle("normal"!==this._state).css({right:"1.4em"}).end(),i=this.modes,o=[];for(n in i)e=i[n],o.push(t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+n).toggle(this._state!==e.state&&this.options[e.option]));return o}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{collapse:{option:"collapsable",state:"collapsed"}},options:{collapsable:!1,icons:{collapse:"ui-icon-triangle-1-s"},beforeCollapse:null,collapse:null},collapse:function(){var e;return e=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,this._trigger("beforeCollapse"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option",{resizable:!1,height:e,maxHeight:e}).on("dialogclose",this._collapse_restore).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("collapsed"),this._toggleButtons(),this._trigger("collapse")},_restore_collapsed:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,height:e.size.height,maxHeight:e.size.maxHeight}).off("dialogclose",this._collapse_restore)},_initStyles_collapse:function(){var e;return t(".dialog-extend-collapse-css").length?void 0:(e="",e+='<style class="dialog-extend-collapse-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-collapse { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse:hover,",e+=".ui-dialog .ui-dialog-titlebar-collapse:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_collapse_restore:function(){return t(this).dialogExtend("restore")}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{maximize:{option:"maximizable",state:"maximized"}},options:{maximizable:!1,icons:{maximize:"ui-icon-extlink"},beforeMaximize:null,maximize:null},maximize:function(){var e,n;return null==this.options.mainMenuHeight&&(this.options.mainMenuHeight=0),null==this.options.statusBarHeight&&(this.options.statusBarHeight=0),e=t(window).height()-(this.options.mainMenuHeight+this.options.statusBarHeight),n=t(window).width(),this._trigger("beforeMaximize"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:e,width:n,position:{my:"left top",at:"left top+"+this.options.mainMenuHeight}}),this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},_restore_maximized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").css("position",e.position.mode).find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}),t(this.element[0]).dialog("option","draggable")?t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"):void 0},_initStyles_maximize:function(){var e;return t(".dialog-extend-maximize-css").length?void 0:(e="",e+='<style class="dialog-extend-maximize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-maximize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize:hover,",e+=".ui-dialog .ui-dialog-titlebar-maximize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{minimize:{option:"minimizable",state:"minimized"}},options:{minimizable:!1,minimizeLocation:"left",icons:{minimize:"ui-icon-minus"},beforeMinimize:null,minimize:null},minimize:function(){var e,n,i,o;return n=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,i=200,e=t("#dialog-extend-fixed-container").length?t("#dialog-extend-fixed-container"):t('<div id="dialog-extend-fixed-container"></div>').appendTo("body"),e.css({position:"fixed",bottom:1,left:1,right:1,"z-index":9999}),o=t("<div/>").css({"float":this.options.minimizeLocation,margin:1}),e.append(o),t(this.element[0]).data("dialog-extend-minimize-overlay",o),this._trigger("beforeMinimize"),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("option",{resizable:!1,draggable:!1,height:n,width:i}).on("dialogclose",this._minimize_removeOverlay).dialog("widget").css("position","static").appendTo(o).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-titlebar").each(function(){var e,n,i;return i=t(this),e=i.find(".ui-dialog-titlebar-buttonpane"),n=i.find(".ui-dialog-title"),n.css({overflow:"hidden",width:i.width()-e.width()+10})}).end().find(".ui-dialog-content").hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("minimized"),this._toggleButtons(),this._trigger("minimize")},_restore_minimized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:e.position.mode}).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-title").css("width","auto").end().find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}).off("dialogclose",this._minimize_removeOverlay),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"),t(this.element[0]).data("dialog-extend-minimize-overlay").remove(),t(this.element[0]).removeData("dialog-extend-overlay")},_initStyles_minimize:function(){var e;return t(".dialog-extend-minimize-css").length?void 0:(e="",e+='<style class="dialog-extend-minimize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-minimize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize:hover,",e+=".ui-dialog .ui-dialog-titlebar-minimize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_verifyOptions_minimize:function(){var e;return!this.options.minimizeLocation||"left"!==(e=this.options.minimizeLocation)&&"right"!==e?(t.error("jQuery.dialogExtend Error : Invalid <minimizeLocation> value '"+this.options.minimizeLocation+"'"),this.options.minimizeLocation="left"):void 0},_minimize_removeOverlay:function(){return t(this).dialogExtend("restore"),t(this).dialog("widget").appendTo(t("body")),t(this).data("dialog-extend-minimize-overlay").remove(),t(this).removeData("dialog-extend-overlay")}})}.call(this),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var n=t.scrollTo=function(e,n,i){t(window).scrollTo(e,n,i)};n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(i,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==i&&(i=9e9),r=t.extend({},n.defaults,r),o=o||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=e(r.offset),r.over=e(r.over),this._scrollable().each(function(){function s(t){u.animate(c,o,r.easing,t&&function(){t.call(this,h,r)})}if(null!=i){var a,l=this,u=t(l),h=i,c={},d=u.is("html,body");switch(typeof h){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(h)){h=e(h);break}if(h=t(h,this),!h.length)return;case"object":(h.is||h.style)&&(a=(h=t(h)).offset())}t.each(r.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",o=i.toLowerCase(),p="scroll"+i,f=l[p],g=n.max(l,e);if(a)c[p]=a[o]+(d?0:f-u.offset()[o]),r.margin&&(c[p]-=parseInt(h.css("margin"+i))||0,c[p]-=parseInt(h.css("border"+i+"Width"))||0),c[p]+=r.offset[o]||0,r.over[o]&&(c[p]+=h["x"==e?"width":"height"]()*r.over[o]);else{var m=h[o];c[p]=m.slice&&"%"==m.slice(-1)?parseFloat(m)/100*g:m}r.limit&&/^\d+$/.test(c[p])&&(c[p]=0>=c[p]?0:Math.min(c[p],g)),!t&&r.queue&&(f!=c[p]&&s(r.onAfterFirst),delete c[p])}),s(r.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",o="scroll"+i;if(!t(e).is("html,body"))return e[o]-t(e)[i.toLowerCase()]();var r="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])}}(jQuery);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]||"&amp;"}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function i(t){return t instanceof s?""+t:t||0===t?(t=""+t,h.test(t)?t.replace(u,e):t):""}function o(t){return t||0===t?a(t)&&0===t.length?!0:!1:!0}var r={},s=t,a=Array.isArray,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,h=/[&<>"'`]/;return r.extend=n,r.escapeExpression=i,r.isEmpty=o,r}(t),n=function(){"use strict";function t(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;n.length>e;e++)this[n[e]]=t[n[e]]}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),e=t}(),i=function(t,e){"use strict";function n(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1}function i(t,e){this.helpers=t||{},this.partials=e||{},o(this)}function o(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse||function(){},r=i.fn;return f(e)&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?o(this):n(e)?e.length>0?t.helpers.each(e,i):o(this):r(e)}),t.registerHelper("each",function(t,e){var i,o=e.fn,r=e.inverse,s=0,a="";if(f(t)&&(t=t.call(this)),e.data&&(i=m(e.data)),t&&"object"==typeof t)if(n(t))for(var l=t.length;l>s;s++)i&&(i.index=s,i.first=0===s,i.last=s===t.length-1),a+=o(t[s],{data:i});else for(var u in t)t.hasOwnProperty(u)&&(i&&(i.key=u),a+=o(t[u],{data:i}),s++);return 0===s&&(a=r(this)),a}),t.registerHelper("if",function(t,e){return f(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return f(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function r(t,e){g.log(t,e)}var s={},a=t,l=e,u="1.1.0";s.VERSION=u;var h=4;s.COMPILER_REVISION=h;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var d=Object.prototype.toString,p="[object Object]",f=function(t){return"function"==typeof t};f(/x/)&&(f=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)}),s.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:g,log:r,registerHelper:function(t,e,n){if(d.call(t)===p){if(n||e)throw new l("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===p?a.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(t>=g.level){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};s.logger=g,s.log=r;var m=function(t){var e={};return a.extend(e,t),e};return s.createFrame=m,s}(e,n),o=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],o=p[e];throw Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+o+").")}throw Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){if(!e)throw Error("No environment passed to template");var n;n=e.compile?function(t,n,i,o,r,s){var l=a.apply(this,arguments);if(l)return l;var u={helpers:o,partials:r,data:s};return r[n]=e.compile(t,{data:void 0!==s},e),r[n](i,u)}:function(t,e){var n=a.apply(this,arguments);if(n)return n;throw new c("The partial "+e+" could not be compiled when running in runtime-only mode")};var o={escapeExpression:h.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=s(t,e,n):i||(i=this.programs[t]=s(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},h.extend(n,e),h.extend(n,t)),n},programWithDepth:r,noop:l,compilerInfo:null};return function(n,r){r=r||{};var s,a,l=r.partial?r:e;r.partial||(s=r.helpers,a=r.partials);var u=t.call(o,l,n,s,a,r.data);return r.partial||i(o.compilerInfo),u}}function r(t,e,n){var i=Array.prototype.slice.call(arguments,3),o=function(t,o){return o=o||{},e.apply(this,[t,o.data||n].concat(i))};return o.program=t,o.depth=i.length,o}function s(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function a(t,e,n,i,o,r){var s={partial:!0,helpers:i,partials:o,data:r};if(void 0===t)throw new c("The partial "+e+" could not be found");return t instanceof Function?t(n,s):void 0}function l(){return""}var u={},h=t,c=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.template=o,u.programWithDepth=r,u.program=s,u.invokePartial=a,u.noop=l,u}(e,n,i),r=function(t,e,n,i,o){"use strict";var r,s=t,a=e,l=n,u=i,h=o,c=function(){var t=new s.HandlebarsEnvironment;return u.extend(t,s),t.SafeString=a,t.Exception=l,t.Utils=u,t.VM=h,t.template=function(e){return h.template(e,t)},t},d=c();return d.create=c,r=d}(i,t,n,e,o),s=function(t){"use strict";function e(t,n,i){this.type="program",this.statements=t,this.strip={},i?(this.inverse=new e(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)}function n(t,e,n,i){this.type="mustache",this.hash=e,this.strip=i;var o=n[3]||n[2];this.escaped="{"!==o&&"&"!==o;var r=this.id=t[0],s=this.params=t.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(s.length||e)}function i(t,e,n){this.type="partial",this.partialName=t,this.context=e,this.strip=n}function o(t,e,n,i){if(t.id.original!==i.path.original)throw new g(t.id.original+" doesn't match "+i.path.original);this.type="block",this.mustache=t,this.program=e,this.inverse=n,this.strip={left:t.strip.left,right:i.strip.right},(e||n).strip.left=t.strip.right,(n||e).strip.right=i.strip.left,n&&!e&&(this.isInverse=!0)}function r(t){this.type="content",this.string=t}function s(t){this.type="hash",this.pairs=t}function a(t){this.type="ID";for(var e="",n=[],i=0,o=0,r=t.length;r>o;o++){var s=t[o].part;if(e+=(t[o].separator||"")+s,".."===s||"."===s||"this"===s){if(n.length>0)throw new g("Invalid path: "+e);".."===s?i++:this.isScoped=!0}else n.push(s)}this.original=e,this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===t.length&&!this.isScoped&&0===i,this.stringModeValue=this.string}function l(t){this.type="PARTIAL_NAME",this.name=t.original}function u(t){this.type="DATA",this.id=t}function h(t){this.type="STRING",this.original=this.string=this.stringModeValue=t}function c(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)}function d(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t}function p(t){this.type="comment",this.comment=t}var f={},g=t;return f.ProgramNode=e,f.MustacheNode=n,f.PartialNode=i,f.BlockNode=o,f.ContentNode=r,f.HashNode=s,f.IdNode=a,f.PartialNameNode=l,f.DataNode=u,f.StringNode=h,f.IntegerNode=c,f.BooleanNode=d,f.CommentNode=p,f}(n),a=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t[2],right:"~"===e[0]||"~"===e[1]}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(e,n,i,o,r,s){var a=s.length-1;switch(r){case 1:return new o.ProgramNode(s[a-1]);case 2:this.$=new o.ProgramNode([],s[a-1],s[a]);break;case 3:this.$=new o.ProgramNode(s[a-2],s[a-1],s[a]);break;case 4:this.$=new o.ProgramNode(s[a-1],s[a],[]);break;case 5:this.$=new o.ProgramNode(s[a]);break;case 6:this.$=new o.ProgramNode([]);break;case 7:this.$=new o.ProgramNode([]);break;case 8:this.$=[s[a]];break;case 9:s[a-1].push(s[a]),this.$=s[a-1];break;case 10:this.$=new o.BlockNode(s[a-2],s[a-1].inverse,s[a-1],s[a]);break;case 11:this.$=new o.BlockNode(s[a-2],s[a-1],s[a-1].inverse,s[a]);break;case 12:this.$=s[a];break;case 13:this.$=s[a];break;case 14:this.$=new o.ContentNode(s[a]);break;case 15:this.$=new o.CommentNode(s[a]);break;case 16:this.$=new o.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 17:this.$=new o.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 18:this.$={path:s[a-1],strip:t(s[a-2],s[a])};break;case 19:this.$=new o.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 20:this.$=new o.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 21:this.$=new o.PartialNode(s[a-2],s[a-1],t(s[a-3],s[a]));break;case 22:this.$=t(s[a-1],s[a]);break;case 23:this.$=[[s[a-2]].concat(s[a-1]),s[a]];break;case 24:this.$=[[s[a]],null];break;case 25:this.$=s[a];break;case 26:this.$=new o.StringNode(s[a]);break;case 27:this.$=new o.IntegerNode(s[a]);break;case 28:this.$=new o.BooleanNode(s[a]);break;case 29:this.$=s[a];break;case 30:this.$=new o.HashNode(s[a]);break;case 31:this.$=[s[a-2],s[a]];break;case 32:this.$=new o.PartialNameNode(s[a]);break;case 33:this.$=new o.PartialNameNode(new o.StringNode(s[a]));break;case 34:this.$=new o.PartialNameNode(new o.IntegerNode(s[a]));break;case 35:this.$=new o.DataNode(s[a]);break;case 36:this.$=new o.IdNode(s[a]);break;case 37:s[a-2].push({part:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 38:this.$=[{part:s[a]}];break;case 41:this.$=[];break;case 42:s[a-1].push(s[a]);break;case 45:this.$=[s[a]];break;case 46:s[a-1].push(s[a])}},table:[{3:1,4:2,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],22:[1,12],23:[1,13],25:[1,14]},{1:[3]},{5:[1,15],8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],22:[1,12],23:[1,13],25:[1,14]},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:19,6:17,7:18,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,7],22:[1,12],23:[1,13],25:[1,14]},{4:19,6:21,7:18,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,7],22:[1,12],23:[1,13],25:[1,14]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:22,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:28,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:29,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:30,21:23,30:24,38:[1,27],40:[1,26],41:25},{21:32,26:31,32:[1,33],33:[1,34],38:[1,27],41:25},{1:[2,1]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{10:35,20:[1,36]},{4:37,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,6],22:[1,12],23:[1,13],25:[1,14]},{7:38,8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,5],22:[1,12],23:[1,13],25:[1,14]},{17:22,18:[1,39],21:23,30:24,38:[1,27],40:[1,26],41:25},{10:40,20:[1,36]},{18:[1,41]},{18:[2,41],24:[2,41],28:42,32:[2,41],33:[2,41],34:[2,41],38:[2,41],40:[2,41]},{18:[2,24],24:[2,24]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36],42:[1,43]},{21:44,38:[1,27],41:25},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{18:[1,45]},{18:[1,46]},{24:[1,47]},{18:[2,39],21:49,27:48,38:[1,27],41:25},{18:[2,32],38:[2,32]},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:50,38:[1,27],41:25},{8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,2],22:[1,12],23:[1,13],25:[1,14]},{4:51,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,4],22:[1,12],23:[1,13],25:[1,14]},{14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,43],21:55,24:[2,43],29:52,30:59,31:53,32:[1,56],33:[1,57],34:[1,58],35:54,36:60,37:61,38:[1,62],40:[1,26],41:25},{38:[1,63]},{18:[2,35],24:[2,35],32:[2,35],33:[2,35],34:[2,35],38:[2,35],40:[2,35]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{18:[1,64]},{18:[2,40]},{18:[1,65]},{8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,3],22:[1,12],23:[1,13],25:[1,14]},{18:[2,23],24:[2,23]},{18:[2,42],24:[2,42],32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,44],24:[2,44]},{18:[2,25],24:[2,25],32:[2,25],33:[2,25],34:[2,25],38:[2,25],40:[2,25]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],37:66,38:[1,67]},{18:[2,45],24:[2,45],38:[2,45]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],39:[1,68],40:[2,38],42:[2,38]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[2,37]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,46],24:[2,46],38:[2,46]},{39:[1,68]},{21:55,30:59,31:69,32:[1,56],33:[1,57],34:[1,58],38:[1,27],40:[1,26],41:25},{18:[2,31],24:[2,31],38:[2,31]}],defaultActions:{15:[2,1],49:[2,40]},parseError:function(t){throw Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],o=[null],r=[],s=this.table,a="",l=0,u=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});
var c=this.lexer.yylloc;r.push(c);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,x,S={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||p===void 0)&&(p=e()),m=s[g]&&s[g][p]),m===void 0||!m.length||!m[0]){var _="";if(!h){x=[];for(y in s[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");_=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(_,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),o.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[m[1]][1],S.$=o[o.length-b],S._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(S._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(S,a,u,l,this.yy,m[1],o,r),v!==void 0)return v;b&&(i=i.slice(0,2*-1*b),o=o.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),o.push(S.$),r.push(S._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;r.length>s&&(n=this._input.match(this.rules[r[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function o(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&o(0,1),14;case 3:return o(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return o(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return e.yytext=o(1,2).replace(/\\"/g,'"'),32;case 22:return e.yytext=o(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return e.yytext=o(1,2),38;case 29:return"INVALID";case 30:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===r.ProgramNode?t:(o.yy=r,o.parse(t))}var i={},o=t,r=e;return i.parser=o,i.parse=n,i}(a,s),u=function(t){"use strict";function e(t){this.value=t}function n(){}var i,o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,s=t.log;n.prototype={nameLookup:function(t,e){var i,o;return 0===t.indexOf("depth")&&(i=!0),o=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+o+")":o},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var o,r=t.opcodes;this.i=0;for(var a=r.length;a>this.i;this.i++)o=r[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args),o.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,l=this.environment.depths.list.length;l>a;a++)i.push("depth"+this.environment.depths.list[a]);var u=this.mergeSource();if(!this.isChild){var h=o,c=r[h];u="this.compilerInfo = ["+h+",'"+c+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var d="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return s("debug",d+"\n\n"),d},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var o=this.source[n];o.appendToBuffer?t=t?t+"\n    + "+o.content:o.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=o+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();this.pushSource("if ("+r+" = "+i+") { "+r+" = "+r+".call("+n.callParams+"); }"),this.pushSource("else { "+r+" = "+o+"; "+r+" = typeof "+r+" === functionType ? "+r+".call("+n.callParams+") : "+r+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var o=this.hash;e&&o.contexts.push("'"+t+"': "+e),n&&o.types.push("'"+t+"': "+n),o.values.push("'"+t+"': ("+i+")")},compiler:n,compileChildren:function(t,e){for(var n,i,o=t.children,r=0,s=o.length;s>r;r++){n=o[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,o=[n.index,n.name,"data"],r=0,s=i.length;s>r;r++)e=i[r],1===e?o.push("depth0"):o.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+o.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new e(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var n,i="",o=this.isInline();if(o){var r=this.popStack(!0);if(r instanceof e)n=r.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+r+"),",n=this.topStack()}}else n=this.topStack();var a=t.call(this,n);return o?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+a+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+i+a+");")),n},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var n=0,i=t.length;i>n;n++){var o=t[n];o instanceof e?this.compileStack.push(o):this.pushStack(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var n=this.isInline(),i=(n?this.inlineStack:this.compileStack).pop();return!t&&i instanceof e?i.value:(n||this.stackSlot--,i)},topStack:function(t){var n=this.isInline()?this.inlineStack:this.compileStack,i=n[n.length-1];return!t&&i instanceof e?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var o=this.nameLookup("helpers",e,"helper");return{params:i,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,o,r,s=[],a=[],l=[];s.push("hash:"+this.popStack()),o=this.popStack(),r=this.popStack(),(r||o)&&(r||(this.context.aliases.self="this",r="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),s.push("inverse:"+o),s.push("fn:"+r));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashContexts:hashContexts"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},u=0,h=a.length;h>u;u++)l[a[u]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},i=n}(i),h=function(t,e,n,i){"use strict";function o(){}function r(t,e){if(null==t||"string"!=typeof t&&t.constructor!==c.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=u(t),i=(new o).compile(n,e);return(new h).compile(i,e)}function s(t,e,n){function i(){var i=u(t),r=(new o).compile(i,e),s=(new h).compile(r,e,void 0,!0);return n.template(s)}if(null==t||"string"!=typeof t&&t.constructor!==c.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var a={},l=t,u=e.parse,h=n,c=i;return a.Compiler=o,o.prototype={compiler:o,disassemble:function(){for(var t,e,n,i=this.opcodes,o=[],r=0,s=i.length;s>r;r++)if(t=i[r],"DECLARE"===t.opcode)o.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);o.push(t.opcode+" "+e.join(" "))}return o.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],o=t.opcodes[n];if(i.opcode!==o.opcode||i.args.length!==o.args.length)return!1;for(var r=0;i.args.length>r;r++)if(i.args[r]!==o.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var o=0,r=n.depths.list.length;r>o;o++)e=n.depths.list[o],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var o=this.classifyMustache(e);"helper"===o?this.helperMustache(e,n,i):"simple"===o?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var o=0,r=i.length;r>o;o++)e=i[o],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,o=i.parts[0],r=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",o,r)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+o);this.opcode("invokeHelper",i.length,o)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new l("Scoped data references are not supported: "+t.original);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var o=t.id.parts[0];i.knownHelpers[o]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},a.precompile=r,a.compile=s,a}(n,l,u,s),c=function(t,e,n,i,o){"use strict";var r,s=t,a=e,l=n.parser,u=n.parse,h=i.Compiler,c=i.compile,d=i.precompile,p=o,f=s.create,g=function(){var t=f();return t.compile=function(e,n){return c(e,n,t)},t.precompile=d,t.AST=a,t.Compiler=h,t.JavaScriptCompiler=p,t.Parser=l,t.parse=u,t};return s=g(),s.create=g,r=s}(r,s,l,h,u);return c}();//! OpenSeadragon 0.9.129
//! Built on 2013-08-05
//! Git commit: v0.9.129-29-g967f2e4-dirty
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
window.OpenSeadragon=window.OpenSeadragon||function(t){return new OpenSeadragon.Viewer(t)},function(t){var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null===t||void 0===t?t+"":e[n.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return void 0===n||i.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0}}(OpenSeadragon),function(t){function e(t,e){return e&&t!=document.body?document.body:t.offsetParent}t.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=arguments.length,l=!1,u=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===u&&(s=this,--u);a>u;u++)if(t=arguments[u],null!==t||void 0!==t)for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(o=OpenSeadragon.isArray(i)))?(o?(o=!1,r=n&&OpenSeadragon.isArray(n)?n:[]):r=n&&OpenSeadragon.isPlainObject(n)?n:{},s[e]=OpenSeadragon.extend(l,r,i)):void 0!==i&&(s[e]=i));return s},t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,springStiffness:7,clickTimeThreshold:300,clickDistThreshold:5,zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,animationTime:1.2,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,showSequenceControl:!0,preserveViewport:!1,showNavigationControl:!0,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorHeight:null,navigatorWidth:null,navigatorPosition:null,navigatorSizeRatio:.2,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,onPageChange:null,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},navPrevNextWrap:!1,debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(n){var i,o,r=new t.Point;for(n=t.getElement(n),i="fixed"==t.getElementStyle(n).position,o=e(n,i);o;)r.x+=n.offsetLeft,r.y+=n.offsetTop,i&&(r=r.plus(t.getPageScroll())),n=o,i="fixed"==t.getElementStyle(n).position,o=e(n,i);return r},getElementSize:function(e){return e=t.getElement(e),new t.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=t.getElement(e),e.currentStyle}:function(e){return e=t.getElement(e),window.getComputedStyle(e,"")},getEvent:function(e){return t.getEvent=e?function(t){return t}:function(){return window.event},t.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.pageX,n.y=e.pageY,n};else{if("number"!=typeof e.clientX)throw Error("Unknown event mouse position, no known technique.");t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,n}}return t.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},n=document.body||{};return t.getPageScroll="number"==typeof window.pageXOffset?function(){return new t.Point(window.pageXOffset,window.pageYOffset)}:n.scrollLeft||n.scrollTop?function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)}:e.scrollLeft||e.scrollTop?function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}:function(){return new t.Point(0,0)},t.getPageScroll()},getWindowSize:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.innerWidth)t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!n.clientWidth&&!n.clientHeight)throw Error("Unknown window size, no known technique.");t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)}}return t.getWindowSize()},makeCenteredNode:function(e){e=t.getElement(e);var n=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(n[1].style,{display:"table-row"}),t.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(e),n[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return t.now=Date.now?Date.now:function(){return(new Date).getTime()},t.now()},makeTransparentImage:function(e){return t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img");return n.src=e,n},t.Browser.vendor==t.BROWSERS.IE&&7>t.Browser.version&&(t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img"),i=null;return i=t.makeNeutralElement("span"),i.style.display="inline-block",n.onload=function(){i.style.width=i.style.width||n.width+"px",i.style.height=i.style.height||n.height+"px",n.onload=null,n=null},n.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),t.makeTransparentImage(e)},setElementOpacity:function(e,n,i){var o,r;e=t.getElement(e),i&&!t.Browser.alpha&&(n=Math.round(n)),t.Browser.opacity?e.style.opacity=1>n?n:"":1>n?(o=Math.round(100*n),r="alpha(opacity="+o+")",e.style.filter=r):e.style.filter=""},addClass:function(e,n){e=t.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+n+" ")&&(e.className+=" "+n):e.className=n},removeClass:function(e,n){var i,o,r=[];for(e=t.getElement(e),i=e.className.split(/\s+/),o=0;i.length>o;o++)i[o]&&i[o]!==n&&r.push(i[o]);e.className=r.join(" ")},addEvent:function(e,n,i,o){if(e=t.getElement(e),e.addEventListener)t.addEvent=function(e,n,i,o){e=t.getElement(e),e.addEventListener(n,i,o)};else{if(!e.attachEvent)throw Error("Unable to attach event handler, no known technique.");t.addEvent=function(e,n,i,o){e=t.getElement(e),e.attachEvent("on"+n,i),o&&e.setCapture&&e.setCapture()}}return t.addEvent(e,n,i,o)},removeEvent:function(e,n,i,o){if(e=t.getElement(e),e.removeEventListener)t.removeEvent=function(e,n,i,o){e=t.getElement(e),e.removeEventListener(n,i,o)};else{if(!e.detachEvent)throw Error("Unable to detach event handler, no known technique.");t.removeEvent=function(e,n,i,o){e=t.getElement(e),e.detachEvent("on"+n,i),o&&e.releaseCapture&&e.releaseCapture()}}return t.removeEvent(e,n,i,o)},cancelEvent:function(e){e=t.getEvent(e),t.cancelEvent=e.preventDefault?function(t){t.preventDefault()}:function(e){e=t.getEvent(e),e.cancel=!0,e.returnValue=!1},t.cancelEvent(e)},stopEvent:function(e){e=t.getEvent(e),t.stopEvent=e.stopPropagation?function(t){t.stopPropagation()}:function(e){e=t.getEvent(e),e.cancelBubble=!0},t.stopEvent(e)},createCallback:function(t,e){var n,i=[];for(n=2;arguments.length>n;n++)i.push(arguments[n]);return function(){var n,o=i.concat([]);for(n=0;arguments.length>n;n++)o.push(arguments[n]);return e.apply(t,o)}},getUrlParameter:function(t){var e=o[t];return e?e:null},createAjaxRequest:function(){var e;if(window.XMLHttpRequest)t.createAjaxRequest=function(){return new XMLHttpRequest},e=new XMLHttpRequest;else if(window.ActiveXObject)for(var i=0;n.length>i;i++)try{e=new ActiveXObject(n[i]),t.createAjaxRequest=function(){return new ActiveXObject(n[i])};break}catch(o){continue}if(!e)throw Error("Browser doesn't support XMLHttpRequest.");return e},makeAjaxRequest:function(e,n,i){var o=t.createAjaxRequest();if(!t.isFunction(n))throw Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){4==o.readyState&&(o.onreadystatechange=function(){},200==o.status?n(o):(t.console.log("AJAX request returned %s: %s",o.status,e),t.isFunction(i)&&i(o)))};try{o.open("GET",e,!0),o.send(null)}catch(r){t.console.log("%s while making AJAX request: %s",r.name,r.message),o.onreadystatechange=function(){},t.isFunction(i)&&i(o,r)}},jsonp:function(e){var n,i=e.url,o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=e.callbackName||"openseadragon"+t.now(),s=window[r],a="$1"+r+"$2",l=e.param||"callback",u=e.callback;i=i.replace(/(\=)\?(&|$)|\?\?/i,a),i+=(/\?/.test(i)?"&":"?")+l+"="+r,window[r]=function(e){if(s)window[r]=s;else try{delete window[r]}catch(n){}u&&t.isFunction(u)&&u(e)},n=document.createElement("script"),(void 0!==e.async||!1!==e.async)&&(n.async="async"),e.scriptCharset&&(n.charset=e.scriptCharset),n.src=i,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,o&&n.parentNode&&o.removeChild(n),n=void 0)},o.insertBefore(n,o.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.ActiveXObject)t.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e};else{if(!window.DOMParser)throw Error("Browser doesn't support XML DOM.");t.parseXml=function(t){var e,n=null;return e=new DOMParser,n=e.parseFromString(t,"text/xml")}}return t.parseXml(e)},imageFormatSupported:function(t){return t=t?t:"",!!i[t.toLowerCase()]}}),t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],i={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},o={};!function(){var e=(navigator.appName,navigator.appVersion),n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0&&(t.Browser.vendor=n.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(e)}var i,r,s,a=window.location.search.substring(1),l=a.split("&");for(s=0;l.length>s;s++)i=l[s],r=i.indexOf("="),r>0&&(o[i.substring(0,r)]=decodeURIComponent(i.substring(r+1)));t.Browser.alpha=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version||t.Browser.vendor==t.BROWSERS.CHROME&&2>t.Browser.version),t.Browser.opacity=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version)}();var r=function(){};t.console=window.console||{log:r,debug:r,info:r,warn:r,error:r},function(e){var n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(n&&i)t.requestAnimationFrame=function(){return n.apply(e,arguments)},t.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var o,r=[],s=[],a=0;t.requestAnimationFrame=function(e){return r.push([++a,e]),o||(o=setInterval(function(){if(r.length){var e=t.now(),n=s;for(s=r,r=n;s.length;)s.shift()[1](e)}else clearInterval(o),o=void 0},20)),a},t.cancelAnimationFrame=function(t){var e,n;for(e=0,n=r.length;n>e;e+=1)if(r[e][0]===t)return r.splice(e,1),void 0;for(e=0,n=s.length;n>e;e+=1)if(s[e][0]===t)return s.splice(e,1),void 0}}}(window),t._processDZIError=function(t){var e=t.getElementsByTagName("Message")[0],n=e.firstChild.nodeValue;throw Error(n)}}(OpenSeadragon),function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},n="webkit moz o ms khtml".split(" ");if(document.cancelFullScreen!==void 0)e.supportsFullScreen=!0;else for(var i=0,o=n.length;o>i;i++)if(e.prefix=n[i],document[e.prefix+"CancelFullScreen"]!==void 0){e.supportsFullScreen=!0;break}e.supportsFullScreen?(e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},e.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):window.ActiveXObject!==void 0&&(e.requestFullScreen=function(){var t=new ActiveXObject("WScript.Shell");return null!==t&&t.SendKeys("{F11}"),!1},e.cancelFullScreen=e.requestFullScreen),t.extend(t,e)}(OpenSeadragon),function(t){t.EventHandler=function(){this.events={}},t.EventHandler.prototype={addHandler:function(e,n){var i=this.events[e];i||(this.events[e]=i=[]),n&&t.isFunction(n)&&(i[i.length]=n)},removeHandler:function(e,n){var i,o=this.events[e],r=[];if(o&&t.isArray(o)){for(i=0;o.length>i;i++)o[i]!==n&&r.push(o[i]);this.events[e]=r}},removeAllHandlers:function(t){this.events[t]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var i,o=e.length;for(i=0;o>i;i++)e[i]&&e[i](t,n)}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&(e||(e={}),n(this,e))}}}(OpenSeadragon),function(t){function e(e){var n,i,o=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],r=N[e.hash];if(!r.tracking){for(i=0;o.length>i;i++)n=o[i],t.addEvent(e.element,n,r[n],!1);r.tracking=!0,A[e.hash]=e}}function n(e){var n,i,o=["mouseover","mouseout","mousedown","mouseup","click","DOMMouseScroll","mousewheel","touchstart","touchmove","touchend","keypress","focus","blur"],s=N[e.hash];if(s.tracking){for(i=0;o.length>i;i++)n=o[i],t.removeEvent(e.element,n,s[n],!1);r(e),s.tracking=!1,delete A[e.hash]}}function i(t){return N[t.hash].insideElement}function o(e){var n=N[e.hash];n.capturing||(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.removeEvent(e.element,"mouseup",n.mouseup,!1),t.addEvent(e.element,"mouseup",n.mouseupie,!0),t.addEvent(e.element,"mousemove",n.mousemoveie,!0)):(t.addEvent(window,"mouseup",n.mouseupwindow,!0),t.addEvent(window,"mousemove",n.mousemove,!0)),n.capturing=!0)}function r(e){var n=N[e.hash];n.capturing&&(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.removeEvent(e.element,"mousemove",n.mousemoveie,!0),t.removeEvent(e.element,"mouseup",n.mouseupie,!0),t.addEvent(e.element,"mouseup",n.mouseup,!1)):(t.removeEvent(window,"mousemove",n.mousemove,!0),t.removeEvent(window,"mouseup",n.mouseupwindow,!0)),n.capturing=!1)}function s(t,e,n){var i;for(i in A)A.hasOwnProperty(i)&&t.hash!=i&&e(A[i],n)}function a(e,n){var i;e.focusHandler&&(i=e.focusHandler(e,n),i===!1&&t.cancelEvent(n))}function l(e,n){var i;e.blurHandler&&(i=e.blurHandler(e,n),i===!1&&t.cancelEvent(n))}function u(e,n){var i;e.keyHandler&&(i=e.keyHandler(e,n.keyCode?n.keyCode:n.charCode,n.shiftKey),i||t.cancelEvent(n))}function h(e,n){var i,o=N[e.hash];n=t.getEvent(n),t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&o.capturing&&!k(n.srcElement,e.element)&&s(e,h,n);var r=n.target?n.target:n.srcElement,a=n.relatedTarget?n.relatedTarget:n.fromElement;k(e.element,r)&&!k(e.element,a)&&(o.insideElement=!0,e.enterHandler&&(i=e.enterHandler(e,E(n,e.element),o.buttonDown,z),i===!1&&t.cancelEvent(n)))}function c(e,n){var i,o=N[e.hash];n=t.getEvent(n),t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&o.capturing&&!k(n.srcElement,e.element)&&s(e,c,n);var r=n.target?n.target:n.srcElement,a=n.relatedTarget?n.relatedTarget:n.toElement;k(e.element,r)&&!k(e.element,a)&&(o.insideElement=!1,e.exitHandler&&(i=e.exitHandler(e,E(n,e.element),o.buttonDown,z),i===!1&&t.cancelEvent(n)))}function d(e,n,i){var r,s=N[e.hash];n=t.getEvent(n),2!=n.button&&(s.buttonDown=!0,s.lastPoint=T(n),s.lastMouseDownPoint=s.lastPoint,s.lastMouseDownTime=t.now(),e.pressHandler&&(r=e.pressHandler(e,E(n,e.element)),r===!1&&t.cancelEvent(n)),(e.pressHandler||e.dragHandler)&&t.cancelEvent(n),i||(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&P?t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version&&I.push(e):(o(e),P=!0,I=[e])))}function p(e,n){var i,o;1==n.touches.length&&1==n.targetTouches.length&&1==n.changedTouches.length&&(N[e.hash].lastTouch=n.touches[0],h(e,n.changedTouches[0]),d(e,n.touches[0],!0)),2==n.touches.length&&(i=T(n.touches[0]),o=T(n.touches[1]),N[e.hash].lastPinchDelta=Math.abs(i.x-o.x)+Math.abs(i.y-o.y),N[e.hash].pinchMidpoint=new t.Point((i.x+o.x)/2,(i.y+o.y)/2)),n.preventDefault()}function f(e,n){var i,o=N[e.hash],r=o.buttonDown,s=o.insideElement;n=t.getEvent(n),2!=n.button&&(o.buttonDown=!1,e.releaseHandler&&(i=e.releaseHandler(e,E(n,e.element),r,s),i===!1&&t.cancelEvent(n)),r&&s&&w(e,n))}function g(t,e){0===e.touches.length&&0===e.targetTouches.length&&1==e.changedTouches.length&&(N[t.hash].lastTouch=null,v(t,e.changedTouches[0],!0),c(t,e.changedTouches[0])),2==e.touches.length+e.changedTouches.length&&(N[t.hash].lastPinchDelta=null,N[t.hash].pinchMidpoint=null),e.preventDefault()}function m(e,n){var o,s;if(n=t.getEvent(n),2!=n.button){for(s=0;I.length>s;s++)o=I[s],i(o)||f(o,n);r(e),P=!1,n.srcElement.fireEvent("on"+n.type,document.createEventObject(n)),t.stopEvent(n)}}function v(t,e,n){N[t.hash].insideElement||f(t,e),n||r(t)}function y(e,n){e.clickHandler&&t.cancelEvent(n)}function b(e,n){var i,o=0;n||(n=window.event),n.wheelDelta?(o=n.wheelDelta,window.opera&&(o=-o)):n.detail&&(o=-n.detail),o=o>0?1:-1,e.scrollHandler&&(i=e.scrollHandler(e,E(n,e.element),o,n.shiftKey),i===!1&&t.cancelEvent(n))}function w(e,n){var i,o=N[e.hash];if(n=t.getEvent(n),2!=n.button){var r=t.now()-o.lastMouseDownTime,s=T(n),a=o.lastMouseDownPoint.distanceTo(s),l=e.clickTimeThreshold>=r&&e.clickDistThreshold>=a;e.clickHandler&&(i=e.clickHandler(e,E(n,e.element),l,n.shiftKey),i===!1&&t.cancelEvent(n))}}function x(e,n){var i,o,r,s=N[e.hash];n=t.getEvent(n),r=T(n),i=r.minus(s.lastPoint),s.lastPoint=r,e.dragHandler&&(o=e.dragHandler(e,E(n,e.element),i,n.shiftKey),o===!1&&t.cancelEvent(n))}function S(t,e){var n,i,o;1===e.touches.length&&1===e.targetTouches.length&&1===e.changedTouches.length&&N[t.hash].lastTouch.identifier===e.touches[0].identifier?x(t,e.touches[0]):2===e.touches.length&&(n=T(e.touches[0]),i=T(e.touches[1]),o=Math.abs(n.x-i.x)+Math.abs(n.y-i.y),Math.abs(N[t.hash].lastPinchDelta-o)>75&&(b(t,{shift:!1,pageX:N[t.hash].pinchMidpoint.x,pageY:N[t.hash].pinchMidpoint.y,detail:N[t.hash].lastPinchDelta>o?1:-1}),N[t.hash].lastPinchDelta=o)),e.preventDefault()}function _(e,n){var i;for(i=0;I.length>i;i++)x(I[i],n);t.stopEvent(n)}function T(e){return t.getMousePosition(e)}function E(e,n){var i=t.getMousePosition(e),o=t.getElementPosition(n);return i.minus(o)}function k(t,e){for(var n=document.body;e&&t!=e&&n!=e;)try{e=e.parentNode}catch(i){return!1}return t==e}function C(){z=!0}function M(){z=!1}var z=!1,P=!1,A={},I=[],N={};t.MouseTracker=function(e){var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.releaseHandler=e.releaseHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dragHandler=e.dragHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var i=this;N[this.hash]={mouseover:function(t){h(i,t)},mouseout:function(t){c(i,t)},mousedown:function(t){d(i,t)},mouseup:function(t){f(i,t)},click:function(t){y(i,t)},DOMMouseScroll:function(t){b(i,t)},mousewheel:function(t){b(i,t)},mouseupie:function(t){m(i,t)},mousemoveie:function(t){_(i,t)},mouseupwindow:function(t){v(i,t)},mousemove:function(t){x(i,t)},touchstart:function(t){p(i,t)},touchmove:function(t){S(i,t)},touchend:function(t){g(i,t)},keypress:function(t){u(i,t)},focus:function(t){a(i,t)},blur:function(t){l(i,t)},tracking:!1,capturing:!1,buttonDown:!1,insideElement:!1,lastPoint:null,lastMouseDownTime:null,lastMouseDownPoint:null,lastPinchDelta:0}},t.MouseTracker.prototype={isTracking:function(){return N[this.hash].tracking},setTracking:function(t){return t?e(this):n(this),this},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},releaseHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dragHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},function(){t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version?(t.addEvent(document,"mousedown",C,!1),t.addEvent(document,"mouseup",M,!1)):(t.addEvent(window,"mousedown",C,!0),t.addEvent(window,"mouseup",M,!0))}()}(OpenSeadragon),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},t.Control=function(e,n,i){var o=e.parentNode;"number"==typeof n&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=n.attachToViewer===void 0?!0:n.attachToViewer,this.autoFade=n.autoFade===void 0?!0:n.autoFade,this.element=e,this.anchor=n.anchor,this.container=i,this.wrapper=t.makeNeutralElement("span"),this.wrapper.style.display="inline-block",this.wrapper.appendChild(this.element),this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%"),n.attachToViewer?this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(t){function e(t,e){var n,i=t.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==e)return n;return-1}t.ControlDock=function(e){var n,i,o=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("form"),controls:[]},e),this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;o.length>i;i++)n=o[i],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,i){n=t.getElement(n);var o=null;if(!(e(this,n)>=0)){switch(i.anchor){case t.ControlAnchor.TOP_RIGHT:o=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:o=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;default:case t.ControlAnchor.NONE:o=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,i,o)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);var i=e(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),function($){function _getSafeElemSize(t){return t=$.getElement(t),new $.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function openTileSource(t,e){var n,i,o=t;for(o.source&&o.close(),o.canvas.innerHTML="",THIS[o.hash].prevContainerSize=_getSafeElemSize(o.container),o.collectionMode?(o.source=new $.TileSourceCollection({rows:o.collectionRows,layout:o.collectionLayout,tileSize:o.collectionTileSize,tileSources:o.tileSources,tileMargin:o.collectionTileMargin}),o.viewport=o.viewport?o.viewport:new $.Viewport({collectionMode:!0,collectionTileSource:o.source,containerSize:THIS[o.hash].prevContainerSize,contentSize:o.source.dimensions,springStiffness:o.springStiffness,animationTime:o.animationTime,showNavigator:!1,minZoomImageRatio:1,maxZoomPixelRatio:1,viewer:o})):(e&&(o.source=e),o.viewport=o.viewport?o.viewport:new $.Viewport({containerSize:THIS[o.hash].prevContainerSize,contentSize:o.source.dimensions,springStiffness:o.springStiffness,animationTime:o.animationTime,minZoomImageRatio:o.minZoomImageRatio,maxZoomPixelRatio:o.maxZoomPixelRatio,visibilityRatio:o.visibilityRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,defaultZoomLevel:o.defaultZoomLevel,minZoomLevel:o.minZoomLevel,maxZoomLevel:o.maxZoomLevel,viewer:o})),o.preserveViewport&&o.viewport.resetContentSize(o.source.dimensions),o.source.overlays=o.source.overlays||[],o.drawer=new $.Drawer({viewer:o,source:o.source,viewport:o.viewport,element:o.canvas,overlays:[].concat(o.overlays).concat(o.source.overlays),maxImageCacheCount:o.maxImageCacheCount,imageLoaderLimit:o.imageLoaderLimit,minZoomImageRatio:o.minZoomImageRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,immediateRender:o.immediateRender,blendTime:o.blendTime,alwaysBlend:o.alwaysBlend,minPixelRatio:o.collectionMode?0:o.minPixelRatio,timeout:o.timeout,debugMode:o.debugMode,debugGridColor:o.debugGridColor}),o.showNavigator&&!o.collectionMode&&(o.navigator?o.navigator.open(e):o.navigator=new $.Navigator({id:o.navigatorId,position:o.navigatorPosition,sizeRatio:o.navigatorSizeRatio,height:o.navigatorHeight,width:o.navigatorWidth,tileSources:e,tileHost:o.tileHost,prefixUrl:o.prefixUrl,overlays:o.overlays,viewer:o})),o.showReferenceStrip&&!o.referenceStrip&&(o.referenceStrip=new $.ReferenceStrip({id:o.referenceStripElement,position:o.referenceStripPosition,sizeRatio:o.referenceStripSizeRatio,scroll:o.referenceStripScroll,height:o.referenceStripHeight,width:o.referenceStripWidth,tileSources:o.tileSources,tileHost:o.tileHost,prefixUrl:o.prefixUrl,overlays:o.overlays,viewer:o})),THIS[o.hash].animating=!1,THIS[o.hash].forceRedraw=!0,o._updateRequestId=scheduleUpdate(o,updateMulti),i=0;o.overlayControls.length>i;i++)n=o.overlayControls[i],n.point?o.drawer.addOverlay(n.id,new $.Point(n.point.X,n.point.Y),$.OverlayPlacement.TOP_LEFT):o.drawer.addOverlay(n.id,new $.Rect(n.rect.Point.X,n.rect.Point.Y,n.rect.Width,n.rect.Height),n.placement);return VIEWERS[o.hash]=o,o.raiseEvent("open",{source:e,viewer:o}),o}function scheduleUpdate(t,e){return $.requestAnimationFrame(function(){e(t)})}function scheduleControlsFade(t){$.requestAnimationFrame(function(){updateControlsFade(t)})}function beginControlsAutoHide(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=$.now()+t.controlsFadeDelay,window.setTimeout(function(){scheduleControlsFade(t)},t.controlsFadeDelay))}function updateControlsFade(t){var e,n,i,o;if(t.controlsShouldFade){for(e=$.now(),n=e-t.controlsFadeBeginTime,i=1-n/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),o=t.controls.length-1;o>=0;o--)t.controls[o].autoFade&&t.controls[o].setOpacity(i);i>0&&scheduleControlsFade(t)}}function abortControlsAutoHide(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function onFocus(){abortControlsAutoHide(this)}function onBlur(){beginControlsAutoHide(this)}function onCanvasClick(t,e,n,i){var o,r;this.viewport&&n&&(o=this.zoomPerClick,r=i?1/o:o,this.viewport.zoomBy(r,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-click",{tracker:t,position:e,quick:n,shift:i})}function onCanvasDrag(t,e,n,i){this.viewport&&(this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(n.negate())),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-click",{tracker:t,position:e,delta:n,shift:i})}function onCanvasRelease(t,e,n,i){n&&this.viewport&&this.viewport.applyConstraints(),this.raiseEvent("canvas-release",{tracker:t,position:e,insideElementPress:n,insideElementRelease:i})}function onCanvasScroll(t,e,n,i){var o;return this.viewport&&(o=Math.pow(this.zoomPerScroll,n),this.viewport.zoomBy(o,this.viewport.pointFromPixel(e,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t,position:e,scroll:n,shift:i}),!1}function onContainerExit(t,e,n,i){n||(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-exit",{tracker:t,position:e,buttonDownElement:n,buttonDownAny:i})
}function onContainerRelease(t,e,n,i){i||(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-release",{tracker:t,position:e,insideElementPress:n,insideElementRelease:i})}function onContainerEnter(t,e,n,i){THIS[this.hash].mouseInside=!0,abortControlsAutoHide(this),this.raiseEvent("container-enter",{tracker:t,position:e,buttonDownElement:n,buttonDownAny:i})}function updateMulti(t){return t.source?(updateOnce(t),t.source&&(t._updateRequestId=scheduleUpdate(t,updateMulti)),void 0):(t._updateRequestId=null,void 0)}function updateOnce(t){var e,n;t.source&&(e=_getSafeElemSize(t.container),e.equals(THIS[t.hash].prevContainerSize)||(t.viewport.resize(e,!0),THIS[t.hash].prevContainerSize=e),n=t.viewport.update(),t.referenceStrip&&(n=t.referenceStrip.update(t.viewport)||n),!THIS[t.hash].animating&&n&&(t.raiseEvent("animationstart"),abortControlsAutoHide(t)),n?(t.drawer.update(),t.navigator&&t.navigator.update(t.viewport),t.raiseEvent("animation")):(THIS[t.hash].forceRedraw||t.drawer.needsUpdate())&&(t.drawer.update(),t.navigator&&t.navigator.update(t.viewport),THIS[t.hash].forceRedraw=!1),THIS[t.hash].animating&&!n&&(t.raiseEvent("animationfinish"),THIS[t.hash].mouseInside||beginControlsAutoHide(t)),THIS[t.hash].animating=n)}function resolveUrl(t,e){return t?t+e:e}function beginZoomingIn(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function beginZoomingOut(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=1/this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function endZooming(){THIS[this.hash].zooming=!1}function scheduleZoom(t){$.requestAnimationFrame($.delegate(t,doZoom))}function doZoom(){var t,e,n;THIS[this.hash].zooming&&this.viewport&&(t=$.now(),e=t-THIS[this.hash].lastZoomTime,n=Math.pow(THIS[this.hash].zoomFactor,e/1e3),this.viewport.zoomBy(n),this.viewport.applyConstraints(),THIS[this.hash].lastZoomTime=t,scheduleZoom(this))}function doSingleZoomIn(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function doSingleZoomOut(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function lightUp(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function onHome(){this.viewport&&this.viewport.goHome()}function onFullPage(){this.setFullPage(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function onPrevious(){var t=THIS[this.hash].sequence-1;this.navPrevNextWrap&&0>t&&(t+=this.tileSources.length),this.goToPage(t)}function onNext(){var t=THIS[this.hash].sequence+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}var THIS={},VIEWERS={};$.Viewer=function(t){var e,n=arguments,i=this;$.isPlainObject(t)||(t={id:n[0],xmlPath:n.length>1?n[1]:void 0,prefixUrl:n.length>2?n[2]:void 0,controls:n.length>3?n[3]:void 0,overlays:n.length>4?n[4]:void 0,overlayControls:n.length>5?n[5]:void 0}),t.config&&($.extend(!0,t,t.config),delete t.config),$.extend(!0,this,{id:t.id,hash:t.id,element:null,canvas:null,container:null,overlays:[],overlayControls:[],previousBody:[],customControls:[],source:null,drawer:null,drawers:[],viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},$.DEFAULT_SETTINGS,t),THIS[this.hash]={fsBoundsDelta:new $.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,sequenced:!1,sequence:0,fullPage:!1,onfullscreenchange:null},this._updateRequestId=null,$.EventHandler.call(this),this.addHandler("open-failed",function(t,e){var n=$.getString("Errors.Open-Failed",e.source,e.message);i._showMessage(n)}),$.ControlDock.call(this,t);var o;for(this.xmlPath&&(this.tileSources=[this.xmlPath]),this.tileSources&&($.isArray(this.tileSources)?(this.tileSources.length>1&&(THIS[this.hash].sequenced=!0),o=this.tileSources[0]):o=this.tileSources,this.open(o)),this.element=this.element||document.getElementById(this.id),this.canvas=$.makeNeutralElement("div"),this.keyboardCommandArea=$.makeNeutralElement("textarea"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.keyboardCommandArea.className="keyboard-command-area",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px",t.resize="none"}(this.keyboardCommandArea.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.container.insertBefore(this.keyboardCommandArea,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.keyboardCommandArea.innerTracker=new $.MouseTracker({_this:this,element:this.keyboardCommandArea,focusHandler:function(){var t=$.getElementPosition(this.element);window.scrollTo(0,t.y)},keyHandler:function(t,e,n){switch(e){case 61:return i.viewport.zoomBy(1.1),i.viewport.applyConstraints(),!1;case 45:return i.viewport.zoomBy(.9),i.viewport.applyConstraints(),!1;case 48:return i.viewport.goHome(),i.viewport.applyConstraints(),!1;case 119:case 87:case 38:return n?i.viewport.zoomBy(1.1):i.viewport.panBy(new $.Point(0,-.05)),i.viewport.applyConstraints(),!1;case 115:case 83:case 40:return n?i.viewport.zoomBy(.9):i.viewport.panBy(new $.Point(0,.05)),i.viewport.applyConstraints(),!1;case 97:case 37:return i.viewport.panBy(new $.Point(-.05,0)),i.viewport.applyConstraints(),!1;case 100:case 39:return i.viewport.panBy(new $.Point(.05,0)),i.viewport.applyConstraints(),!1;default:return!0}}}).setTracking(!0),this.innerTracker=new $.MouseTracker({element:this.canvas,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,clickHandler:$.delegate(this,onCanvasClick),dragHandler:$.delegate(this,onCanvasDrag),releaseHandler:$.delegate(this,onCanvasRelease),scrollHandler:$.delegate(this,onCanvasScroll)}).setTracking(this.mouseNavEnabled?!0:!1),this.outerTracker=new $.MouseTracker({element:this.container,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:$.delegate(this,onContainerEnter),exitHandler:$.delegate(this,onContainerExit),releaseHandler:$.delegate(this,onContainerRelease)}).setTracking(this.mouseNavEnabled?!0:!1),this.toolbar&&(this.toolbar=new $.ControlDock({element:this.toolbar})),this.bindStandardControls(),this.bindSequenceControls(),e=0;this.customControls.length>e;e++)this.addControl(this.customControls[e].id,{anchor:this.customControls[e].anchor});$.requestAnimationFrame(function(){beginControlsAutoHide(i)})},$.extend($.Viewer.prototype,$.EventHandler.prototype,$.ControlDock.prototype,{isOpen:function(){return!!this.source},openDzi:function(t){return this.open(t)},openTileSource:function(t){return this.open(t)},open:function(tileSource){var _this=this,customTileSource,readySource,$TileSource,options;return _this._hideMessage(),"string"==$.type(tileSource)&&(tileSource.match(/\s*<.*/)?tileSource=$.parseXml(tileSource):tileSource.match(/\s*[\{\[].*/)&&(tileSource=eval("("+tileSource+")"))),setTimeout(function(){if("string"==$.type(tileSource))tileSource=new $.TileSource(tileSource,function(t){openTileSource(_this,t)}),tileSource.addHandler("open-failed",function(t,e){_this.raiseEvent("open-failed",e)});else if($.isPlainObject(tileSource)||tileSource.nodeType)if($.isFunction(tileSource.getTileUrl))customTileSource=new $.TileSource(tileSource),customTileSource.getTileUrl=tileSource.getTileUrl,openTileSource(_this,customTileSource);else{if($TileSource=$.TileSource.determineType(_this,tileSource),!$TileSource)return _this.raiseEvent("open-failed",{message:"Unable to load TileSource",source:tileSource}),void 0;options=$TileSource.prototype.configure.apply(_this,[tileSource]),readySource=new $TileSource(options),openTileSource(_this,readySource)}else openTileSource(_this,tileSource)},1),this},close:function(){return null!==this._updateRequestId&&($.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.navigator&&this.navigator.close(),this.drawer&&this.drawer.clearOverlays(),this.source=null,this.drawer=null,this.viewport=this.preserveViewport?this.viewport:null,this.canvas.innerHTML="",VIEWERS[this.hash]=null,delete VIEWERS[this.hash],this.raiseEvent("close",{viewer:this}),this},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t,viewer:this}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;this.controls.length>t;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){return t?abortControlsAutoHide(this):beginControlsAutoHide(this),this.raiseEvent("controls-enabled",{enabled:t,viewer:this}),this},isFullPage:function(){return THIS[this.hash].fullPage},setFullPage:function(t){var e,n,i,o,r,s,a=document.body,l=a.style,u=document.documentElement.style,h=this.canvas.style,c=this;if(t!=this.isFullPage()){if(t){for(this.bodyOverflow=l.overflow,this.docOverflow=u.overflow,l.overflow="hidden",u.overflow="hidden",this.bodyWidth=l.width,this.bodyHeight=l.height,l.width="100%",l.height="100%",this.previousBody=[],THIS[this.hash].prevElementParent=this.element.parentNode,THIS[this.hash].prevNextSibling=this.element.nextSibling,THIS[this.hash].prevElementSize=$.getElementSize(this.element),r=a.childNodes.length,s=0;r>s;s++)this.previousBody.push(a.childNodes[0]),a.removeChild(a.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,a.appendChild(this.toolbar.element),$.addClass(this.toolbar.element,"fullpage")),$.addClass(this.element,"fullpage"),a.appendChild(this.element),$.supportsFullScreen?(THIS[this.hash].onfullscreenchange=function(){$.isFullScreen()?c.setFullPage(!0):c.setFullPage(!1)},$.requestFullScreen(document.body),document.addEventListener($.fullScreenEventName,THIS[this.hash].onfullscreenchange),this.element.style.height="100%",this.element.style.width="100%"):(this.element.style.height=$.getWindowSize().y+"px",this.element.style.width=$.getWindowSize().x+"px"),this.toolbar&&this.toolbar.element&&(this.element.style.height=$.getElementSize(this.element).y-$.getElementSize(this.toolbar.element).y+"px"),THIS[this.hash].fullPage=!0,$.delegate(this,onContainerEnter)()}else{for($.supportsFullScreen&&(document.removeEventListener($.fullScreenEventName,THIS[this.hash].onfullscreenchange),$.cancelFullScreen(document)),l.overflow=this.bodyOverflow,u.overflow=this.docOverflow,l.width=this.bodyWidth,l.height=this.bodyHeight,h.backgroundColor="",h.color="",a.removeChild(this.element),r=this.previousBody.length,s=0;r>s;s++)a.appendChild(this.previousBody.shift());$.removeClass(this.element,"fullpage"),THIS[this.hash].prevElementParent.insertBefore(this.element,THIS[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(a.removeChild(this.toolbar.element),$.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.height=THIS[this.hash].prevElementSize.y+"px",this.element.style.width=THIS[this.hash].prevElementSize.x+"px",THIS[this.hash].fullPage=!1,$.delegate(this,onContainerExit)()}if(this.raiseEvent("fullpage",{fullpage:t,viewer:this}),this.viewport){if(e=this.viewport.getBounds(),this.viewport.resize(THIS[this.hash].prevContainerSize),n=this.viewport.getBounds(),t)THIS[this.hash].fsBoundsDelta=new $.Point(n.width/e.width,n.height/e.height);else{this.viewport.update(),this.viewport.zoomBy(Math.max(THIS[this.hash].fsBoundsDelta.x,THIS[this.hash].fsBoundsDelta.y),null,!0);for(o in VIEWERS)i=VIEWERS[o],i!==this&&i!=this.navigator&&(i.open(i.source),i.navigator&&i.navigator.open(i.source))}THIS[this.hash].forceRedraw=!0,updateOnce(this)}return this}},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t,viewer:this}),this},bindSequenceControls:function(){var t=$.delegate(this,onFocus),e=$.delegate(this,onBlur),n=$.delegate(this,onNext),i=$.delegate(this,onPrevious),o=this.navImages,r=!0;return this.showSequenceControl&&THIS[this.hash].sequenced&&((this.previousButton||this.nextButton)&&(r=!1),this.previousButton=new $.Button({element:this.previousButton?$.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.PreviousPage"),srcRest:resolveUrl(this.prefixUrl,o.previous.REST),srcGroup:resolveUrl(this.prefixUrl,o.previous.GROUP),srcHover:resolveUrl(this.prefixUrl,o.previous.HOVER),srcDown:resolveUrl(this.prefixUrl,o.previous.DOWN),onRelease:i,onFocus:t,onBlur:e}),this.nextButton=new $.Button({element:this.nextButton?$.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.NextPage"),srcRest:resolveUrl(this.prefixUrl,o.next.REST),srcGroup:resolveUrl(this.prefixUrl,o.next.GROUP),srcHover:resolveUrl(this.prefixUrl,o.next.HOVER),srcDown:resolveUrl(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:t,onBlur:e}),this.navPrevNextWrap||this.previousButton.disable(),r&&(this.paging=new $.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:$.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:$.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=$.delegate(this,beginZoomingIn),e=$.delegate(this,endZooming),n=$.delegate(this,doSingleZoomIn),i=$.delegate(this,beginZoomingOut),o=$.delegate(this,doSingleZoomOut),r=$.delegate(this,onHome),s=$.delegate(this,onFullPage),a=$.delegate(this,onFocus),l=$.delegate(this,onBlur),u=this.navImages,h=[],c=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton)&&(c=!1),h.push(this.zoomInButton=new $.Button({element:this.zoomInButton?$.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomIn"),srcRest:resolveUrl(this.prefixUrl,u.zoomIn.REST),srcGroup:resolveUrl(this.prefixUrl,u.zoomIn.GROUP),srcHover:resolveUrl(this.prefixUrl,u.zoomIn.HOVER),srcDown:resolveUrl(this.prefixUrl,u.zoomIn.DOWN),onPress:t,onRelease:e,onClick:n,onEnter:t,onExit:e,onFocus:a,onBlur:l})),h.push(this.zoomOutButton=new $.Button({element:this.zoomOutButton?$.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomOut"),srcRest:resolveUrl(this.prefixUrl,u.zoomOut.REST),srcGroup:resolveUrl(this.prefixUrl,u.zoomOut.GROUP),srcHover:resolveUrl(this.prefixUrl,u.zoomOut.HOVER),srcDown:resolveUrl(this.prefixUrl,u.zoomOut.DOWN),onPress:i,onRelease:e,onClick:o,onEnter:i,onExit:e,onFocus:a,onBlur:l})),h.push(this.homeButton=new $.Button({element:this.homeButton?$.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.Home"),srcRest:resolveUrl(this.prefixUrl,u.home.REST),srcGroup:resolveUrl(this.prefixUrl,u.home.GROUP),srcHover:resolveUrl(this.prefixUrl,u.home.HOVER),srcDown:resolveUrl(this.prefixUrl,u.home.DOWN),onRelease:r,onFocus:a,onBlur:l})),h.push(this.fullPageButton=new $.Button({element:this.fullPageButton?$.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.FullPage"),srcRest:resolveUrl(this.prefixUrl,u.fullpage.REST),srcGroup:resolveUrl(this.prefixUrl,u.fullpage.GROUP),srcHover:resolveUrl(this.prefixUrl,u.fullpage.HOVER),srcDown:resolveUrl(this.prefixUrl,u.fullpage.DOWN),onRelease:s,onFocus:a,onBlur:l})),c&&(this.buttons=new $.ButtonGroup({buttons:h,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",$.delegate(this,lightUp)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}))),this},goToPage:function(t){return this.raiseEvent("page",{page:t,viewer:this}),this.tileSources.length>t&&(THIS[this.hash].sequence=t,this.nextButton&&(this.tileSources.length-1===t?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(t>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable()),this.open(this.tileSources[t])),$.isFunction(this.onPageChange)&&this.onPageChange({page:t,viewer:this}),this.referenceStrip&&this.referenceStrip.setFocus(t),this},_showMessage:function(t){this._hideMessage();var e=$.makeNeutralElement("div");e.appendChild(document.createTextNode(t)),this.messageDiv=$.makeCenteredNode(e),$.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)}})}(OpenSeadragon),function(t){function e(e,n){var i,o,r;this.drag?this.drag=!1:this.viewer.viewport&&(o=this.viewport.deltaPointsFromPixels(n),r=this.viewer.viewport.getBounds().getSize(),i=new t.Rect(o.x-r.x/2,o.y-r.y/2,r.x,r.y),this.viewer.source.aspectRatio>this.viewer.viewport.getAspectRatio()?i.y=i.y-(this.viewerSizeInPoints.y-1/this.viewer.source.aspectRatio)/2:i.x=i.x-(this.viewerSizeInPoints.x-1)/2,this.viewer.viewport.fitBounds(i),this.viewer.viewport.applyConstraints())}function n(t,e,n){this.viewer.viewport&&(this.drag=!0,this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(n)))}function i(t,e,n){n&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}t.Navigator=function(o){var r,s=o.viewer,a=t.getElementSize(s.element);o.id?(this.element=document.getElementById(o.id),o.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(o.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),o.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:!0}),this.element.id=o.id,this.element.className+=" navigator",o=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},o,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),o.minPixelRatio=this.minPixelRatio=s.minPixelRatio,this.viewerSizeInPoints=s.viewport.deltaPointsFromPixels(a),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),function(t,e){t.margin="0px",t.border=e+"px solid #555",t.padding="0px",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid #900",t.margin="0px",t.padding="0px",t.background="transparent",t["float"]="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.element.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,i),scrollHandler:function(){return!1}}).setTracking(!0),s.addControl(this.element,o.controlOptions),o.width&&o.height?(this.element.style.width=o.width+"px",this.element.style.height=o.height+"px"):(this.element.style.width=a.x*o.sizeRatio+"px",this.element.style.height=a.y*o.sizeRatio+"px"),t.Viewer.apply(this,[o]),this.element.getElementsByTagName("form")[0].appendChild(this.displayRegion),r=this.element.getElementsByTagName("textarea")[0],r&&r.parentNode.removeChild(r)},t.extend(t.Navigator.prototype,t.EventHandler.prototype,t.Viewer.prototype,{update:function(t){var e,n,i;t&&this.viewport&&(e=t.getBounds(!0),n=this.viewport.pixelFromPoint(e.getTopLeft()),i=this.viewport.pixelFromPoint(e.getBottomRight()).minus(this.totalBorderWidths),function(t){t.top=n.y+"px",t.left=n.x+"px";var e=Math.abs(n.x-i.x),o=Math.abs(n.y-i.y);t.width=Math.max(e,0)+"px",t.height=Math.max(o,0)+"px"}(this.displayRegion.style))},open:function(e){var n=this.viewer.viewport.containerSize.times(this.sizeRatio);return this.minPixelRatio=e.tileSize>n.x||e.tileSize>n.y?Math.min(n.x,n.y)/e.tileSize:this.viewer.minPixelRatio,t.Viewer.prototype.open.apply(this,[e])}})}(OpenSeadragon),function(t){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).","Open-Failed":"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page"}};t.extend(t,{getString:function(n){var i,o=n.split("."),r=null,s=arguments,a=e;for(i=0;o.length-1>i;i++)a=a[o[i]]||{};return r=a[o[i]],"string"!=typeof r&&(t.console.debug("Untranslated source string:",n),r=""),r.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/),10)+1;return s.length>e?s[e]:""})},setString:function(t,n){var i,o=t.split("."),r=e;for(i=0;o.length-1>i;i++)r[o[i]]||(r[o[i]]={}),r=r[o[i]];r[o[i]]=n}})}(OpenSeadragon),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},toString:function(){return"("+Math.round(this.x)+","+Math.round(this.y)+")"}}}(OpenSeadragon),function($){function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr)throw Error($.getString("Errors.Security"));if(200!==xhr.status&&0!==xhr.status)throw status=xhr.status,statusText=404==status?"Not Found":xhr.statusText,Error($.getString("Errors.Status",status,statusText));if(responseText.match(/\s*<.*/))try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText)}catch(e){data=xhr.responseText}else data=responseText.match(/\s*[\{\[].*/)?eval("("+responseText+")"):responseText;return data}$.TileSource=function(t){var e,n,i=null,o=arguments;for(e=$.isPlainObject(t)?t:{width:o[0],height:o[1],tileSize:o[2],tileOverlap:o[3],minLevel:o[4],maxLevel:o[5]},$.EventHandler.call(this),$.extend(!0,this,e),n=0;arguments.length>n;n++)if($.isFunction(arguments[n])){i=arguments[n],this.addHandler("ready",function(t,e){i(e)});break}"string"==$.type(arguments[0])?(this.aspectRatio=1,this.dimensions=new $.Point(10,10),this.tileSize=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(arguments[0])):(this.ready=!0,this.aspectRatio=e.width&&e.height?e.width/e.height:1,this.dimensions=new $.Point(e.width,e.height),this.tileSize=e.tileSize?e.tileSize:0,this.tileOverlap=e.tileOverlap?e.tileOverlap:0,this.minLevel=e.minLevel?e.minLevel:0,this.maxLevel=void 0!==e.maxLevel&&null!==e.maxLevel?e.maxLevel:e.width&&e.height?Math.ceil(Math.log(Math.max(e.width,e.height))/Math.log(2)):0,i&&$.isFunction(i)&&i(this))},$.TileSource.prototype={getLevelScale:function(t){var e,n={};for(e=0;this.maxLevel>=e;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(t){var e=this.getLevelScale(t),n=Math.ceil(e*this.dimensions.x/this.tileSize),i=Math.ceil(e*this.dimensions.y/this.tileSize);return new $.Point(n,i)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),n=1/e.x,i=1/e.y;return new $.Point(n,i)},getClosestLevel:function(t){var e,n,i=Math.floor(Math.max(t.x,t.y)/this.tileSize);for(e=this.minLevel;this.maxLevel>e&&(n=this.getNumTiles(e),!(Math.max(n.x,n.y)+1>=i));e++);return Math.max(0,e-1)},getTileAtPoint:function(t,e){var n=e.times(this.dimensions.x).times(this.getLevelScale(t)),i=Math.floor(n.x/this.tileSize),o=Math.floor(n.y/this.tileSize);return new $.Point(i,o)},getTileBounds:function(t,e,n){var i=this.dimensions.times(this.getLevelScale(t)),o=0===e?0:this.tileSize*e-this.tileOverlap,r=0===n?0:this.tileSize*n-this.tileOverlap,s=this.tileSize+(0===e?1:2)*this.tileOverlap,a=this.tileSize+(0===n?1:2)*this.tileOverlap,l=1/i.x;return s=Math.min(s,i.x-o),a=Math.min(a,i.y-r),new $.Rect(o*l,r*l,s*l,a*l)},getImageInfo:function(t){var e,n,i,o,r,s,a,l=this;t&&(r=t.split("/"),s=r[r.length-1],a=s.lastIndexOf("."),a>-1&&(r[r.length-1]=s.slice(0,a))),n=function(e){var n=$.TileSource.determineType(l,e,t);return n?(o=n.prototype.configure.apply(l,[e,t]),i=new n(o),l.ready=!0,l.raiseEvent("ready",i),void 0):(l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t}),void 0)},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),$.jsonp({url:t,async:!1,callbackName:e,callback:n})):$.makeAjaxRequest(t,function(t){var e=processResponse(t);n(e)},function(e){l.raiseEvent("open-failed",{message:"HTTP "+e.status+" attempting to load TileSource",source:t})})},supports:function(){return!1},configure:function(){throw Error("Method not implemented.")},getTileUrl:function(){throw Error("Method not implemented.")},tileExists:function(t,e,n){var i=this.getNumTiles(t);return t>=this.minLevel&&this.maxLevel>=t&&e>=0&&n>=0&&i.x>e&&i.y>n}},$.extend(!0,$.TileSource.prototype,$.EventHandler.prototype),$.TileSource.determineType=function(t,e,n){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[i])&&$.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(t,e,n))return OpenSeadragon[i];$.console.error("No TileSource was able to open %s %s",n,e)}}(OpenSeadragon),function(t){function e(e,i){if(!i||!i.documentElement)throw Error(t.getString("Errors.Xml"));var o,r,s,a,l,u=i.documentElement,h=u.tagName,c=null,d=[];if("Image"==h)try{if(a=u.getElementsByTagName("Size")[0],c={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!t.imageFormatSupported(c.Image.Format))throw Error(t.getString("Errors.ImageFormat",c.Image.Format.toUpperCase()));for(o=u.getElementsByTagName("DisplayRect"),l=0;o.length>l;l++)r=o[l],s=r.getElementsByTagName("Rect")[0],d.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(r.getAttribute("MinLevel"),10),MaxLevel:parseInt(r.getAttribute("MaxLevel"),10)}});return d.length&&(c.Image.DisplayRect=d),n(e,c)}catch(p){throw p instanceof Error?p:Error(t.getString("Errors.Dzi"))}else{if("Collection"==h)throw Error(t.getString("Errors.Dzc"));if("Error"==h)return t._processDZIError(u)}throw Error(t.getString("Errors.Dzi"))}function n(e,n){var i,o,r=n.Image,s=r.Url,a=r.Format,l=r.Size,u=r.DisplayRect||[],h=parseInt(l.Width,10),c=parseInt(l.Height,10),d=parseInt(r.TileSize,10),p=parseInt(r.Overlap,10),f=[];for(o=0;u.length>o;o++)i=u[o].Rect,f.push(new t.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return t.extend(!0,{width:h,height:c,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:f},n)}t.DziTileSource=function(e){var n,i,o,r;if(r=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=r.tilesUrl,this.fileFormat=r.fileFormat,this.displayRects=r.displayRects,this.displayRects)for(n=this.displayRects.length-1;n>=0;n--)for(i=this.displayRects[n],o=i.minLevel;i.maxLevel>=o;o++)this._levelRects[o]||(this._levelRects[o]=[]),this._levelRects[o].push(i);t.TileSource.apply(this,[r])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t){var e;return t.Image?e=t.Image.xmlns:t.documentElement&&"Image"==t.documentElement.tagName&&(e=t.documentElement.namespaceURI),"http://schemas.microsoft.com/deepzoom/2008"==e||"http://schemas.microsoft.com/deepzoom/2009"==e},configure:function(i,o){var r;return r=t.isPlainObject(i)?n(this,i):e(this,i),o&&!r.tilesUrl&&(r.tilesUrl=o.replace(/([^\/]+)\.(dzi|xml|js)$/,"$1_files/")),r},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat].join("")},tileExists:function(t,e,n){var i,o,r,s,a,l,u,h=this._levelRects[t];if(!h||!h.length)return!0;for(u=h.length-1;u>=0;u--)if(i=h[u],!(i.minLevel>t||t>i.maxLevel)&&(o=this.getLevelScale(t),r=i.x*o,s=i.y*o,a=r+i.width*o,l=s+i.height*o,r=Math.floor(r/this.tileSize),s=Math.floor(s/this.tileSize),a=Math.ceil(a/this.tileSize),l=Math.ceil(l/this.tileSize),e>=r&&a>e&&n>=s&&l>n))return!0;return!1}})}(OpenSeadragon),function(t){function e(e,o){if(!o||!o.documentElement)throw Error(t.getString("Errors.Xml"));var r=o.documentElement,s=r.tagName,a=null;if("info"==s)try{return a={ns:r.namespaceURI},n(r,a),i(e,a)}catch(l){throw l instanceof Error?l:Error(t.getString("Errors.IIIF"))}throw Error(t.getString("Errors.IIIF"))}function n(e,i,o){var r,s;if(3==e.nodeType&&o)s=e.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),i[o]?(t.isArray(i[o])||(i[o]=[i[o]]),i[o].push(s)):i[o]=s;else if(1==e.nodeType)for(r=0;e.childNodes.length>r;r++)n(e.childNodes[r],i,e.nodeName)}function i(t,e){return e.image_host&&(e.tilesUrl=e.image_host),e}t.IIIFTileSource=function(e){if(t.extend(!0,this,e),!(this.height&&this.width&&this.identifier&&this.tilesUrl))throw Error("IIIF required parameters not provided.");if(e.tileSize=this.tile_width,!e.maxLevel){var n=-1,i=this.scale_factors||this.scale_factor;if(i instanceof Array)for(var o=0;i.length>o;o++){var r=Number(i[o]);!isNaN(r)&&r>n&&(n=r)}e.maxLevel=0>n?Number(Math.ceil(Math.log(Math.max(this.width,this.height),2))):n}t.TileSource.apply(this,[e])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.ns&&"http://library.stanford.edu/iiif/image-api/ns/"==t.ns||t.profile&&("http://library.stanford.edu/iiif/image-api/compliance.html#level1"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html#level2"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html#level3"==t.profile||"http://library.stanford.edu/iiif/image-api/compliance.html"==t.profile)||t.documentElement&&"info"==t.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==t.documentElement.namespaceURI
},configure:function(n,o){var r,s,a;return s=t.isPlainObject(n)?i(this,n):e(this,n),o&&!s.tilesUrl&&(r=o.split("/"),r.pop(),r=r.join("/"),"http"!==o.substring(0,4)&&(a=location.protocol+"//"+location.host,r=a+r),s.tilesUrl=r.replace(n.identifier,"")),s},getTileUrl:function(t,e,n){var i,o,r,s,a,l="0",u="native.jpg",h=Math.pow(.5,this.maxLevel-t),c="pct:"+100*h,d=Math.ceil(this.width*h),p=Math.ceil(this.height*h),f=Math.ceil(this.tileSize/h),g=Math.ceil(this.tileSize/h);return this.tile_width>d&&this.tile_height>p?i="full":(o=e*f,r=n*g,s=Math.min(f,this.width-o),a=Math.min(g,this.height-r),i=[o,r,s,a].join(",")),[this.tilesUrl.replace(/\/$/,""),encodeURIComponent(this.identifier),i,c,l,u].join("/")}})}(OpenSeadragon),function(t){t.OsmTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},n.width&&n.height||(n.width=65572864,n.height=65572864),n.tileSize||(n.tileSize=256,n.tileOverlap=0),n.tilesUrl||(n.tilesUrl="http://tile.openstreetmap.org/"),n.minLevel=8,t.TileSource.apply(this,[n])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"openstreetmaps"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),function(t){t.TmsTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var i,o=256*Math.ceil(n.width/256),r=256*Math.ceil(n.height/256);i=o>r?o/256:r/256,n.maxLevel=Math.ceil(Math.log(i)/Math.log(2))-1,n.tileSize=256,n.width=o,n.height=r,t.TileSource.apply(this,[n])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"tiledmapservice"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){var i=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(i-n)+".png"}})}(OpenSeadragon),function(t){function e(t){var e,n,i=[];for(n=0;t.length>n;n++)e=t[n],e.height&&e.width&&e.url&&(e.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||e.mimetype&&e.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))&&i.push({url:e.url,width:Number(e.width),height:Number(e.height)});return i.sort(function(t,e){return t.height-e.height})}function n(e,n){if(!n||!n.documentElement)throw Error(t.getString("Errors.Xml"));var o,r,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),r=0;u.length>r;r++)o=u[r],l.levels.push({url:o.getAttribute("url"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)});return i(e,l)}catch(h){throw h instanceof Error?h:Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw Error("Error: "+n)}throw Error("Unknown element "+a)}function i(t,e){return e.levels}t.LegacyTileSource=function(n){var i,o,r;t.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=e(i.levels),o=i.levels[i.levels.length-1].width,r=i.levels[i.levels.length-1].height,t.extend(!0,i,{width:o,height:r,tileSize:Math.max(r,o),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),t.TileSource.apply(this,[i]),this.levels=i.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e){var o;return o=t.isPlainObject(e)?i(this,e):n(this,e)},getLevelScale:function(t){var e=0/0;return t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){var n=this.getLevelScale(e);return n?new t.Point(1,1):new t.Point(0,0)},getTileAtPoint:function(){return new t.Point(0,0)},getTileUrl:function(t){var e=null;return t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].url),e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e){var n;n=t.isPlainObject(e)?e:{tileSize:arguments[0],tileSources:arguments[1],rows:arguments[2],layout:arguments[3]},n.layout||(n.layout="horizontal");var i=0,o=1,r=Math.ceil(n.tileSources.length/n.rows),s=r>=n.rows?r:n.rows;for("horizontal"==n.layout?(n.width=n.tileSize*r,n.height=n.tileSize*n.rows):(n.height=n.tileSize*r,n.width=n.tileSize*n.rows),n.tileOverlap=-n.tileMargin,n.tilesPerRow=r;n.tileSize*s>o;)o=2*o,i++;n.minLevel=i,t.TileSource.apply(this,[n])},t.extend(t.TileSourceCollection.prototype,t.TileSource.prototype,{getTileBounds:function(e,n,i){var o=this.dimensions.times(this.getLevelScale(e)),r=this.tileSize*n-this.tileOverlap,s=this.tileSize*i-this.tileOverlap,a=this.tileSize+1*this.tileOverlap,l=this.tileSize+1*this.tileOverlap,u=1/o.x;return a=Math.min(a,o.x-r),l=Math.min(l,o.y-s),new t.Rect(r*u,s*u,a*u,l*u)},configure:function(){},getTileUrl:function(){return null}})}(OpenSeadragon),function(t){function e(e){t.requestAnimationFrame(function(){n(e)})}function n(n){var i,o,r;n.shouldFade&&(i=t.now(),o=i-n.fadeBeginTime,r=1-o/n.fadeLength,r=Math.min(1,r),r=Math.max(0,r),n.imgGroup&&t.setElementOpacity(n.imgGroup,r,!0),r>0&&e(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout(function(){e(n)},n.fadeDelay)}function o(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function r(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(o(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function s(e,n){e.element.disabled||(t.ButtonState.HOVER>=n&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),t.ButtonState.GROUP>=n&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),t.ButtonState.REST>=n&&e.currentState==t.ButtonState.GROUP&&(i(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var n=this;t.EventHandler.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("button"),this.element.href=this.element.href||"#",e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&3>t.Browser.version&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="")),this.addHandler("onPress",this.onPress),this.addHandler("onRelease",this.onRelease),this.addHandler("onClick",this.onClick),this.addHandler("onEnter",this.onEnter),this.addHandler("onExit",this.onExit),this.addHandler("onFocus",this.onFocus),this.addHandler("onBlur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e,i,o,s){o?(r(n,t.ButtonState.DOWN),n.raiseEvent("onEnter",n)):s||r(n,t.ButtonState.HOVER)},focusHandler:function(t,e,i,o){this.enterHandler(t,e,i,o),n.raiseEvent("onFocus",n)},exitHandler:function(e,i,o){s(n,t.ButtonState.GROUP),o&&n.raiseEvent("onExit",n)},blurHandler:function(t,e,i,o){this.exitHandler(t,e,i,o),n.raiseEvent("onBlur",n)},pressHandler:function(){r(n,t.ButtonState.DOWN),n.raiseEvent("onPress",n)},releaseHandler:function(e,i,o,a){o&&a?(s(n,t.ButtonState.HOVER),n.raiseEvent("onRelease",n)):o?s(n,t.ButtonState.GROUP):r(n,t.ButtonState.HOVER)},clickHandler:function(t,e,i){i&&n.raiseEvent("onClick",n)},keyHandler:function(t,e){return 13===e?(n.raiseEvent("onClick",n),n.raiseEvent("onRelease",n),!1):!0}}).setTracking(!0),s(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventHandler.prototype,{notifyGroupEnter:function(){r(this,t.ButtonState.GROUP)},notifyGroupExit:function(){s(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,i=this.buttons.concat([]),o=this;if(this.element=e.element||t.makeNeutralElement("fieldgroup"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;i.length>n;n++)this.element.appendChild(i[n].element);this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var t;for(t=0;o.buttons.length>t;t++)o.buttons[t].notifyGroupEnter()},exitHandler:function(){var t,e=arguments.length>2?arguments[2]:null;if(!e)for(t=0;o.buttons.length>t;t++)o.buttons[t].notifyGroupExit()},releaseHandler:function(){var t,e=arguments.length>3?arguments[3]:null;if(!e)for(t=0;o.buttons.length>t;t++)o.buttons[t].notifyGroupExit()}}).setTracking(!0)},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler()},emulateExit:function(){this.tracker.exitHandler()}}}(OpenSeadragon),function(t){t.Rect=function(t,e,n,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0},t.Rect.prototype={getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height)},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},toString:function(){return"["+Math.round(100*this.x)+","+Math.round(100*this.y)+","+Math.round(100*this.width)+"x"+Math.round(100*this.height)+"]"}}}(OpenSeadragon),function(t){function e(e,n,o){var r=Number(this.element.style.marginLeft.replace("px","")),s=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-o.x>0?r>-(a-u.x)&&(this.element.style.marginLeft=r+2*o.x+"px",i(this,u.x,r+2*o.x)):0>-o.x&&0>r&&(this.element.style.marginLeft=r+2*o.x+"px",i(this,u.x,r+2*o.x)):-o.y>0?s>-(l-u.y)&&(this.element.style.marginTop=s+2*o.y+"px",i(this,u.y,s+2*o.y)):0>-o.y&&0>s&&(this.element.style.marginTop=s+2*o.y+"px",i(this,u.y,s+2*o.y))),!1}function n(e,n,o){var r=Number(this.element.style.marginLeft.replace("px","")),s=Number(this.element.style.marginTop.replace("px","")),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?o>0?r>-(a-u.x)&&(this.element.style.marginLeft=r-60*o+"px",i(this,u.x,r-60*o)):0>o&&0>r&&(this.element.style.marginLeft=r-60*o+"px",i(this,u.x,r-60*o)):0>o?s>u.y-l&&(this.element.style.marginTop=s+60*o+"px",i(this,u.y,s+60*o)):o>0&&0>s&&(this.element.style.marginTop=s+60*o+"px",i(this,u.y,s+60*o))),!1}function i(e,n,i){var o,r,s,a,l,u,h;for(o="horizontal"==e.scroll?e.panelWidth:e.panelHeight,r=Math.ceil(n/o)+5,s=Math.ceil((Math.abs(i)+n)/o)+1,r=s-r,r=0>r?0:r,u=r;s>u&&e.panels.length>u;u++)h=e.panels[u],h.activePanel||(a=new t.Viewer({id:h.id,tileSources:[e.viewer.tileSources[u]],element:h,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=t.makeNeutralElement("textarea"),a.displayRegion.id=h.id+"-displayregion",a.displayRegion.className="displayregion",l=a.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l.float="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=e.panelWidth-4+"px",l.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new t.MouseTracker({element:a.displayRegion}),h.getElementsByTagName("form")[0].appendChild(a.displayRegion),h.activePanel=!0)}function o(t){return"horizontal"==this.scroll?t.element.style.marginBottom="0px":t.element.style.marginLeft="0px",!1}function r(e){return"horizontal"==this.scroll?e.element.style.marginBottom="-"+t.getElementSize(e.element).y/2+"px":e.element.style.marginLeft="-"+t.getElementSize(e.element).x/2+"px",!1}function s(t,e){switch(e){case 61:return n.call(this,this.tracker,null,1,null),!1;case 45:return n.call(this,this.tracker,null,-1,null),!1;case 48:case 119:case 87:case 38:return n.call(this,this.tracker,null,1,null),!1;case 115:case 83:case 40:return n.call(this,this.tracker,null,-1,null),!1;case 97:case 37:return n.call(this,this.tracker,null,-1,null),!1;case 100:case 39:return n.call(this,this.tracker,null,1,null),!1;default:return!0}}var a={};t.ReferenceStrip=function(l){var u,h,c,d=this,p=l.viewer,f=t.getElementSize(p.element);for(l.id||(l.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),a[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",t.setElementOpacity(this.element,.8),this.viewer=p,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,n),enterHandler:t.delegate(this,o),exitHandler:t.delegate(this,r),keyHandler:t.delegate(this,s)}).setTracking(!0),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=f.x*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=f.y*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=f.x*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],c=0;p.tileSources.length>c;c++)u=t.makeNeutralElement("div"),u.id=this.element.id+"-"+c,u.style.width=d.panelWidth+"px",u.style.height=d.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",u.innerTracker=new t.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.dragging=t.now()},releaseHandler:function(e,n,i,o){var r=e.element.id,s=Number(r.split("-")[2]),a=t.now();i&&o&&e.dragging&&a-e.dragging<e.clickTimeThreshold&&(e.dragging=null,p.goToPage(s))}}).setTracking(!0),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);i(this,"vertical"==this.scroll?f.y:f.y,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventHandler.prototype,t.Viewer.prototype,{setFocus:function(e){var n,r=t.getElement(this.element.id+"-"+e),s=t.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),h=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==r&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=r,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3),n>u+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",i(this,s.x,-n)):u>n&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",i(this,s.x,-n))):(n=Number(e)*(this.panelHeight+3),n>h+s.y-this.panelHeight?(n=Math.min(n,l-s.y),this.element.style.marginTop=-n+"px",i(this,s.y,-n)):h>n&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",i(this,s.y,-n))),this.currentPage=e,t.getElement(r.id+"-displayregion").focus(),o.call(this,this.innerTracker))},update:function(){return a[this.id].animating?(t.console.log("image reference strip update"),!0):!1}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,n,i,o,r,s){t.Rect.apply(this,[e,n,i,o]),this.minLevel=r,this.maxLevel=s},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var n=arguments;"object"!=typeof e&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:0,time:t.now()},this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time}},t.Spring.prototype={resetTo:function(t){this.target.value=t,this.target.time=this.current.time,this.start.value=this.target.value,this.start.time=this.target.time},springTo:function(t){this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime},shiftBy:function(t){this.start.value+=t,this.target.value+=t},update:function(){this.current.time=t.now(),this.current.value=this.current.time>=this.target.time?this.target.value:this.start.value+(this.target.value-this.start.value)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time))}}}(OpenSeadragon),function(t){var e={};t.Tile=function(t,e,n,i,o,r){this.level=t,this.x=e,this.y=n,this.bounds=i,this.exists=o,this.url=r,this.loaded=!1,this.loading=!1,this.element=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(e){return this.loaded&&this.image?(this.element||(this.element=t.makeNeutralElement("img"),this.element.src=this.url,this.element.style.msInterpolationMode="nearest-neighbor",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",t.setElementOpacity(this.element,this.opacity),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this),void 0)},drawCanvas:function(n){var i,o,r=this.position,s=this.size;return this.loaded&&(this.image||e[this.url])?(n.globalAlpha=this.opacity,1==n.globalAlpha&&this.url.match(".png")&&n.clearRect(r.x+1,r.y+1,s.x-2,s.y-2),e[this.url]||(o=document.createElement("canvas"),o.width=this.image.width,o.height=this.image.height,i=o.getContext("2d"),i.drawImage(this.image,0,0),e[this.url]=i,this.image=null),i=e[this.url],n.drawImage(i.canvas,0,0,i.canvas.width,i.canvas.height,r.x,r.y,s.x,s.y),void 0):(t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this),void 0)},unload:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),e[this.url]&&delete e[this.url],this.element=null,this.image=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(t){t.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},t.Overlay=function(e,n,i){var o;o=t.isPlainObject(e)?e:{element:e,location:n,placement:i},this.element=o.element,this.scales=o.location instanceof t.Rect,this.bounds=new t.Rect(o.location.x,o.location.y,o.location.width,o.location.height),this.position=new t.Point(o.location.x,o.location.y),this.size=new t.Point(o.location.width,o.location.height),this.style=o.element.style,this.placement=o.location instanceof t.Point?o.placement:t.OverlayPlacement.TOP_LEFT,this.onDraw=o.onDraw},t.Overlay.prototype={adjust:function(e,n){switch(this.placement){case t.OverlayPlacement.TOP_LEFT:break;case t.OverlayPlacement.TOP:e.x-=n.x/2;break;case t.OverlayPlacement.TOP_RIGHT:e.x-=n.x;break;case t.OverlayPlacement.RIGHT:e.x-=n.x,e.y-=n.y/2;break;case t.OverlayPlacement.BOTTOM_RIGHT:e.x-=n.x,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM:e.x-=n.x/2,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM_LEFT:e.y-=n.y;break;case t.OverlayPlacement.LEFT:e.y-=n.y/2;break;default:case t.OverlayPlacement.CENTER:e.x-=n.x/2,e.y-=n.y/2}},destroy:function(){var t=this.element,e=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(e.display="none",document.body.appendChild(t))),e.top="",e.left="",e.position="",this.scales&&(e.width="",e.height="")},drawHTML:function(e){var n,i,o=this.element,r=this.style,s=this.scales;o.parentNode!=e&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,e.appendChild(o)),s||(this.size=t.getElementSize(o)),n=this.position,i=this.size,this.adjust(n,i),n=n.apply(Math.floor),i=i.apply(Math.ceil),this.onDraw?this.onDraw(n,i,o):(r.left=n.x+"px",r.top=n.y+"px",r.position="absolute",r.display="block",s&&(r.width=i.x+"px",r.height=i.y+"px"))},update:function(e,n){this.scales=e instanceof t.Rect,this.bounds=new t.Rect(e.x,e.y,e.width,e.height),this.placement=e instanceof t.Point?n:t.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),function(t){function e(e,n){var i=null,o=n.height&&n.width?new t.Rect(n.x||n.px,n.y||n.py,n.width,n.height):new t.Point(n.x||n.px,n.y||n.py),r=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());return i=t.getElement(n.id),i||(i=document.createElement("a"),i.href="#/overlay/"+r),i.id=r,t.addClass(i,n.className?n.className:"openseadragon-overlay"),void 0!==n.px&&(o=e.viewport.imageToViewportRectangle(o)),n.placement?new t.Overlay({element:i,location:e.viewport.pointFromPixel(o),placement:t.OverlayPlacement[n.placement.toUpperCase()],onDraw:n.onDraw}):new t.Overlay({element:i,location:o,onDraw:n.onDraw})}function n(e){e.updateAgain=!1,e.viewer&&e.viewer.raiseEvent("update-viewport",{viewer:e.viewer});for(var n,o,r,a,l,u,h,d,p=null,f=!1,g=t.now(),m=e.viewport.getContainerSize(),v=e.viewport.getBounds(!0),b=v.getTopLeft(),x=v.getBottomRight(),S=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(0),!0).x,_=Math.max(e.source.minLevel,Math.floor(Math.log(e.minZoomImageRatio)/Math.log(2))),T=Math.min(Math.abs(e.source.maxLevel),Math.abs(Math.floor(Math.log(S/e.minPixelRatio)/Math.log(2))));e.lastDrawn.length>0;)n=e.lastDrawn.pop(),n.beingDrawn=!1;if(e.canvas.innerHTML="",k&&((e.canvas.width!=m.x||e.canvas.height!=m.y)&&(e.canvas.width=m.x,e.canvas.height=m.y),e.context.clearRect(0,0,m.x,m.y)),!(!e.wrapHorizontal&&(0>x.x||b.x>1)||!e.wrapVertical&&(0>x.y||b.y>e.normHeight))){e.wrapHorizontal||(b.x=Math.max(b.x,0),x.x=Math.min(x.x,1)),e.wrapVertical||(b.y=Math.max(b.y,0),x.y=Math.min(x.y,e.normHeight)),_=Math.min(_,T);var E;for(o=T;o>=_;o--){if(E=!1,r=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(o),!0).x,!f&&r>=e.minPixelRatio||o==_)E=!0,f=!0;else if(!f)continue;if(a=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(o),!1).x,l=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(Math.max(e.source.getClosestLevel(e.viewport.containerSize)-1,0)),!1).x,u=e.immediateRender?1:l,h=Math.min(1,(r-.5)/.5),d=u/Math.abs(u-a),p=i(e,f,E,o,h,d,b,x,g,p),c(e.coverage,o))break}w(e,e.lastDrawn),y(e.viewport,e.overlays,e.container),p&&(s(e,p,g),e.updateAgain=!0)}}function i(t,e,n,i,r,s,a,l,u,h){var c,d,p,g,m,v=t.viewport.pixelFromPoint(t.viewport.getCenter());for(t.viewer&&t.viewer.raiseEvent("update-level",{viewer:t.viewer,havedrawn:e,level:i,opacity:r,visibility:s,topleft:a,bottomright:l,currenttime:u,best:h}),p=t.source.getTileAtPoint(i,a),g=t.source.getTileAtPoint(i,l),m=t.source.getNumTiles(i),f(t.coverage,i),t.wrapHorizontal||(g.x=Math.min(g.x,m.x-1)),t.wrapVertical||(g.y=Math.min(g.y,m.y-1)),c=p.x;g.x>=c;c++)for(d=p.y;g.y>=d;d++)h=o(t,n,e,c,d,i,r,s,v,m,u,h);return h}function o(t,e,n,i,o,s,a,h,c,f,g,v){var y=r(i,o,s,t.source,t.tilesMatrix,g,f,t.normHeight),b=e;if(t.viewer&&t.viewer.raiseEvent("update-tile",{viewer:t.viewer,tile:y}),p(t.coverage,s,i,o,!1),!y.exists)return v;if(n&&!b&&(d(t.coverage,s,i,o)?p(t.coverage,s,i,o,!0):b=!0),!b)return v;if(l(y,t.source.tileOverlap,t.viewport,c,h),y.loaded){var w=u(t,y,i,o,s,a,g);w&&(t.updateAgain=!0)}else y.loading||(v=m(v,y));return v}function r(e,n,i,o,r,s,a,l){var u,h,c,d,p,f;return r[i]||(r[i]={}),r[i][e]||(r[i][e]={}),r[i][e][n]||(u=(a.x+e%a.x)%a.x,h=(a.y+n%a.y)%a.y,c=o.getTileBounds(i,u,h),d=o.tileExists(i,u,h),p=o.getTileUrl(i,u,h),c.x+=1*(e-u)/a.x,c.y+=l*(n-h)/a.y,r[i][e][n]=new t.Tile(i,e,n,c,d,p)),f=r[i][e][n],f.lastTouchTime=s,f}function s(t,e,n){t.viewport.collectionMode?(t.midUpdate=!1,a(t,e,n)):e.loading=t.loadImage(e.url,function(i){a(t,e,n,i)})}function a(e,n,i,o){var r,s,a,l,u,h,c,d,p,f;if(n.loading=!1,e.midUpdate)return t.console.warn("Tile load callback in middle of drawing routine."),void 0;if(o||e.viewport.collectionMode){if(e.lastResetTime>i)return t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void 0}else if(t.console.log("Tile %s failed to load: %s",n,n.url),!e.debugMode)return n.exists=!1,void 0;if(n.loaded=!0,n.image=o,r=e.tilesLoaded.length,e.tilesLoaded.length>=e.maxImageCacheCount){for(s=Math.ceil(Math.log(e.source.tileSize)/Math.log(2)),a=null,h=-1,f=e.tilesLoaded.length-1;f>=0;f--)c=e.tilesLoaded[f],c.level<=e.cutoff||c.beingDrawn||(a?(d=c.lastTouchTime,l=a.lastTouchTime,p=c.level,u=a.level,(l>d||d==l&&p>u)&&(a=c,h=f)):(a=c,h=f));a&&h>=0&&(a.unload(),r=h)}e.tilesLoaded[r]=n,e.updateAgain=!0}function l(e,n,i,o,r){var s=e.bounds.getTopLeft(),a=e.bounds.getSize(),l=i.pixelFromPoint(s,!0),u=i.pixelFromPoint(s,!1),h=i.deltaPixelsFromPoints(a,!0),c=i.deltaPixelsFromPoints(a,!1),d=u.plus(c.divide(2)),p=o.distanceTo(d);n||(h=h.plus(new t.Point(1,1))),e.position=l,e.size=h,e.distance=p,e.visibility=r}function u(t,e,n,i,o,r,s){var a,l,u=1e3*t.blendTime;if(e.blendStart||(e.blendStart=s),a=s-e.blendStart,l=u?Math.min(1,a/u):1,t.alwaysBlend&&(l*=r),e.opacity=l,t.lastDrawn.push(e),1==l)p(t.coverage,o,n,i,!0);else if(u>a)return!0;return!1}function h(t){t.tilesMatrix={},t.tilesLoaded=[]}function c(t,e,n,i){var o,r,s,a;if(!t[e])return!1;if(void 0===n||void 0===i){o=t[e];for(s in o)if(o.hasOwnProperty(s)){r=o[s];for(a in r)if(r.hasOwnProperty(a)&&!r[a])return!1}return!0}return void 0===t[e][n]||void 0===t[e][n][i]||t[e][n][i]===!0}function d(t,e,n,i){return void 0===n||void 0===i?c(t,e+1):c(t,e+1,2*n,2*i)&&c(t,e+1,2*n,2*i+1)&&c(t,e+1,2*n+1,2*i)&&c(t,e+1,2*n+1,2*i+1)}function p(e,n,i,o,r){return e[n]?(e[n][i]||(e[n][i]={}),e[n][i][o]=r,void 0):(t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n),void 0)}function f(t,e){t[e]={}}function g(t,e){var n;for(n=t.length-1;n>=0;n--)if(t[n].element==e)return n;return-1}function m(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.distance<t.distance?e:t:e}function v(e,n,i,o){e.onload=null,e.onabort=null,e.onerror=null,o&&window.clearTimeout(o),t.requestAnimationFrame(function(){n(e.src,i?e:null)})}function y(t,e,n){var i,o=e.length;for(i=0;o>i;i++)b(t,e[i],n)}function b(t,e,n){e.position=t.pixelFromPoint(e.bounds.getTopLeft(),!0),e.size=t.deltaPixelsFromPoints(e.bounds.getSize(),!0),e.drawHTML(n)}function w(e,n){var i,o,r,s,a,l,u,h;for(i=n.length-1;i>=0;i--){if(o=n[i],e.viewport.collectionMode?(r=o.x+"/"+o.y,a=e.viewport,h=a.collectionTileSource,e.collectionOverlays[r]?(s=e.collectionOverlays[r],s.viewport&&(s.viewport.resize(o.size,!0),s.viewport.goHome(!0))):(l="horizontal"==h.layout?o.y+o.x*h.rows:o.x+o.y*h.rows,u=h.tileSources.length>l?h.tileSources[l]:null,u&&(e.collectionOverlays[r]=s=new t.Viewer({element:t.makeNeutralElement("div"),mouseNavEnabled:!1,showNavigator:!1,showSequenceControl:!1,showNavigationControl:!1,tileSources:[u]}),E&&(s.element.style.border="1px solid rgba(255,255,255,0.38)",s.element.style["-webkit-box-reflect"]="below 0px -webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(62%,transparent),to(rgba(255,255,255,0.62)))"),e.addOverlay(s.element,o.bounds)))):(k?o.drawCanvas(e.context):o.drawHTML(e.canvas),o.beingDrawn=!0),e.debugMode)try{x(e,o,n.length,i)}catch(c){t.console.error(c)}e.viewer&&e.viewer.raiseEvent("tile-drawn",{viewer:e.viewer,tile:o})}}function x(t,e,n,i){k&&(t.context.save(),t.context.lineWidth=2,t.context.font="small-caps bold 13px ariel",t.context.strokeStyle=t.debugGridColor,t.context.fillStyle=t.debugGridColor,t.context.strokeRect(e.position.x,e.position.y,e.size.x,e.size.y),0===e.x&&0===e.y&&(t.context.fillText("Zoom: "+t.viewport.getZoom(),e.position.x,e.position.y-30),t.context.fillText("Pan: "+(""+t.viewport.getBounds()),e.position.x,e.position.y-20)),t.context.fillText("Level: "+e.level,e.position.x+10,e.position.y+20),t.context.fillText("Column: "+e.x,e.position.x+10,e.position.y+30),t.context.fillText("Row: "+e.y,e.position.x+10,e.position.y+40),t.context.fillText("Order: "+i+" of "+n,e.position.x+10,e.position.y+50),t.context.fillText("Size: "+(""+e.size),e.position.x+10,e.position.y+60),t.context.fillText("Position: "+(""+e.position),e.position.x+10,e.position.y+70),t.context.restore())}var S=t.getWindowSize(),_=t.Browser.vendor,T=t.Browser.version,E=_==t.BROWSERS.FIREFOX||_==t.BROWSERS.OPERA||_==t.BROWSERS.SAFARI&&T>=4||_==t.BROWSERS.CHROME&&T>=2||_==t.BROWSERS.IE&&T>=9,k=E&&!(400>=S.x||400>=S.y)&&!navigator.appVersion.match("Mobile")&&t.isFunction(document.createElement("canvas").getContext);t.Drawer=function(n){var i,o=arguments;for(t.isPlainObject(n)||(n={source:o[0],viewport:o[1],element:o[2]}),t.extend(!0,this,{viewer:null,downloading:0,tilesMatrix:{},tilesLoaded:[],coverage:{},lastDrawn:[],lastResetTime:0,midUpdate:!1,updateAgain:!0,overlays:[],collectionOverlays:{},maxImageCacheCount:t.DEFAULT_SETTINGS.maxImageCacheCount,imageLoaderLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,debugMode:t.DEFAULT_SETTINGS.debugMode,timeout:t.DEFAULT_SETTINGS.timeout},n),this.container=t.getElement(this.element),this.canvas=t.makeNeutralElement(k?"canvas":"div"),this.context=k?this.canvas.getContext("2d"):null,this.normHeight=this.source.dimensions.y/this.source.dimensions.x,this.element=this.container,this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.container.style.textAlign="left",this.container.appendChild(this.canvas),i=0;this.overlays.length>i;i++)t.isPlainObject(this.overlays[i])?this.overlays[i]=e(this,this.overlays[i]):t.isFunction(this.overlays[i])
},t.Drawer.prototype={addOverlay:function(e,n,i,o){var r;return r=t.isPlainObject(e)?e:{element:e,location:n,placement:i,onDraw:o},e=t.getElement(r.element),g(this.overlays,e)>=0?void 0:(this.overlays.push(new t.Overlay({element:e,location:r.location,placement:r.placement,onDraw:r.onDraw})),this.updateAgain=!0,this.viewer&&this.viewer.raiseEvent("add-overlay",{viewer:this.viewer,element:e,location:r.location,placement:r.placement}),this)},updateOverlay:function(e,n,i){var o;return e=t.getElement(e),o=g(this.overlays,e),o>=0&&(this.overlays[o].update(n,i),this.updateAgain=!0),this.viewer&&this.viewer.raiseEvent("update-overlay",{viewer:this.viewer,element:e,location:n,placement:i}),this},removeOverlay:function(e){var n;return e=t.getElement(e),n=g(this.overlays,e),n>=0&&(this.overlays[n].destroy(),this.overlays.splice(n,1),this.updateAgain=!0),this.viewer&&this.viewer.raiseEvent("remove-overlay",{viewer:this.viewer,element:e}),this},clearOverlays:function(){for(;this.overlays.length>0;)this.overlays.pop().destroy(),this.updateAgain=!0;return this.viewer&&this.viewer.raiseEvent("clear-overlay",{viewer:this.viewer}),this},needsUpdate:function(){return this.updateAgain},numTilesLoaded:function(){return this.tilesLoaded.length},reset:function(){return h(this),this.lastResetTime=t.now(),this.updateAgain=!0,this},update:function(){return this.midUpdate=!0,n(this),this.midUpdate=!1,this},loadImage:function(e,n){var i,o,r,s=this,a=!1;return(!this.imageLoaderLimit||this.downloading<this.imageLoaderLimit)&&(this.downloading++,i=new Image,r=function(i,o){if(s.downloading--,"function"==typeof n)try{n(o)}catch(r){t.console.error("%s while executing %s callback: %s",r.name,e,r.message,r)}},i.onload=function(){v(i,r,!0,o)},i.onabort=i.onerror=function(){v(i,r,!1,o)},o=window.setTimeout(function(){v(i,r,!1,o)},this.timeout),a=!0,i.src=e),a}}}(OpenSeadragon),function(t){t.Viewport=function(e){var n=arguments;n.length&&n[0]instanceof t.Point&&(e={containerSize:n[0],contentSize:n[1],config:n[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel},e),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.resetContentSize(this.contentSize),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){return this.contentSize=e,this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.fitWidthBounds=new t.Rect(0,0,1,this.contentAspectY),this.fitHeightBounds=new t.Rect(0,0,this.contentAspectY,this.contentAspectY),this.homeBounds=new t.Rect(0,0,1,this.contentAspectY),this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:e,viewer:this.viewer}),this},getHomeZoom:function(){var t=this.contentAspectX/this.getAspectRatio();return this.defaultZoomLevel?this.defaultZoomLevel:t>=1?1:t},getHomeBounds:function(){var e=this.homeBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new t.Rect(e.x-n/2,e.y-i/2,n,i)},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t,viewer:this.viewer}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom(),e=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t;return Math.min(e,t)},getMaxZoom:function(){var t=this.maxZoomLevel?this.maxZoomLevel:this.contentSize.x*this.maxZoomPixelRatio/this.containerSize.x;return Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this.containerSize.x/this.containerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getBounds:function(e){var n=this.getCenter(e),i=1/this.getZoom(e),o=i/this.getAspectRatio();return new t.Rect(n.x-i/2,n.y-o/2,i,o)},getCenter:function(e){var n,i,o,r,s,a,l,u,h=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?h:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),o=1/i,r=o/this.getAspectRatio(),s=new t.Rect(h.x-o/2,h.y-r/2,o,r),a=this.zoomPoint.minus(s.getTopLeft()).times(this.containerSize.x/s.width),l=a.minus(n),u=l.divide(this.containerSize.x*i),c.plus(u)):c},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},applyConstraints:function(t){var e,n,i,o,r,s,a,l=this.getZoom(),u=Math.max(Math.min(l,this.getMaxZoom()),this.getMinZoom()),h=0,c=0;return l!=u&&this.zoomTo(u,this.zoomPoint,t),e=this.getBounds(),n=this.visibilityRatio*e.width,i=this.visibilityRatio*e.height,o=e.x+e.width,r=1-e.x,s=e.y+e.height,a=this.contentAspectY-e.y,this.wrapHorizontal||(n>o&&(h=n-o),n>r&&(h=h?(h+r-n)/2:r-n)),this.wrapVertical||(i>s&&(c=i-s),i>a&&(c=c?(c+a-i)/2:a-i)),(h||c||t)&&(e.x+=h,e.y+=c,e.width>1&&(e.x=.5-e.width/2),e.height>this.contentAspectY&&(e.y=this.contentAspectY/2-e.height/2),this.fitBounds(e,t)),this.viewer&&this.viewer.raiseEvent("constrain",{immediately:t,viewer:this.viewer}),this},ensureVisible:function(t){return this.applyConstraints(t)},fitBounds:function(e,n){var i,o,r,s,a=this.getAspectRatio(),l=e.getCenter(),u=new t.Rect(e.x,e.y,e.width,e.height);return u.getAspectRatio()>=a?(u.height=e.width/a,u.y=l.y-u.height/2):(u.width=e.height*a,u.x=l.x-u.width/2),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),i=this.getBounds(),o=this.getZoom(),r=1/u.width,r==o||u.width==i.width?this.panTo(l,n):(s=i.getTopLeft().times(this.containerSize.x/i.width).minus(u.getTopLeft().times(this.containerSize.x/u.width)).divide(this.containerSize.x/i.width-this.containerSize.x/u.width),this.zoomTo(r,s,n))},fitVertically:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(1+e.x%1)%1,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(this.contentAspectY+e.y%this.contentAspectY)%this.contentAspectY,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitHeightBounds,t)},fitHorizontally:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(this.contentAspectX+e.x%this.contentAspectX)%this.contentAspectX,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(1+e.y%1)%1,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitWidthBounds,t)},panBy:function(e,n){var i=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(e),n)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e,viewer:this.viewer}),this},zoomBy:function(t,e,n){return this.zoomTo(this.zoomSpring.target.value*t,e,n)},zoomTo:function(e,n,i){return this.zoomPoint=n instanceof t.Point?n:null,i?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:n,immediately:i,viewer:this.viewer}),this},resize:function(e,n){var i=this.getBounds(),o=i,r=e.x/this.containerSize.x;return this.containerSize=new t.Point(e.x,e.y),n&&(o.width=i.width*r,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:n,viewer:this.viewer}),this.fitBounds(o,!0)},update:function(){var t,e,n,i,o=this.centerSpringX.current.value,r=this.centerSpringY.current.value,s=this.zoomSpring.current.value;return this.zoomPoint&&(t=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=s?(e=this.pixelFromPoint(this.zoomPoint,!0),n=e.minus(t),i=this.deltaPointsFromPixels(n,!0),this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update(),this.centerSpringX.current.value!=o||this.centerSpringY.current.value!=r||this.zoomSpring.current.value!=s},deltaPixelsFromPoints:function(t,e){return t.times(this.containerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return t.divide(this.containerSize.x*this.getZoom(e))},pixelFromPoint:function(t,e){var n=this.getBounds(e);return t.minus(n.getTopLeft()).times(this.containerSize.x/n.width)},pointFromPixel:function(t,e){var n=this.getBounds(e);return t.divide(this.containerSize.x/n.width).plus(n.getTopLeft())},viewportToImageCoordinates:function(e,n){return new t.Point(e*this.contentSize.x,n*this.contentSize.y*this.contentAspectX)},imageToViewportCoordinates:function(e,n){return new t.Point(e/this.contentSize.x,n/this.contentSize.y/this.contentAspectX)},imageToViewportRectangle:function(e,n,i,o){var r,s,a;return 1==arguments.length?(a=e,this.imageToViewportRectangle(a.x,a.y,a.width,a.height)):(r=this.imageToViewportCoordinates(e,n),s=this.imageToViewportCoordinates(i,o),new t.Rect(r.x,r.y,s.x,s.y))}}}(OpenSeadragon),function(t,e,n,o){function r(e,n){this.element=e,this.options=t.extend({},u,n),this._defaults=u,this._name=l,this.init()}function s(){return!!("ontouchstart"in e)}function a(){var t=n.body||n.documentElement,e=t.style,i="transition";if("string"==typeof e[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;v.length>o;o++)if("string"==typeof e[v[o]+i])return!0;return!1}var l="tooltipster",u={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(t,e){e()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},h=!0;a()||(h=!1);var c=s();t(e).on("mousemove.tooltipster",function(){c=!1,t(e).off("mousemove.tooltipster")}),r.prototype={init:function(){var e=t(this.element),i=this,r=!0;if(0==i.options.touchDevices&&c&&(r=!1),n.all&&!n.querySelector&&(r=!1),1==r){if(1==this.options.iconDesktop&&!c||1==this.options.iconTouch&&c){var s=e.attr("title");e.removeAttr("title");var a=i.options.iconTheme,l=t('<span class="'+a.replace(".","")+'" title="'+s+'">'+this.options.icon+"</span>");l.insertAfter(e),e.data("tooltipsterIcon",l),e=l}var u=t.trim(i.options.content).length>0?i.options.content:e.attr("title");e.data("tooltipsterContent",u),e.removeAttr("title"),1!=this.options.touchDevices||!c||"click"!=this.options.trigger&&"hover"!=this.options.trigger?("hover"==this.options.trigger&&(e.on("mouseenter.tooltipster",function(){i.showTooltip()}),1==this.options.interactive?e.on("mouseleave.tooltipster",function(){var t=e.data("tooltipster"),n=!1;t!==o&&""!==t?(t.mouseenter(function(){n=!0}),t.mouseleave(function(){n=!1}),setTimeout(function(){1==n?t.mouseleave(function(t){"SELECT"!=t.target.tagName&&"OPTION"!=t.target.tagName&&i.hideTooltip()}):i.hideTooltip()},i.options.interactiveTolerance)):i.hideTooltip()}):e.on("mouseleave.tooltipster",function(){i.hideTooltip()})),"click"==this.options.trigger&&e.on("click.tooltipster",function(){""==e.data("tooltipster")||e.data("tooltipster")==o?i.showTooltip():i.hideTooltip()})):e.bind("touchstart",function(){i.showTooltip()})}},showTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==o&&(e=e.data("tooltipsterIcon")),e.hasClass("tooltipster-disable")||(t(".tooltipster-base").not(".tooltipster-dying").length>0&&1==n.options.onlyOne&&t(".tooltipster-base").not(".tooltipster-dying").not(e.data("tooltipster")).each(function(){t(this).addClass("tooltipster-kill");var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()}),e.clearQueue().delay(n.options.delay).queue(function(){n.options.functionBefore(e,function(){if(e.data("tooltipster")!==o&&""!==e.data("tooltipster")){var i=e.data("tooltipster");if(!i.hasClass("tooltipster-kill")){var r="tooltipster-"+n.options.animation;if(i.removeClass("tooltipster-dying"),1==h&&i.clearQueue().addClass(r+"-show"),n.options.timer>0){var s=i.data("tooltipsterTimer");clearTimeout(s),s=setTimeout(function(){i.data("tooltipsterTimer",o),n.hideTooltip()},n.options.timer),i.data("tooltipsterTimer",s)}1==n.options.touchDevices&&c&&t("body").bind("touchstart",function(e){if(1==n.options.interactive){var i=t(e.target),o=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(o=!1)}),1==o&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")})}}else{t("body").css("overflow-x","hidden");var l=e.data("tooltipsterContent"),u=n.options.theme,d=u.replace(".",""),r="tooltipster-"+n.options.animation,p="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",f=n.options.fixedWidth>0?"width:"+n.options.fixedWidth+"px;":"",g=n.options.maxWidth>0?"max-width:"+n.options.maxWidth+"px;":"",m=1==n.options.interactive?"pointer-events: auto;":"",i=t('<div class="tooltipster-base '+d+" "+r+'" style="'+f+" "+g+" "+m+" "+p+'"></div>'),v=t('<div class="tooltipster-content"></div>');v.html(l),i.append(v),i.appendTo("body"),e.data("tooltipster",i),i.data("origin",e),n.positionTooltip(),n.options.functionReady(e,i),1==h?i.addClass(r+"-show"):i.css("display","none").removeClass(r).fadeIn(n.options.speed);var y=l,b=setInterval(function(){var o=e.data("tooltipsterContent");0==t("body").find(e).length?(i.addClass("tooltipster-dying"),n.hideTooltip()):y!==o&&""!==o&&(y=o,i.find(".tooltipster-content").html(o),1==n.options.updateAnimation&&(a()?(i.css({width:"","-webkit-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){i.removeClass("tooltipster-content-changing"),setTimeout(function(){i.css({"-webkit-transition":n.options.speed+"ms","-moz-transition":n.options.speed+"ms","-o-transition":n.options.speed+"ms","-ms-transition":n.options.speed+"ms",transition:n.options.speed+"ms"})},n.options.speed)},n.options.speed)):i.fadeTo(n.options.speed,.5,function(){i.fadeTo(n.options.speed,1)})),n.positionTooltip()),(0==t("body").find(i).length||0==t("body").find(e).length)&&clearInterval(b)},200);if(n.options.timer>0){var s=setTimeout(function(){i.data("tooltipsterTimer",o),n.hideTooltip()},n.options.timer+n.options.speed);i.data("tooltipsterTimer",s)}1==n.options.touchDevices&&c&&t("body").bind("touchstart",function(e){if(1==n.options.interactive){var i=t(e.target),o=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(o=!1)}),1==o&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")}),i.mouseleave(function(t){"SELECT"!=t.target.tagName&&"OPTION"!=t.target.tagName&&n.hideTooltip()})}}),e.dequeue()}))},hideTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==o&&(e=e.data("tooltipsterIcon"));var i=e.data("tooltipster");if(i==o&&(i=t(".tooltipster-dying")),e.clearQueue(),i!==o&&""!==i){var r=i.data("tooltipsterTimer");r!==o&&clearTimeout(r);var s="tooltipster-"+n.options.animation;1==h?i.clearQueue().removeClass(s+"-show").addClass("tooltipster-dying").delay(n.options.speed).queue(function(){i.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),n.options.functionAfter(e)}):i.clearQueue().addClass("tooltipster-dying").fadeOut(n.options.speed,function(){i.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),n.options.functionAfter(e)})}},positionTooltip:function(){function n(){var n=t(e).scrollLeft();if(0>L-n){var i=L-n;L=n,l.data("arrow-reposition",i)}if(L+d-n>u){var i=L-(u+n-d);L=u+n-d,l.data("arrow-reposition",i)}}function r(n,i){0>m-t(e).scrollTop()-f-R-12&&i.indexOf("top")>-1&&(a.options.position=n,y=i),m+c+f+12+R>t(e).scrollTop()+t(e).height()&&i.indexOf("bottom")>-1&&(a.options.position=n,y=i,D=m-f-R-12)}var s=t(this.element),a=this;if(s.data("tooltipsterIcon")!==o&&(s=s.data("tooltipsterIcon")),s.data("tooltipster")!==o&&""!==s.data("tooltipster")){var l=s.data("tooltipster");l.css("width","");var u=t(e).width(),h=s.outerWidth(!1),c=s.outerHeight(!1),d=l.outerWidth(!1),p=l.innerWidth()+1,f=l.outerHeight(!1),g=s.offset(),m=g.top,v=g.left,y=o;if(s.is("area")){var b=s.attr("shape"),w=s.parent().attr("name"),x=t('img[usemap="#'+w+'"]'),S=x.offset().left,_=x.offset().top,T=s.attr("coords")!==o?s.attr("coords").split(","):o;if("circle"==b){var E=parseInt(T[0]),k=parseInt(T[1]),C=parseInt(T[2]);c=2*C,h=2*C,m=_+k-C,v=S+E-C}else if("rect"==b){var E=parseInt(T[0]),k=parseInt(T[1]),M=parseInt(T[2]),z=parseInt(T[3]);c=z-k,h=M-E,m=_+k,v=S+E}else if("poly"==b){var P=0,A=0,I=0,N=0,H="even";for(i=0;T.length>i;i++){var O=parseInt(T[i]);"even"==H?(O>I&&(I=O,0==i&&(P=I)),P>O&&(P=O),H="odd"):(O>N&&(N=O,1==i&&(A=N)),A>O&&(A=O),H="even")}c=N-A,h=I-P,m=_+A,v=S+P}else c=x.outerHeight(!1),h=x.outerWidth(!1),m=_,v=S}0==a.options.fixedWidth&&l.css({width:p+"px","padding-left":"0px","padding-right":"0px"});var L=0,D=0,R=parseInt(a.options.offsetY),j=parseInt(a.options.offsetX),B="";if("top"==a.options.position){var F=v+d-(v+h);L=v+j-F/2,D=m-f-R-12,n(),r("bottom","top")}if("top-left"==a.options.position&&(L=v+j,D=m-f-R-12,n(),r("bottom-left","top-left")),"top-right"==a.options.position&&(L=v+h+j-d,D=m-f-R-12,n(),r("bottom-right","top-right")),"bottom"==a.options.position){var F=v+d-(v+h);L=v-F/2+j,D=m+c+R+12,n(),r("top","bottom")}if("bottom-left"==a.options.position&&(L=v+j,D=m+c+R+12,n(),r("top-left","bottom-left")),"bottom-right"==a.options.position&&(L=v+h+j-d,D=m+c+R+12,n(),r("top-right","bottom-right")),"left"==a.options.position){L=v-j-d-12,myLeftMirror=v+j+h+12;var W=m+f-(m+s.outerHeight(!1));if(D=m-W/2-R,0>L&&myLeftMirror+d>u){var U=2*parseFloat(l.css("border-width")),q=d+L-U;l.css("width",q+"px"),f=l.outerHeight(!1),L=v-j-q-12-U,W=m+f-(m+s.outerHeight(!1)),D=m-W/2-R}else 0>L&&(L=v+j+h+12,l.data("arrow-reposition","left"))}if("right"==a.options.position){L=v+j+h+12,myLeftMirror=v-j-d-12;var W=m+f-(m+s.outerHeight(!1));if(D=m-W/2-R,L+d>u&&0>myLeftMirror){var U=2*parseFloat(l.css("border-width")),q=u-L-U;l.css("width",q+"px"),f=l.outerHeight(!1),W=m+f-(m+s.outerHeight(!1)),D=m-W/2-R}else L+d>u&&(L=v-j-d-12,l.data("arrow-reposition","right"))}if(1==a.options.arrow){var V="tooltipster-arrow-"+a.options.position;if(1>a.options.arrowColor.length)var $=l.css("background-color");else var $=a.options.arrowColor;var Q=l.data("arrow-reposition");if(Q?"left"==Q?(V="tooltipster-arrow-right",Q=""):"right"==Q?(V="tooltipster-arrow-left",Q=""):Q="left:"+Q+"px;":Q="","top"==a.options.position||"top-left"==a.options.position||"top-right"==a.options.position)var G=parseFloat(l.css("border-bottom-width")),X=l.css("border-bottom-color");else if("bottom"==a.options.position||"bottom-left"==a.options.position||"bottom-right"==a.options.position)var G=parseFloat(l.css("border-top-width")),X=l.css("border-top-color");else if("left"==a.options.position)var G=parseFloat(l.css("border-right-width")),X=l.css("border-right-color");else if("right"==a.options.position)var G=parseFloat(l.css("border-left-width")),X=l.css("border-left-color");else var G=parseFloat(l.css("border-bottom-width")),X=l.css("border-bottom-color");G>1&&G++;var Z="";if(0!==G){var Y="",K="border-color: "+X+";";-1!==V.indexOf("bottom")?Y="margin-top: -"+G+"px;":-1!==V.indexOf("top")?Y="margin-bottom: -"+G+"px;":-1!==V.indexOf("left")?Y="margin-right: -"+G+"px;":-1!==V.indexOf("right")&&(Y="margin-left: -"+G+"px;"),Z='<span class="tooltipster-arrow-border" style="'+Y+" "+K+';"></span>'}l.find(".tooltipster-arrow").remove(),B='<div class="'+V+' tooltipster-arrow" style="'+Q+'">'+Z+'<span style="border-color:'+$+';"></span></div>',l.append(B)}l.css({top:D+"px",left:L+"px"}),y!==o&&(a.options.position=y)}}},t.fn[l]=function(e){if("string"==typeof e){var n=this,i=arguments[1];if(n.data("plugin_tooltipster")==o){var s=n.find("*");n=t(),s.each(function(){t(this).data("plugin_tooltipster")!==o&&n.push(t(this))})}return n.each(function(){switch(e.toLowerCase()){case"show":t(this).data("plugin_tooltipster").showTooltip();break;case"hide":t(this).data("plugin_tooltipster").hideTooltip();break;case"disable":t(this).addClass("tooltipster-disable");break;case"enable":t(this).removeClass("tooltipster-disable");break;case"destroy":t(this).data("plugin_tooltipster").hideTooltip(),t(this).data("plugin_tooltipster","").attr("title",n.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":if(t(this).data("tooltipsterIcon")==o)t(this).data("tooltipsterContent",i);else{var r=t(this).data("tooltipsterIcon");r.data("tooltipsterContent",i)}break;case"reposition":t(this).data("plugin_tooltipster").positionTooltip()}}),this}return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new r(this,e));var n=t(this).data("plugin_tooltipster").options;if(1==n.iconDesktop&&!c||1==n.iconTouch&&c){var i=t(this).data("plugin_tooltipster");t(this).next().data("plugin_tooltipster",i)}})},c&&e.addEventListener("orientationchange",function(){t(".tooltipster-base").length>0&&t(".tooltipster-base").each(function(){var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()})},!1),t(e).on("resize.tooltipster",function(){var e=t(".tooltipster-base").data("origin");null!==e&&e!==o&&e.tooltipster("reposition")})}(jQuery,window,document),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function o(){}function r(){}function s(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function a(){}function l(t){function e(){for(var e,i=n,o=-1,r=i.length;r>++o;)(e=i[o].on)&&e.apply(this,arguments);return t}var n=[],i=new o;return e.on=function(e,o){var r,s=i.get(e);return 2>arguments.length?s&&s.on:(s&&(s.on=null,n=n.slice(0,r=n.indexOf(s)).concat(n.slice(r+1)),i.remove(e)),o&&n.push(i.set(e,{on:o})),t)},e}function u(){as.event.stopPropagation(),as.event.preventDefault()}function h(){for(var t,e=as.event;t=e.sourceEvent;)e=t;return e}function c(t,e){function n(){t.on(e,null)}t.on(e,function(){u(),n()},!0),setTimeout(n,0)}function d(t){for(var e=new a,n=0,i=arguments.length;i>++n;)e[arguments[n]]=l(e);return e.of=function(n,i){return function(o){try{var r=o.sourceEvent=as.event;o.target=t,as.event=o,e[o.type].apply(n,i)}finally{as.event=r}}},e}function p(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>ms&&(us.scrollX||us.scrollY)){n=as.select(ls.body).append("svg").style("position","absolute").style("top",0).style("left",0);var o=n[0][0].getScreenCTM();ms=!(o.f||o.e),n.remove()}return ms?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function f(t){for(var e=-1,n=t.length,i=[];n>++e;)i.push(t[e]);return i}function g(t){return Array.prototype.slice.call(t)}function m(t){return bs(t,Es),t}function v(t){return function(){return ws(t,this)}}function y(t){return function(){return xs(t,this)}}function b(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function o(){this.setAttribute(t,e)}function r(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=as.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?r:o}function w(t){return t.trim().replace(/\s+/g," ")}function x(t){return RegExp("(?:^|\\s+)"+as.requote(t)+"(?:\\s+|$)","g")}function S(t,e){function n(){for(var n=-1;o>++n;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);o>++n;)t[n](this,i)}t=t.trim().split(/\s+/).map(_);var o=t.length;return"function"==typeof e?i:n}function _(t){var e=x(t);return function(n,i){if(o=n.classList)return i?o.add(t):o.remove(t);var o=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(o)||n.setAttribute("class",w(o+" "+t))):n.setAttribute("class",w(o.replace(e," ")))}}function T(t,e,n){function i(){this.style.removeProperty(t)}function o(){this.style.setProperty(t,e,n)}function r(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?r:o}function E(t,e){function n(){delete this[t]}function i(){this[t]=e}function o(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?o:i}function k(t){return{__data__:t}}function C(t){return function(){return Ts(this,t)}}function M(t){return arguments.length||(t=as.ascending),function(e,n){return!e-!n||t(e.__data__,n.__data__)}}function z(){}function P(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function o(){var o=l(e,vs(arguments));i.call(this),this.addEventListener(t,this[s]=o,o.$=n),o._=e}function r(){var e,n=RegExp("^__on([^.]+)"+as.requote(t)+"$");for(var i in this)if(e=i.match(n)){var o=this[i];this.removeEventListener(e[1],o,o.$),delete this[i]}}var s="__on"+t,a=t.indexOf("."),l=A;a>0&&(t=t.substring(0,a));var u=Ms.get(t);return u&&(t=u,l=I),a?e?o:i:e?z:r}function A(t,e){return function(n){var i=as.event;as.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{as.event=i}}}function I(t,e){var n=A(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function N(t,e){for(var n=0,i=t.length;i>n;n++)for(var o,r=t[n],s=0,a=r.length;a>s;s++)(o=r[s])&&e(o,s,n);return t}function H(t){return bs(t,zs),t}function O(){}function L(t,e,n){return new D(t,e,n)}function D(t,e,n){this.h=t,this.s=e,this.l=n}function R(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?r+(s-r)*t/60:180>t?s:240>t?r+(s-r)*(240-t)/60:r}function o(t){return Math.round(255*i(t))}var r,s;return t=isNaN(t)?0:0>(t%=360)?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,r=2*n-s,ee(o(t+120),o(t),o(t-120))}function j(t){return t>0?1:0>t?-1:0}function B(t){return Math.acos(Math.max(-1,Math.min(1,t)))}function F(t){return t>1?Os/2:-1>t?-Os/2:Math.asin(t)}function W(t){return(Math.exp(t)-Math.exp(-t))/2}function U(t){return(Math.exp(t)+Math.exp(-t))/2}function q(t){return(t=Math.sin(t/2))*t}function V(t,e,n){return new $(t,e,n)}function $(t,e,n){this.h=t,this.c=e,this.l=n}function Q(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),G(n,Math.cos(t*=Ds)*e,Math.sin(t)*e)}function G(t,e,n){return new X(t,e,n)}function X(t,e,n){this.l=t,this.a=e,this.b=n}function Z(t,e,n){var i=(t+16)/116,o=i+e/500,r=i-n/200;return o=K(o)*Fs,i=K(i)*Ws,r=K(r)*Us,ee(te(3.2404542*o-1.5371385*i-.4985314*r),te(-.969266*o+1.8760108*i+.041556*r),te(.0556434*o-.2040259*i+1.0572252*r))}function Y(t,e,n){return t>0?V(Math.atan2(n,e)*Rs,Math.sqrt(e*e+n*n),t):V(0/0,0/0,t)}function K(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function J(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,n){return new ne(t,e,n)}function ne(t,e,n){this.r=t,this.g=e,this.b=n}function ie(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function oe(t,e,n){var i,o,r,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(o=i[2].split(","),i[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(le(o[0]),le(o[1]),le(o[2]))}return(r=$s.get(t))?e(r.r,r.g,r.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),e(s,a,l))}function re(t,e,n){var i,o,r=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-r,l=(s+r)/2;return a?(o=.5>l?a/(s+r):a/(2-s-r),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=0/0,o=l>0&&1>l?0:i),L(i,o,l)}function se(t,e,n){t=ae(t),e=ae(e),n=ae(n);var i=J((.4124564*t+.3575761*e+.1804375*n)/Fs),o=J((.2126729*t+.7151522*e+.072175*n)/Ws),r=J((.0193339*t+.119192*e+.9503041*n)/Us);return G(116*o-16,500*(i-o),200*(o-r))}function ae(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function le(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ue(t){return"function"==typeof t?t:function(){return t}}function he(t){return t}function ce(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),de(e,n,t,i)}}function de(t,e,n,i){function o(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(r,l)}catch(i){return s.error.call(r,i),void 0}s.load.call(r,t)}else s.error.call(r,l)}var r={},s=as.dispatch("progress","load","error"),a={},l=new(us.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=o:l.onreadystatechange=function(){l.readyState>3&&o()},l.onprogress=function(t){var e=as.event;as.event=t;try{s.progress.call(r,l)}finally{as.event=e}},r.header=function(t,e){return t=(t+"").toLowerCase(),2>arguments.length?a[t]:(null==e?delete a[t]:a[t]=e+"",r)},r.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",r):e},r.response=function(t){return n=t,r},["get","post"].forEach(function(t){r[t]=function(){return r.send.apply(r,[t].concat(vs(arguments)))}}),r.send=function(n,i,o){if(2===arguments.length&&"function"==typeof i&&(o=i,i=null),l.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),l.setRequestHeader)for(var s in a)l.setRequestHeader(s,a[s]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),l.send(null==i?null:i),r},r.abort=function(){return l.abort(),r},as.rebind(r,s,"on"),null==i?r:r.get(pe(i))}function pe(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function fe(t,e){function n(t,n,r){3>arguments.length&&(r=n,n=null);var s=as.xhr(t,e,r);return s.row=function(t){return arguments.length?s.response(null==(n=t)?i:o(t)):n},s.row(n)}function i(t){return n.parse(t.responseText)}function o(t){return function(e){return n.parse(e.responseText,t)}}function s(e){return e.map(a).join(t)
}function a(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var o=Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(o(t),n)}:o})},n.parseRows=function(t,e){function n(){if(h>=l)return s;if(o)return o=!1,r;var e=h;if(34===t.charCodeAt(e)){for(var n=e;l>n++;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}h=n+2;var i=t.charCodeAt(n+1);return 13===i?(o=!0,10===t.charCodeAt(n+2)&&++h):10===i&&(o=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>h;){var i=t.charCodeAt(h++),a=1;if(10===i)o=!0;else if(13===i)o=!0,10===t.charCodeAt(h)&&(++h,++a);else if(i!==u)continue;return t.substring(e,h-a)}return t.substring(e)}for(var i,o,r={},s={},a=[],l=t.length,h=0,c=0;(i=n())!==s;){for(var d=[];i!==r&&i!==s;)d.push(i),i=n();(!e||(d=e(d,c++)))&&a.push(d)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new r,o=[];return e.forEach(function(t){for(var e in t)i.has(e)||o.push(i.add(e))}),[o.map(a).join(t)].concat(e.map(function(e){return o.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(s).join("\n")},n}function ge(){var t=me(),e=ve()-t;e>24?(isFinite(e)&&(clearTimeout(Zs),Zs=setTimeout(ge,e)),Xs=0):(Xs=1,Ys(ge))}function me(){for(var t=Date.now(),e=Qs;e;)t>=e.time&&(e.flush=e.callback(t-e.time)),e=e.next;return t}function ve(){for(var t,e=Qs,n=1/0;e;)e.flush?e=t?t.next=e.next:Qs=e.next:(n>e.time&&(n=e.time),e=(t=e).next);return Gs=t,n}function ye(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function be(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function we(t){return t+""}function xe(t,e){t&&aa.hasOwnProperty(t.type)&&aa[t.type](t,e)}function Se(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();r>++o;)i=t[o],e.point(i[0],i[1]);e.lineEnd()}function _e(t,e){var n=-1,i=t.length;for(e.polygonStart();i>++n;)Se(t[n],e,1);e.polygonEnd()}function Te(){function t(t,e){t*=Ds,e=e*Ds/2+Os/4;var n=t-i,s=Math.cos(e),a=Math.sin(e),l=r*a,u=o*s+l*Math.cos(n),h=l*Math.sin(n);ua+=Math.atan2(h,u),i=t,o=s,r=a}var e,n,i,o,r;ha.point=function(s,a){ha.point=t,i=(e=s)*Ds,o=Math.cos(a=(n=a)*Ds/2+Os/4),r=Math.sin(a)},ha.lineEnd=function(){t(e,n)}}function Ee(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ke(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ce(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ze(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Pe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ae(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function Ie(t,e){return Ls>Math.abs(t[0]-e[0])&&Ls>Math.abs(t[1]-e[1])}function Ne(t,e){if(!ca){++da,t*=Ds;var n=Math.cos(e*=Ds);pa+=(n*Math.cos(t)-pa)/da,fa+=(n*Math.sin(t)-fa)/da,ga+=(Math.sin(e)-ga)/da}}function He(){var t,e;ca=1,Oe(),ca=2;var n=ma.point;ma.point=function(i,o){n(t=i,e=o)},ma.lineEnd=function(){ma.point(t,e),Le(),ma.lineEnd=Le}}function Oe(){function t(t,o){t*=Ds;var r=Math.cos(o*=Ds),s=r*Math.cos(t),a=r*Math.sin(t),l=Math.sin(o),u=Math.atan2(Math.sqrt((u=n*l-i*a)*u+(u=i*s-e*l)*u+(u=e*a-n*s)*u),e*s+n*a+i*l);da+=u,pa+=u*(e+(e=s)),fa+=u*(n+(n=a)),ga+=u*(i+(i=l))}var e,n,i;ca>1||(1>ca&&(ca=1,da=pa=fa=ga=0),ma.point=function(o,r){o*=Ds;var s=Math.cos(r*=Ds);e=s*Math.cos(o),n=s*Math.sin(o),i=Math.sin(r),ma.point=t})}function Le(){ma.point=Ne}function De(){return!0}function Re(t,e,n,i,o){var r=[],s=[];if(t.forEach(function(t){if(!(0>=(e=t.length-1))){var e,n=t[0],i=t[e];if(Ie(n,i)){o.lineStart();for(var a=0;e>a;++a)o.point((n=t[a])[0],n[1]);return o.lineEnd(),void 0}var l={point:n,points:t,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,r.push(l),s.push(u),l={point:i,points:[i],other:null,visited:!1,entry:!1,subject:!0},u={point:i,points:[i],other:l,visited:!1,entry:!0,subject:!1},l.other=u,r.push(l),s.push(u)}}),s.sort(e),je(r),je(s),r.length){if(n)for(var a=1,l=!n(s[0].point),u=s.length;u>a;++a)s[a].entry=l=!l;for(var h,c,d,p=r[0];;){for(h=p;h.visited;)if((h=h.next)===p)return;c=h.points,o.lineStart();do{if(h.visited=h.other.visited=!0,h.entry){if(h.subject)for(var a=0;c.length>a;a++)o.point((d=c[a])[0],d[1]);else i(h.point,h.next.point,1,o);h=h.next}else{if(h.subject){c=h.prev.points;for(var a=c.length;--a>=0;)o.point((d=c[a])[0],d[1])}else i(h.point,h.prev.point,-1,o);h=h.prev}h=h.other,c=h.points}while(!h.visited);o.lineEnd()}}}function je(t){if(e=t.length){for(var e,n,i=0,o=t[0];e>++i;)o.next=n=t[i],n.prev=o,o=n;o.next=n=t[0],n.prev=o}}function Be(t,e,n){return function(i){function o(e,n){t(e,n)&&i.point(e,n)}function r(t,e){m.point(t,e)}function s(){v.point=r,m.lineStart()}function a(){v.point=o,m.lineEnd()}function l(t,e){b.point(t,e),g.push([t,e])}function u(){b.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),o=n.length;if(!o)return f=!0,p+=Ue(g,-1),g=null,void 0;if(g=null,1&e){t=n[0],d+=Ue(t,1);var r,o=t.length-1,s=-1;for(i.lineStart();o>++s;)i.point((r=t[s])[0],r[1]);return i.lineEnd(),void 0}o>1&&2&e&&n.push(n.pop().concat(n.shift())),c.push(n.filter(Fe))}var c,d,p,f,g,m=e(i),v={point:o,lineStart:s,lineEnd:a,polygonStart:function(){v.point=l,v.lineStart=u,v.lineEnd=h,f=!1,p=d=0,c=[],i.polygonStart()},polygonEnd:function(){v.point=o,v.lineStart=s,v.lineEnd=a,c=as.merge(c),c.length?Re(c,qe,null,n,i):(-Ls>d||f&&-Ls>p)&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=We(),b=e(y);return v}}function Fe(t){return t.length>1}function We(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:z,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ue(t,e){if(!(n=t.length))return 0;for(var n,i,o,r=0,s=0,a=t[0],l=a[0],u=a[1],h=Math.cos(u),c=Math.atan2(e*Math.sin(l)*h,Math.sin(u)),d=1-e*Math.cos(l)*h,p=c;n>++r;)a=t[r],h=Math.cos(u=a[1]),i=Math.atan2(e*Math.sin(l=a[0])*h,Math.sin(u)),o=1-e*Math.cos(l)*h,Ls>Math.abs(d-2)&&Ls>Math.abs(o-2)||(Ls>Math.abs(o)||Ls>Math.abs(d)||(Ls>Math.abs(Math.abs(i-c)-Os)?o+d>2&&(s+=4*(i-c)):s+=Ls>Math.abs(d-2)?4*(i-p):((3*Os+i-c)%(2*Os)-Os)*(d+o)),p=c,c=i,d=o);return s}function qe(t,e){return(0>(t=t.point)[0]?t[1]-Os/2-Ls:Os/2-t[1])-(0>(e=e.point)[0]?e[1]-Os/2-Ls:Os/2-e[1])}function Ve(t){var e,n=0/0,i=0/0,o=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(r,s){var a=r>0?Os:-Os,l=Math.abs(r-n);Ls>Math.abs(l-Os)?(t.point(n,i=(i+s)/2>0?Os/2:-Os/2),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(r,i),e=0):o!==a&&l>=Os&&(Ls>Math.abs(n-o)&&(n-=o*Ls),Ls>Math.abs(r-a)&&(r-=a*Ls),i=$e(n,i,r,s),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=r,i=s),o=a},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function $e(t,e,n,i){var o,r,s=Math.sin(t-n);return Math.abs(s)>Ls?Math.atan((Math.sin(e)*(r=Math.cos(i))*Math.sin(n)-Math.sin(i)*(o=Math.cos(e))*Math.sin(t))/(o*r*s)):(e+i)/2}function Qe(t,e,n,i){var o;if(null==t)o=n*Os/2,i.point(-Os,o),i.point(0,o),i.point(Os,o),i.point(Os,0),i.point(Os,-o),i.point(0,-o),i.point(-Os,-o),i.point(-Os,0),i.point(-Os,o);else if(Math.abs(t[0]-e[0])>Ls){var r=(t[0]<e[0]?1:-1)*Os;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])}function Ge(t){function e(t,e){return Math.cos(t)*Math.cos(e)>r}function n(t){var n,r,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,d){var p,f=[c,d],g=e(c,d),m=s?g?0:o(c,d):g?o(c+(0>c?Os:-Os),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(p=i(n,f),(Ie(n,p)||Ie(f,p))&&(f[0]+=Ls,f[1]+=Ls,g=e(f[0],f[1]))),g!==l)h=0,g?(t.lineStart(),p=i(f,n),t.point(p[0],p[1])):(p=i(n,f),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&s^g){var v;m&r||!(v=i(f,n,!0))||(h=0,s?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Ie(n,f)||t.point(f[0],f[1]),n=f,l=g,r=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return h|(u&&l)<<1}}}function i(t,e,n){var i=Ee(t),o=Ee(e),s=[1,0,0],a=Ce(i,o),l=ke(a,a),u=a[0],h=l-u*u;if(!h)return!n&&t;var c=r*l/h,d=-r*u/h,p=Ce(s,a),f=ze(s,c),g=ze(a,d);Me(f,g);var m=p,v=ke(f,m),y=ke(m,m),b=v*v-y*(ke(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),x=ze(m,(-v-w)/y);if(Me(x,f),x=Ae(x),!n)return x;var S,_=t[0],T=e[0],E=t[1],k=e[1];_>T&&(S=_,_=T,T=S);var C=T-_,M=Ls>Math.abs(C-Os),z=M||Ls>C;if(!M&&E>k&&(S=E,E=k,k=S),z?M?E+k>0^x[1]<(Ls>Math.abs(x[0]-_)?E:k):x[1]>=E&&k>=x[1]:C>Os^(x[0]>=_&&T>=x[0])){var P=ze(m,(-v+w)/y);return Me(P,f),[x,Ae(P)]}}}function o(e,n){var i=s?t:Os-t,o=0;return-i>e?o|=1:e>i&&(o|=2),-i>n?o|=4:n>i&&(o|=8),o}var r=Math.cos(t),s=r>0,a=Math.abs(r)>Ls,l=ln(t,6*Ds);return Be(e,n,l)}function Xe(t,e,n,i){function o(i,o){return Ls>Math.abs(i[0]-t)?o>0?0:3:Ls>Math.abs(i[0]-n)?o>0?2:1:Ls>Math.abs(i[1]-e)?o>0?1:0:o>0?3:2}function r(t,e){return s(t.point,e.point)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}function a(o,r){var s=r[0]-o[0],a=r[1]-o[1],l=[0,1];return Ls>Math.abs(s)&&Ls>Math.abs(a)?o[0]>=t&&n>=o[0]&&o[1]>=e&&i>=o[1]:Ze(t-o[0],s,l)&&Ze(o[0]-n,-s,l)&&Ze(e-o[1],a,l)&&Ze(o[1]-i,-a,l)?(1>l[1]&&(r[0]=o[0]+l[1]*s,r[1]=o[1]+l[1]*a),l[0]>0&&(o[0]+=l[0]*s,o[1]+=l[0]*a),!0):!1}return function(l){function u(r){var s=o(r,-1),a=h([0===s||3===s?t:n,s>1?i:e]);return a}function h(t){for(var e=0,n=b.length,i=t[1],o=0;n>o;++o)for(var r,s=1,a=b[o],l=a.length,u=a[0];l>s;++s)r=a[s],i>=u[1]?r[1]>i&&c(u,r,t)>0&&++e:i>=r[1]&&0>c(u,r,t)&&--e,u=r;return 0!==e}function c(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function d(r,a,l,u){var h=0,c=0;if(null==r||(h=o(r,l))!==(c=o(a,l))||0>s(r,a)^l>0){do u.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+l+4)%4)!==c)}else u.point(a[0],a[1])}function p(o,r){return o>=t&&n>=o&&r>=e&&i>=r}function f(t,e){p(t,e)&&l.point(t,e)}function g(){P.point=v,b&&b.push(w=[]),C=!0,k=!1,T=E=0/0}function m(){y&&(v(x,S),_&&k&&z.rejoin(),y.push(z.buffer())),P.point=f,k&&l.lineEnd()}function v(t,e){t=Math.max(-ya,Math.min(ya,t)),e=Math.max(-ya,Math.min(ya,e));var n=p(t,e);if(b&&w.push([t,e]),C)x=t,S=e,_=n,C=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&k)l.point(t,e);else{var i=[T,E],o=[t,e];a(i,o)?(k||(l.lineStart(),l.point(i[0],i[1])),l.point(o[0],o[1]),n||l.lineEnd()):n&&(l.lineStart(),l.point(t,e))}T=t,E=e,k=n}var y,b,w,x,S,_,T,E,k,C,M=l,z=We(),P={point:f,lineStart:g,lineEnd:m,polygonStart:function(){l=z,y=[],b=[]},polygonEnd:function(){l=M,(y=as.merge(y)).length?(l.polygonStart(),Re(y,r,u,d,l),l.polygonEnd()):h([t,e])&&(l.polygonStart(),l.lineStart(),d(null,null,1,l),l.lineEnd(),l.polygonEnd()),y=b=w=null}};return P}}function Ze(t,e,n){if(Ls>Math.abs(e))return 0>=t;var i=t/e;if(e>0){if(i>n[1])return!1;i>n[0]&&(n[0]=i)}else{if(n[0]>i)return!1;n[1]>i&&(n[1]=i)}return!0}function Ye(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Ke(t){function e(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){h=0/0,g.point=s,e.lineStart()}function s(i,r){var s=Ee([i,r]),a=t(i,r);n(h,c,u,d,p,f,h=a[0],c=a[1],u=i,d=s[0],p=s[1],f=s[2],o,e),e.point(h,c)}function a(){g.point=i,e.lineEnd()}function l(){var t,i,l,m,v,y,b;r(),g.point=function(e,n){s(t=e,i=n),l=h,m=c,v=d,y=p,b=f,g.point=s},g.lineEnd=function(){n(h,c,u,d,p,f,l,m,t,v,y,b,o,e),g.lineEnd=a,a()}}var u,h,c,d,p,f,g={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),g.lineStart=l},polygonEnd:function(){e.polygonEnd(),g.lineStart=r}};return g}function n(e,o,r,s,a,l,u,h,c,d,p,f,g,m){var v=u-e,y=h-o,b=v*v+y*y;if(b>4*i&&g--){var w=s+d,x=a+p,S=l+f,_=Math.sqrt(w*w+x*x+S*S),T=Math.asin(S/=_),E=Ls>Math.abs(Math.abs(S)-1)?(r+c)/2:Math.atan2(x,w),k=t(E,T),C=k[0],M=k[1],z=C-e,P=M-o,A=y*z-v*P;(A*A/b>i||Math.abs((v*z+y*P)/b-.5)>.3)&&(n(e,o,r,s,a,l,C,M,E,w/=_,x/=_,S,g,m),m.point(C,M),n(C,M,E,w,x,S,u,h,c,d,p,f,g,m))}}var i=.5,o=16;return e.precision=function(t){return arguments.length?(o=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function Je(t){return tn(function(){return t})()}function tn(t){function e(t){return t=s(t[0]*Ds,t[1]*Ds),[t[0]*h+a,l-t[1]*h]}function n(t){return t=s.invert((t[0]-a)/h,(l-t[1])/h),t&&[t[0]*Rs,t[1]*Rs]}function i(){s=Ye(r=on(g,m,v),o);var t=o(p,f);return a=c-t[0]*h,l=d+t[1]*h,e}var o,r,s,a,l,u=Ke(function(t,e){return t=o(t,e),[t[0]*h+a,l-t[1]*h]}),h=150,c=480,d=250,p=0,f=0,g=0,m=0,v=0,y=va,b=he,w=null,x=null;return e.stream=function(t){return en(r,y(u(b(t))))},e.clipAngle=function(t){return arguments.length?(y=null==t?(w=t,va):Ge((w=+t)*Ds),e):w},e.clipExtent=function(t){return arguments.length?(x=t,b=null==t?he:Xe(t[0][0],t[0][1],t[1][0],t[1][1]),e):x},e.scale=function(t){return arguments.length?(h=+t,i()):h},e.translate=function(t){return arguments.length?(c=+t[0],d=+t[1],i()):[c,d]},e.center=function(t){return arguments.length?(p=t[0]%360*Ds,f=t[1]%360*Ds,i()):[p*Rs,f*Rs]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Ds,m=t[1]%360*Ds,v=t.length>2?t[2]%360*Ds:0,i()):[g*Rs,m*Rs,v*Rs]},as.rebind(e,u,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function en(t,e){return{point:function(n,i){i=t(n*Ds,i*Ds),n=i[0],e.point(n>Os?n-2*Os:-Os>n?n+2*Os:n,i[1])},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function nn(t,e){return[t,e]}function on(t,e,n){return t?e||n?Ye(sn(t),an(e,n)):sn(t):e||n?an(e,n):nn}function rn(t){return function(e,n){return e+=t,[e>Os?e-2*Os:-Os>e?e+2*Os:e,n]}}function sn(t){var e=rn(t);return e.invert=rn(-t),e}function an(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*i+a*o;return[Math.atan2(l*r-h*s,a*i-u*o),Math.asin(Math.max(-1,Math.min(1,h*r+l*s)))]}var i=Math.cos(t),o=Math.sin(t),r=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*r-l*s;return[Math.atan2(l*r+u*s,a*i+h*o),Math.asin(Math.max(-1,Math.min(1,h*i-a*o)))]},n}function ln(t,e){var n=Math.cos(t),i=Math.sin(t);return function(o,r,s,a){null!=o?(o=un(n,o),r=un(n,r),(s>0?r>o:o>r)&&(o+=2*s*Os)):(o=t+2*s*Os,r=t);for(var l,u=s*e,h=o;s>0?h>r:r>h;h-=u)a.point((l=Ae([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],l[1])}}function un(t,e){var n=Ee(e);n[0]-=t,Pe(n);var i=B(-n[1]);return((0>-n[2]?-i:i)+2*Math.PI-Ls)%(2*Math.PI)}function hn(t,e,n){var i=as.range(t,e-Ls,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function cn(t,e,n){var i=as.range(t,e-Ls,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function dn(t){return t.source}function pn(t){return t.target}function fn(t,e,n,i){var o=Math.cos(e),r=Math.sin(e),s=Math.cos(i),a=Math.sin(i),l=o*Math.cos(t),u=o*Math.sin(t),h=s*Math.cos(n),c=s*Math.sin(n),d=2*Math.asin(Math.sqrt(q(i-e)+o*s*q(n-t))),p=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,i=n*l+e*h,o=n*u+e*c,s=n*r+e*a;return[Math.atan2(o,i)*Rs,Math.atan2(s,Math.sqrt(i*i+o*o))*Rs]}:function(){return[t*Rs,e*Rs]};return f.distance=d,f}function gn(){function t(t,o){var r=Math.sin(o*=Ds),s=Math.cos(o),a=Math.abs((t*=Ds)-e),l=Math.cos(a);ba+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=i*r-n*s*l)*a),n*r+i*s*l),e=t,n=r,i=s}var e,n,i;wa.point=function(o,r){e=o*Ds,n=Math.sin(r*=Ds),i=Math.cos(r),wa.point=t},wa.lineEnd=function(){wa.point=wa.lineEnd=z}}function mn(t){var e=0,n=Os/3,i=tn(t),o=i(e,n);return o.parallels=function(t){return arguments.length?i(e=t[0]*Os/180,n=t[1]*Os/180):[180*(e/Os),180*(n/Os)]},o}function vn(t,e){function n(t,e){var n=Math.sqrt(r-2*o*Math.sin(e))/o;return[n*Math.sin(t*=o),s-n*Math.cos(t)]}var i=Math.sin(t),o=(i+Math.sin(e))/2,r=1+i*(2*o-i),s=Math.sqrt(r)/o;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/o,F((r-(t*t+n*n)*o*o)/(2*o))]},n}function yn(){function t(t,e){Sa+=o*t-i*e,i=t,o=e}var e,n,i,o;Ca.point=function(r,s){Ca.point=t,e=i=r,n=o=s},Ca.lineEnd=function(){t(e,n)}}function bn(t,e){_a>t&&(_a=t),t>Ea&&(Ea=t),Ta>e&&(Ta=e),e>ka&&(ka=e)}function wn(){function t(t,e){s.push("M",t,",",e,r)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function i(){a.point=t}function o(){s.push("Z")}var r=xn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(t){return r=xn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function xn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Sn(t,e){ca||(pa+=t,fa+=e,++ga)}function _n(){function t(t,i){var o=t-e,r=i-n,s=Math.sqrt(o*o+r*r);pa+=s*(e+t)/2,fa+=s*(n+i)/2,ga+=s,e=t,n=i}var e,n;if(1!==ca){if(!(1>ca))return;ca=1,pa=fa=ga=0}za.point=function(i,o){za.point=t,e=i,n=o}}function Tn(){za.point=Sn}function En(){function t(t,e){var n=o*t-i*e;pa+=n*(i+t),fa+=n*(o+e),ga+=3*n,i=t,o=e}var e,n,i,o;2>ca&&(ca=2,pa=fa=ga=0),za.point=function(r,s){za.point=t,e=i=r,n=o=s},za.lineEnd=function(){t(e,n)}}function kn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,s,0,2*Os)}function n(e,n){t.moveTo(e,n),a.point=i}function i(e,n){t.lineTo(e,n)}function o(){a.point=e}function r(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:o,polygonStart:function(){a.lineEnd=r},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(t){return s=t,a},result:z};return a}function Cn(t){var e=Ke(function(e,n){return t([e*Rs,n*Rs])});return function(t){return t=e(t),{point:function(e,n){t.point(e*Ds,n*Ds)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}function Mn(t,e){function n(e,n){var i=Math.cos(e),o=Math.cos(n),r=t(i*o);return[r*o*Math.sin(e),r*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),o=e(i),r=Math.sin(o),s=Math.cos(o);return[Math.atan2(t*r,i*s),Math.asin(i&&n*r/i)]},n}function zn(t,e){function n(t,e){var n=Ls>Math.abs(Math.abs(e)-Os/2)?0:s/Math.pow(o(e),r);return[n*Math.sin(r*t),s-n*Math.cos(r*t)]}var i=Math.cos(t),o=function(t){return Math.tan(Os/4+t/2)},r=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(o(e)/o(t)),s=i*Math.pow(o(t),r)/r;return r?(n.invert=function(t,e){var n=s-e,i=j(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(s/i,1/r))-Os/2]},n):An}function Pn(t,e){function n(t,e){var n=r-e;return[n*Math.sin(o*t),r-n*Math.cos(o*t)]}var i=Math.cos(t),o=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),r=i/o+t;return Ls>Math.abs(o)?nn:(n.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/o,r-j(o)*Math.sqrt(t*t+n*n)]},n)}function An(t,e){return[t,Math.log(Math.tan(Os/4+e/2))]}function In(t){var e,n=Je(t),i=n.scale,o=n.translate,r=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=o.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=r.apply(n,arguments);if(s===n){if(e=null==t){var a=Os*i(),l=o();r([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function Nn(t,e){var n=Math.cos(e)*Math.sin(t);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function Hn(t){function e(e){function s(){u.push("M",r(t(h),a))}for(var l,u=[],h=[],c=-1,d=e.length,p=ue(n),f=ue(i);d>++c;)o.call(this,l=e[c],c)?h.push([+p.call(this,l,c),+f.call(this,l,c)]):h.length&&(s(),h=[]);return h.length&&s(),u.length?u.join(""):null}var n=On,i=Ln,o=De,r=Dn,s=r.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?r=t:(r=Oa.get(t)||Dn).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function On(t){return t[0]}function Ln(t){return t[1]}function Dn(t){return t.join("L")}function Rn(t){return Dn(t)+"Z"}function jn(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];n>++e;)o.push("V",(i=t[e])[1],"H",i[0]);return o.join("")}function Bn(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];n>++e;)o.push("H",(i=t[e])[0],"V",i[1]);return o.join("")}function Fn(t,e){return 4>t.length?Dn(t):t[1]+qn(t.slice(1,t.length-1),Vn(t,e))}function Wn(t,e){return 3>t.length?Dn(t):t[0]+qn((t.push(t[0]),t),Vn([t[t.length-2]].concat(t,[t[1]]),e))}function Un(t,e){return 3>t.length?Dn(t):t[0]+qn(t,Vn(t,e))}function qn(t,e){if(1>e.length||t.length!=e.length&&t.length!=e.length+2)return Dn(t);var n=t.length!=e.length,i="",o=t[0],r=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],o=t[1],l=2),e.length>1){a=e[1],r=t[l],l++,i+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1];for(var u=2;e.length>u;u++,l++)r=t[l],a=e[u],i+="S"+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1]}if(n){var h=t[l];i+="Q"+(r[0]+2*a[0]/3)+","+(r[1]+2*a[1]/3)+","+h[0]+","+h[1]}return i}function Vn(t,e){for(var n,i=[],o=(1-e)/2,r=t[0],s=t[1],a=1,l=t.length;l>++a;)n=r,r=s,s=t[a],i.push([o*(s[0]-n[0]),o*(s[1]-n[1])]);return i}function $n(t){if(3>t.length)return Dn(t);var e=1,n=t.length,i=t[0],o=i[0],r=i[1],s=[o,o,o,(i=t[1])[0]],a=[r,r,r,i[1]],l=[o,",",r];for(Yn(l,s,a);n>++e;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);for(e=-1;2>++e;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);return l.join("")}function Qn(t){if(4>t.length)return Dn(t);for(var e,n=[],i=-1,o=t.length,r=[0],s=[0];3>++i;)e=t[i],r.push(e[0]),s.push(e[1]);for(n.push(Zn(Ra,r)+","+Zn(Ra,s)),--i;o>++i;)e=t[i],r.shift(),r.push(e[0]),s.shift(),s.push(e[1]),Yn(n,r,s);return n.join("")}function Gn(t){for(var e,n,i=-1,o=t.length,r=o+4,s=[],a=[];4>++i;)n=t[i%o],s.push(n[0]),a.push(n[1]);for(e=[Zn(Ra,s),",",Zn(Ra,a)],--i;r>++i;)n=t[i%o],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Yn(e,s,a);return e.join("")}function Xn(t,e){var n=t.length-1;if(n)for(var i,o,r=t[0][0],s=t[0][1],a=t[n][0]-r,l=t[n][1]-s,u=-1;n>=++u;)i=t[u],o=u/n,i[0]=e*i[0]+(1-e)*(r+o*a),i[1]=e*i[1]+(1-e)*(s+o*l);return $n(t)}function Zn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Yn(t,e,n){t.push("C",Zn(La,e),",",Zn(La,n),",",Zn(Da,e),",",Zn(Da,n),",",Zn(Ra,e),",",Zn(Ra,n))}function Kn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Jn(t){for(var e=0,n=t.length-1,i=[],o=t[0],r=t[1],s=i[0]=Kn(o,r);n>++e;)i[e]=(s+(s=Kn(o=r,r=t[e+1])))/2;return i[e]=s,i}function ti(t){for(var e,n,i,o,r=[],s=Jn(t),a=-1,l=t.length-1;l>++a;)e=Kn(t[a],t[a+1]),1e-6>Math.abs(e)?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,o=n*n+i*i,o>9&&(o=3*e/Math.sqrt(o),s[a]=o*n,s[a+1]=o*i));for(a=-1;l>=++a;)o=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),r.push([o||0,s[a]*o||0]);return r}function ei(t){return 3>t.length?Dn(t):t[0]+qn(t,ti(t))}function ni(t,e,n,i){var o,r,s,a,l,u,h;return o=i[t],r=o[0],s=o[1],o=i[e],a=o[0],l=o[1],o=i[n],u=o[0],h=o[1],(h-s)*(a-r)-(l-s)*(u-r)>0}function ii(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function oi(t,e,n,i){var o=t[0],r=n[0],s=e[0]-o,a=i[0]-r,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,d=(a*(l-u)-c*(o-r))/(c*s-a*h);return[o+d*s,l+d*h]}function ri(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&o.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[ja[t.side]]}},o={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,o=e.y-t.y,r=i>0?i:-i,s=o>0?o:-o;return n.c=t.x*i+t.y*o+.5*(i*i+o*o),r>s?(n.a=1,n.b=o/i,n.c/=i):(n.b=1,n.a=i/o,n.c/=o),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var o=n.a*i.b-n.b*i.a;if(1e-10>Math.abs(o))return null;var r,s,a=(n.c*i.b-i.c*n.b)/o,l=(i.c*n.a-n.c*i.a)/o,u=n.region.r,h=i.region.r;u.y<h.y||u.y==h.y&&u.x<h.x?(r=t,s=n):(r=e,s=i);var c=a>=s.region.r.x;return c&&"l"===r.side||!c&&"r"===r.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,o=e.x>i.x;if(o&&"l"===t.side)return 1;if(!o&&"r"===t.side)return 0;if(1===n.a){var r=e.y-i.y,s=e.x-i.x,a=0,l=0;if(!o&&0>n.b||o&&n.b>=0?l=a=r>=n.b*s:(l=e.x+e.y*n.b>n.c,0>n.b&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-r*r)<u*r*(1+2*s/u+n.b*n.b),0>n.b&&(l=!l)}}else{var h=n.c-n.a*e.x,c=e.y-h,d=e.x-i.x,p=h-i.y;l=c*c>d*d+p*p}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[ja[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},r={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,o=r.list,s=o.length;s>i;i++){var a=o[i];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}o.splice(i,0,t)},del:function(t){for(var e=0,n=r.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===r.list.length},nextEvent:function(t){for(var e=0,n=r.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=r.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return r.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,h,c,d,p,f,g,m,v,y,b=n.list.shift();;)if(r.empty()||(s=r.min()),b&&(r.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))a=i.leftBound(b),l=i.right(a),d=i.rightRegion(a),v=o.bisect(d,b),c=i.createHalfEdge(v,"l"),i.insert(a,c),g=o.intersect(a,c),g&&(r.del(a),r.insert(a,g,o.distance(g,b))),a=c,c=i.createHalfEdge(v,"r"),i.insert(a,c),g=o.intersect(c,l),g&&r.insert(c,g,o.distance(g,b)),b=n.list.shift();else{if(r.empty())break;a=r.extractMin(),u=i.left(a),l=i.right(a),h=i.right(l),d=i.leftRegion(a),p=i.rightRegion(l),m=a.vertex,o.endPoint(a.edge,a.side,m),o.endPoint(l.edge,l.side,m),i.del(a),r.del(l),i.del(l),y="l",d.y>p.y&&(f=d,d=p,p=f,y="r"),v=o.bisect(d,p),c=i.createHalfEdge(v,y),i.insert(u,c),o.endPoint(v,ja[y],m),g=o.intersect(u,c),g&&(r.del(u),r.insert(u,g,o.distance(g,d))),g=o.intersect(c,h),g&&r.insert(c,g,o.distance(g,d))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))e(a.edge)}function si(t){return t.x}function ai(t){return t.y}function li(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ui(t,e,n,i,o,r){if(!t(e,n,i,o,r)){var s=.5*(n+o),a=.5*(i+r),l=e.nodes;l[0]&&ui(t,l[0],n,i,s,a),l[1]&&ui(t,l[1],s,i,o,a),l[2]&&ui(t,l[2],n,a,s,r),l[3]&&ui(t,l[3],s,a,o,r)}}function hi(t,e){t=as.rgb(t),e=as.rgb(e);var n=t.r,i=t.g,o=t.b,r=e.r-n,s=e.g-i,a=e.b-o;return function(t){return"#"+ie(Math.round(n+r*t))+ie(Math.round(i+s*t))+ie(Math.round(o+a*t))}}function ci(t){var e=[t.a,t.b],n=[t.c,t.d],i=pi(e),o=di(e,n),r=pi(fi(n,e,-o))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,o*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Rs,this.translate=[t.e,t.f],this.scale=[i,r],this.skew=r?Math.atan2(o,r)*Rs:0}function di(t,e){return t[0]*e[0]+t[1]*e[1]}function pi(t){var e=Math.sqrt(di(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function gi(t,e){return e-=t=+t,function(n){return t+e*n}}function mi(t,e){var n,i=[],o=[],r=as.transform(t),s=as.transform(e),a=r.translate,l=s.translate,u=r.rotate,h=s.rotate,c=r.skew,d=s.skew,p=r.scale,f=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),o.push({i:1,x:gi(a[0],l[0])},{i:3,x:gi(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=h?(u-h>180?h+=360:h-u>180&&(u+=360),o.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:gi(u,h)})):h&&i.push(i.pop()+"rotate("+h+")"),c!=d?o.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:gi(c,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),o.push({i:n-4,x:gi(p[0],f[0])},{i:n-2,x:gi(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=o.length,function(t){for(var e,r=-1;n>++r;)i[(e=o[r]).i]=e.x(t);return i.join("")}}function vi(t,e){var n,i={},o={};for(n in t)n in e?i[n]=wi(n)(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in i)o[n]=i[n](t);return o}}function yi(t,e){var n,i,o,r,s,a=0,l=0,u=[],h=[];for(t+="",e+="",Fa.lastIndex=0,i=0;n=Fa.exec(e);++i)n.index&&u.push(e.substring(a,l=n.index)),h.push({i:u.length,x:n[0]}),u.push(null),a=Fa.lastIndex;for(e.length>a&&u.push(e.substring(a)),i=0,r=h.length;(n=Fa.exec(t))&&r>i;++i)if(s=h[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),o=i+1;r>o;++o)h[o].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),o=i+1;r>o;++o)h[o].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),o=i+1;r>o;++o)h[o].i--;h.splice(i,1),r--,i--}else s.x=gi(parseFloat(n[0]),parseFloat(s.x));for(;r>i;)s=h.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),r--;return 1===u.length?null==u[0]?(s=h[0].x,function(t){return s(t)+""}):function(){return e}:function(t){for(i=0;r>i;++i)u[(s=h[i]).i]=s.x(t);return u.join("")}}function bi(t,e){for(var n,i=as.interpolators.length;--i>=0&&!(n=as.interpolators[i](t,e)););return n}function wi(t){return"transform"==t?mi:bi}function xi(t,e){var n,i=[],o=[],r=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(bi(t[n],e[n]));for(;r>n;++n)o[n]=t[n];for(;s>n;++n)o[n]=e[n];return function(t){for(n=0;a>n;++n)o[n]=i[n](t);return o}}function Si(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function _i(t){return function(e){return 1-t(1-e)}}function Ti(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ei(t){return t*t}function ki(t){return t*t*t}function Ci(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Mi(t){return function(e){return Math.pow(e,t)}}function zi(t){return 1-Math.cos(t*Os/2)}function Pi(t){return Math.pow(2,10*(t-1))}function Ai(t){return 1-Math.sqrt(1-t*t)}function Ii(t,e){var n;return 2>arguments.length&&(e=.45),arguments.length?n=e/(2*Os)*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Os/e)}}function Ni(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Hi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Oi(t,e){t=as.hcl(t),e=as.hcl(e);var n=t.h,i=t.c,o=t.l,r=e.h-n,s=e.c-i,a=e.l-o;return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(r)?(r=0,n=isNaN(n)?e.h:n):r>180?r-=360:-180>r&&(r+=360),function(t){return Q(n+r*t,i+s*t,o+a*t)+""}}function Li(t,e){t=as.hsl(t),e=as.hsl(e);var n=t.h,i=t.s,o=t.l,r=e.h-n,s=e.s-i,a=e.l-o;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(r)?(r=0,n=isNaN(n)?e.h:n):r>180?r-=360:-180>r&&(r+=360),function(t){return R(n+r*t,i+s*t,o+a*t)+""}}function Di(t,e){t=as.lab(t),e=as.lab(e);var n=t.l,i=t.a,o=t.b,r=e.l-n,s=e.a-i,a=e.b-o;return function(t){return Z(n+r*t,i+s*t,o+a*t)+""}}function Ri(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ji(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e
}}function Bi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Fi(t){for(var e=t.source,n=t.target,i=Ui(e,n),o=[e];e!==i;)e=e.parent,o.push(e);for(var r=o.length;n!==i;)o.splice(r,0,n),n=n.parent;return o}function Wi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ui(t,e){if(t===e)return t;for(var n=Wi(t),i=Wi(e),o=n.pop(),r=i.pop(),s=null;o===r;)s=o,o=n.pop(),r=i.pop();return s}function qi(t){t.fixed|=2}function Vi(t){t.fixed&=-7}function $i(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Qi(t){t.fixed&=-5}function Gi(t,e,n){var i=0,o=0;if(t.charge=0,!t.leaf)for(var r,s=t.nodes,a=s.length,l=-1;a>++l;)r=s[l],null!=r&&(Gi(r,e,n),t.charge+=r.charge,i+=r.charge*r.cx,o+=r.charge*r.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,o+=u*t.point.y}t.cx=i/t.charge,t.cy=o/t.charge}function Xi(t,e){return as.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ji,t}function Zi(t){return t.children}function Yi(t){return t.value}function Ki(t,e){return e.value-t.value}function Ji(t){return as.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function to(t){return t.x}function eo(t){return t.y}function no(t,e,n){t.y0=e,t.y=n}function io(t){return as.range(t.length)}function oo(t){for(var e=-1,n=t[0].length,i=[];n>++e;)i[e]=0;return i}function ro(t){for(var e,n=1,i=0,o=t[0][1],r=t.length;r>n;++n)(e=t[n][1])>o&&(i=n,o=e);return i}function so(t){return t.reduce(ao,0)}function ao(t,e){return t+e[1]}function lo(t,e){return uo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function uo(t,e){for(var n=-1,i=+t[0],o=(t[1]-i)/e,r=[];e>=++n;)r[n]=o*n+i;return r}function ho(t){return[as.min(t),as.max(t)]}function co(t,e){return t.parent==e.parent?1:2}function po(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function fo(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function go(t,e){var n=t.children;if(n&&(o=n.length))for(var i,o,r=-1;o>++r;)e(i=go(n[r],e),t)>0&&(t=i);return t}function mo(t,e){return t.x-e.x}function vo(t,e){return e.x-t.x}function yo(t,e){return t.depth-e.depth}function bo(t,e){function n(t,i){var o=t.children;if(o&&(s=o.length))for(var r,s,a=null,l=-1;s>++l;)r=o[l],n(r,a),a=r;e(t,i)}n(t,null)}function wo(t){for(var e,n=0,i=0,o=t.children,r=o.length;--r>=0;)e=o[r]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function xo(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function So(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function _o(t,e){return t.value-e.value}function To(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Eo(t,e){t._pack_next=e,e._pack_prev=t}function ko(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r+e.r;return o*o-n*n-i*i>.001}function Co(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),d=Math.min(t.y-t.r,d),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,i,o,r,s,a,l,u,h=1/0,c=-1/0,d=1/0,p=-1/0;if(n.forEach(Mo),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(o=n[1],o.x=o.r,o.y=0,e(o),u>2))for(r=n[2],Ao(i,o,r),e(r),To(i,r),i._pack_prev=r,To(r,o),o=i._pack_next,s=3;u>s;s++){Ao(i,o,r=n[s]);var f=0,g=1,m=1;for(a=o._pack_next;a!==o;a=a._pack_next,g++)if(ko(a,r)){f=1;break}if(1==f)for(l=i._pack_prev;l!==a._pack_prev&&!ko(l,r);l=l._pack_prev,m++);f?(m>g||g==m&&o.r<i.r?Eo(i,o=a):Eo(i=l,o),s--):(To(i,r),o=r,e(r))}var v=(h+c)/2,y=(d+p)/2,b=0;for(s=0;u>s;s++)r=n[s],r.x-=v,r.y-=y,b=Math.max(b,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=b,n.forEach(zo)}}function Mo(t){t._pack_next=t._pack_prev=t}function zo(t){delete t._pack_next,delete t._pack_prev}function Po(t,e,n,i){var o=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,o)for(var r=-1,s=o.length;s>++r;)Po(o[r],e,n,i)}function Ao(t,e,n){var i=t.r+n.r,o=e.x-t.x,r=e.y-t.y;if(i&&(o||r)){var s=e.r+n.r,a=o*o+r*r;s*=s,i*=i;var l=.5+(i-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+l*o+u*r,n.y=t.y+l*r-u*o}else n.x=t.x+i,n.y=t.y}function Io(t){return 1+as.max(t,function(t){return t.y})}function No(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ho(t){var e=t.children;return e&&e.length?Ho(e[0]):t}function Oo(t){var e,n=t.children;return n&&(e=n.length)?Oo(n[e-1]):t}function Lo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Do(t,e){var n=t.x+e[3],i=t.y+e[0],o=t.dx-e[1]-e[3],r=t.dy-e[0]-e[2];return 0>o&&(n+=o/2,o=0),0>r&&(i+=r/2,r=0),{x:n,y:i,dx:o,dy:r}}function Ro(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function jo(t){return t.rangeExtent?t.rangeExtent():Ro(t.range())}function Bo(t,e,n,i){var o=n(t[0],t[1]),r=i(e[0],e[1]);return function(t){return r(o(t))}}function Fo(t,e){var n,i=0,o=t.length-1,r=t[i],s=t[o];return r>s&&(n=i,i=o,o=n,n=r,r=s,s=n),(e=e(s-r))&&(t[i]=e.floor(r),t[o]=e.ceil(s)),t}function Wo(t,e,n,i){var o=[],r=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());a>=++s;)o.push(n(t[s-1],t[s])),r.push(i(e[s-1],e[s]));return function(e){var n=as.bisect(t,e,1,a)-1;return r[n](o[n](e))}}function Uo(t,e,n,i){function o(){var o=Math.min(t.length,e.length)>2?Wo:Bo,l=i?Bi:ji;return s=o(t,e,l,n),a=o(e,t,l,bi),r}function r(t){return s(t)}var s,a;return r.invert=function(t){return a(t)},r.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},r.range=function(t){return arguments.length?(e=t,o()):e},r.rangeRound=function(t){return r.range(t).interpolate(Ri)},r.clamp=function(t){return arguments.length?(i=t,o()):i},r.interpolate=function(t){return arguments.length?(n=t,o()):n},r.ticks=function(e){return Qo(t,e)},r.tickFormat=function(e,n){return Go(t,e,n)},r.nice=function(){return Fo(t,Vo),o()},r.copy=function(){return Uo(t,e,n,i)},o()}function qo(t,e){return as.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Vo(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function $o(t,e){var n=Ro(t),i=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),r=e/i*o;return.15>=r?o*=10:.35>=r?o*=5:.75>=r&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function Qo(t,e){return as.range.apply(as,$o(t,e))}function Go(t,e,n){var i=-Math.floor(Math.log($o(t,e)[2])/Math.LN10+.01);return as.format(n?n.replace(na,function(t,e,n,o,r,s,a,l,u,h){return[e,n,o,r,s,a,l,u||"."+(i-2*("%"===h)),h].join("")}):",."+i+"f")}function Xo(t,e,n,i,o){function r(e){return t(n(e))}function s(){return n===Zo?{floor:a,ceil:l}:{floor:function(t){return-l(-t)},ceil:function(t){return-a(-t)}}}function a(t){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}function l(t){return Math.pow(e,Math.ceil(Math.log(t)/Math.log(e)))}return r.invert=function(e){return i(t.invert(e))},r.domain=function(e){return arguments.length?(0>e[0]?(n=Ko,i=Jo):(n=Zo,i=Yo),t.domain((o=e.map(Number)).map(n)),r):o},r.base=function(t){return arguments.length?(e=+t,r):e},r.nice=function(){return t.domain(Fo(o,s).map(n)),r},r.ticks=function(){var o=Ro(t.domain()),r=[];if(o.every(isFinite)){var s=Math.log(e),a=Math.floor(o[0]/s),l=Math.ceil(o[1]/s),u=i(o[0]),h=i(o[1]),c=e%1?2:e;if(n===Ko)for(r.push(-Math.pow(e,-a));l>a++;)for(var d=c-1;d>0;d--)r.push(-Math.pow(e,-a)*d);else{for(;l>a;a++)for(var d=1;c>d;d++)r.push(Math.pow(e,a)*d);r.push(Math.pow(e,a))}for(a=0;u>r[a];a++);for(l=r.length;r[l-1]>h;l--);r=r.slice(a,l)}return r},r.tickFormat=function(t,o){if(2>arguments.length&&(o=Za),!arguments.length)return o;var s,a=Math.log(e),l=Math.max(.1,t/r.ticks().length),u=n===Ko?(s=-1e-12,Math.floor):(s=1e-12,Math.ceil);return function(t){return l>=t/i(a*u(n(t)/a+s))?o(t):""}},r.copy=function(){return Xo(t.copy(),e,n,i,o)},qo(r,t)}function Zo(t){return Math.log(0>t?0:t)}function Yo(t){return Math.exp(t)}function Ko(t){return-Math.log(t>0?0:-t)}function Jo(t){return-Math.exp(-t)}function tr(t,e,n){function i(e){return t(o(e))}var o=er(e),r=er(1/e);return i.invert=function(e){return r(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(o)),i):n},i.ticks=function(t){return Qo(n,t)},i.tickFormat=function(t,e){return Go(n,t,e)},i.nice=function(){return i.domain(Fo(n,Vo))},i.exponent=function(s){return arguments.length?(o=er(e=s),r=er(1/e),t.domain(n.map(o)),i):e},i.copy=function(){return tr(t.copy(),e,n)},qo(i,t)}function er(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function nr(t,e){function n(e){return s[((r.get(e)||r.set(e,t.push(e)))-1)%s.length]}function i(e,n){return as.range(t.length).map(function(t){return e+n*t})}var r,s,a;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new o;for(var s,a=-1,l=i.length;l>++a;)r.has(s=i[a])||r.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(o,r){2>arguments.length&&(r=0);var l=o[0],u=o[1],h=(u-l)/(Math.max(1,t.length-1)+r);return s=i(2>t.length?(l+u)/2:l+h*r/2,h),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(o,r,l){2>arguments.length&&(r=0),3>arguments.length&&(l=r);var u=o[1]<o[0],h=o[u-0],c=o[1-u],d=(c-h)/(t.length-r+2*l);return s=i(h+d*l,d),u&&s.reverse(),a=d*(1-r),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(o,r,l){2>arguments.length&&(r=0),3>arguments.length&&(l=r);var u=o[1]<o[0],h=o[u-0],c=o[1-u],d=Math.floor((c-h)/(t.length-r+2*l)),p=c-h-(t.length-r)*d;return s=i(h+Math.round(p/2),d),u&&s.reverse(),a=Math.round(d*(1-r)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Ro(e.a[0])},n.copy=function(){return nr(t,e)},n.domain(t)}function ir(t,e){function n(){var n=0,r=e.length;for(o=[];r>++n;)o[n-1]=as.quantile(t,n/r);return i}function i(t){return isNaN(t=+t)?0/0:e[as.bisect(o,t)]}var o;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(as.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return o},i.copy=function(){return ir(t,e)},n()}function or(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(r*(e-t))))]}function o(){return r=n.length/(e-t),s=n.length-1,i}var r,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],o()):[t,e]},i.range=function(t){return arguments.length?(n=t,o()):n},i.copy=function(){return or(t,e,n)},o()}function rr(t,e){function n(n){return e[as.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return rr(t,e)},n}function sr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Qo(t,e)},e.tickFormat=function(e,n){return Go(t,e,n)},e.copy=function(){return sr(t)},e}function ar(t){return t.innerRadius}function lr(t){return t.outerRadius}function ur(t){return t.startAngle}function hr(t){return t.endAngle}function cr(t){for(var e,n,i,o=-1,r=t.length;r>++o;)e=t[o],n=e[0],i=e[1]+el,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function dr(t){function e(e){function l(){g.push("M",a(t(v),c),h,u(t(m.reverse()),c),"Z")}for(var d,p,f,g=[],m=[],v=[],y=-1,b=e.length,w=ue(n),x=ue(o),S=n===i?function(){return p}:ue(i),_=o===r?function(){return f}:ue(r);b>++y;)s.call(this,d=e[y],y)?(m.push([p=+w.call(this,d,y),f=+x.call(this,d,y)]),v.push([+S.call(this,d,y),+_.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=On,i=On,o=0,r=Ln,s=De,a=Dn,l=a.key,u=a,h="L",c=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(o=r=t,e):r},e.y0=function(t){return arguments.length?(o=t,e):o},e.y1=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?a=t:(a=Oa.get(t)||Dn).key,u=a.reverse||a,h=a.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function pr(t){return t.radius}function fr(t){return[t.x,t.y]}function gr(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+el;return[n*Math.cos(i),n*Math.sin(i)]}}function mr(){return 64}function vr(){return"circle"}function yr(t){var e=Math.sqrt(t/Os);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function br(t,e){return bs(t,al),t.id=e,t}function wr(t,e,n,i){var o=t.id;return N(t,"function"==typeof n?function(t,r,s){t.__transition__[o].tween.set(e,i(n.call(t,t.__data__,r,s)))}:(n=i(n),function(t){t.__transition__[o].tween.set(e,n)}))}function xr(t){return null==t&&(t=""),function(){this.textContent=t}}function Sr(t,e,n,i){var r=t.__transition__||(t.__transition__={active:0,count:0}),s=r[n];if(!s){var a=i.time;return s=r[n]={tween:new o,event:as.dispatch("start","end"),time:a,ease:i.ease,delay:i.delay,duration:i.duration},++r.count,as.timer(function(i){function o(i){return r.active>n?u():(r.active=n,d.start.call(t,h,e),s.tween.forEach(function(n,i){(i=i.call(t,h,e))&&g.push(i)}),l(i)||as.timer(l,0,a),1)}function l(i){if(r.active!==n)return u();for(var o=(i-p)/f,s=c(o),a=g.length;a>0;)g[--a].call(t,s);return o>=1?(u(),d.end.call(t,h,e),1):void 0}function u(){return--r.count?delete r[n]:delete t.__transition__,1}var h=t.__data__,c=s.ease,d=s.event,p=s.delay,f=s.duration,g=[];return i>=p?o(i):as.timer(o,p,a),1},0,a),s}}function _r(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Tr(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Er(t,e,n){if(i=[],n&&e.length>1){for(var i,o,r,s=Ro(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;l>++a;)for(o=n;--o>0;)(r=+e[a]-o*u)>=s[0]&&i.push(r);for(--a,o=0;n>++o&&(r=+e[a]+o*u)<s[1];)i.push(r)}return i}function kr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Cr(t,e,n){function i(e){var n=t(e),i=r(n,1);return i-e>e-n?n:i}function o(n){return e(n=t(new fl(n-1)),1),n}function r(t,n){return e(t=new fl(+t),n),t}function s(t,i,r){var s=o(t),a=[];if(r>1)for(;i>s;)n(s)%r||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{fl=kr;var i=new kr;return i._=t,s(i,e,n)}finally{fl=Date}}t.floor=t,t.round=i,t.ceil=o,t.offset=r,t.range=s;var l=t.utc=Mr(t);return l.floor=l,l.round=Mr(i),l.ceil=Mr(o),l.offset=Mr(r),l.range=a,t}function Mr(t){return function(e,n){try{fl=kr;var i=new kr;return i._=e,t(i,n)._}finally{fl=Date}}}function zr(t,e,n,i){for(var o,r,s=0,a=e.length,l=n.length;a>s;){if(i>=l)return-1;if(o=e.charCodeAt(s++),37===o){if(r=Il[e.charAt(s++)],!r||0>(i=r(t,n,i)))return-1}else if(o!=n.charCodeAt(i++))return-1}return i}function Pr(t){return RegExp("^(?:"+t.map(as.requote).join("|")+")","i")}function Ar(t){for(var e=new o,n=-1,i=t.length;i>++n;)e.set(t[n].toLowerCase(),n);return e}function Ir(t,e,n){t+="";var i=t.length;return n>i?Array(n-i+1).join(e)+t:t}function Nr(t,e,n){El.lastIndex=0;var i=El.exec(e.substring(n));return i?n+=i[0].length:-1}function Hr(t,e,n){Tl.lastIndex=0;var i=Tl.exec(e.substring(n));return i?n+=i[0].length:-1}function Or(t,e,n){Ml.lastIndex=0;var i=Ml.exec(e.substring(n));return i?(t.m=zl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Lr(t,e,n){kl.lastIndex=0;var i=kl.exec(e.substring(n));return i?(t.m=Cl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Dr(t,e,n){return zr(t,""+Al.c,e,n)}function Rr(t,e,n){return zr(t,""+Al.x,e,n)}function jr(t,e,n){return zr(t,""+Al.X,e,n)}function Br(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+=i[0].length):-1}function Fr(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.y=Wr(+i[0]),n+=i[0].length):-1}function Wr(t){return t+(t>68?1900:2e3)}function Ur(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+=i[0].length):-1}function qr(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+=i[0].length):-1}function Vr(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+=i[0].length):-1}function $r(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+=i[0].length):-1}function Qr(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+=i[0].length):-1}function Gr(t,e,n){Nl.lastIndex=0;var i=Nl.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+=i[0].length):-1}function Xr(t,e,n){var i=Hl.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Zr(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),o=Math.abs(e)%60;return n+Ir(i,"0",2)+Ir(o,"0",2)}function Yr(t){return t.toISOString()}function Kr(t,e,n){function i(e){return t(e)}return i.invert=function(e){return Jr(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Jr)},i.nice=function(t){return i.domain(Fo(i.domain(),function(){return t}))},i.ticks=function(n,o){var r=Ro(i.domain());if("function"!=typeof n){var s=r[1]-r[0],a=s/n,l=as.bisect(Ll,a);if(l==Ll.length)return e.year(r,n);if(!l)return t.ticks(n).map(Jr);Math.log(a/Ll[l-1])<Math.log(Ll[l]/a)&&--l,n=e[l],o=n[1],n=n[0].range}return n(r[0],new Date(+r[1]+1),o)},i.tickFormat=function(){return n},i.copy=function(){return Kr(t.copy(),e,n)},qo(i,t)}function Jr(t){return new Date(t)}function ts(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function es(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function ns(t){var e=t.getFullYear(),n=es(e),i=es(e+1);return e+(t-n)/(i-n)}function is(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function os(t){var e=t.getUTCFullYear(),n=is(e),i=is(e+1);return e+(t-n)/(i-n)}function rs(t){return JSON.parse(t.responseText)}function ss(t){var e=ls.createRange();return e.selectNode(ls.body),e.createContextualFragment(t.responseText)}var as={version:"3.1.10"};Date.now||(Date.now=function(){return+new Date});var ls=document,us=window;try{ls.createElement("div").style.setProperty("opacity",0,"")}catch(hs){var cs=us.CSSStyleDeclaration.prototype,ds=cs.setProperty;cs.setProperty=function(t,e,n){ds.call(this,t,e+"",n)}}as.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},as.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},as.min=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;r>++o&&(null==(n=t[o])||n!=n);)n=void 0;for(;r>++o;)null!=(i=t[o])&&n>i&&(n=i)}else{for(;r>++o&&(null==(n=e.call(t,t[o],o))||n!=n);)n=void 0;for(;r>++o;)null!=(i=e.call(t,t[o],o))&&n>i&&(n=i)}return n},as.max=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;r>++o&&(null==(n=t[o])||n!=n);)n=void 0;for(;r>++o;)null!=(i=t[o])&&i>n&&(n=i)}else{for(;r>++o&&(null==(n=e.call(t,t[o],o))||n!=n);)n=void 0;for(;r>++o;)null!=(i=e.call(t,t[o],o))&&i>n&&(n=i)}return n},as.extent=function(t,e){var n,i,o,r=-1,s=t.length;if(1===arguments.length){for(;s>++r&&(null==(n=o=t[r])||n!=n);)n=o=void 0;for(;s>++r;)null!=(i=t[r])&&(n>i&&(n=i),i>o&&(o=i))}else{for(;s>++r&&(null==(n=o=e.call(t,t[r],r))||n!=n);)n=void 0;for(;s>++r;)null!=(i=e.call(t,t[r],r))&&(n>i&&(n=i),i>o&&(o=i))}return[n,o]},as.sum=function(t,e){var n,i=0,o=t.length,r=-1;if(1===arguments.length)for(;o>++r;)isNaN(n=+t[r])||(i+=n);else for(;o>++r;)isNaN(n=+e.call(t,t[r],r))||(i+=n);return i},as.mean=function(e,n){var i,o=e.length,r=0,s=-1,a=0;if(1===arguments.length)for(;o>++s;)t(i=e[s])&&(r+=(i-r)/++a);else for(;o>++s;)t(i=n.call(e,e[s],s))&&(r+=(i-r)/++a);return a?r:void 0},as.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),o=+t[i-1],r=n-i;return r?o+r*(t[i]-o):o},as.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?as.quantile(e.sort(as.ascending),.5):void 0},as.bisector=function(t){return{left:function(e,n,i,o){for(3>arguments.length&&(i=0),4>arguments.length&&(o=e.length);o>i;){var r=i+o>>>1;n>t.call(e,e[r],r)?i=r+1:o=r}return i},right:function(e,n,i,o){for(3>arguments.length&&(i=0),4>arguments.length&&(o=e.length);o>i;){var r=i+o>>>1;t.call(e,e[r],r)>n?o=r:i=r+1}return i}}};var ps=as.bisector(function(t){return t});as.bisectLeft=ps.left,as.bisect=as.bisectRight=ps.right,as.shuffle=function(t){for(var e,n,i=t.length;i;)n=0|Math.random()*i--,e=t[i],t[i]=t[n],t[n]=e;return t},as.permute=function(t,e){for(var n=[],i=-1,o=e.length;o>++i;)n[i]=t[e[i]];return n},as.zip=function(){if(!(o=arguments.length))return[];for(var t=-1,n=as.min(arguments,e),i=Array(n);n>++t;)for(var o,r=-1,s=i[t]=Array(o);o>++r;)s[r]=arguments[r][t];return i},as.transpose=function(t){return as.zip.apply(as,t)},as.keys=function(t){var e=[];for(var n in t)e.push(n);return e},as.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},as.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},as.merge=function(t){return Array.prototype.concat.apply([],t)},as.range=function(t,e,i){if(3>arguments.length&&(i=1,2>arguments.length&&(e=t,t=0)),1/0===(e-t)/i)throw Error("infinite range");var o,r=[],s=n(Math.abs(i)),a=-1;if(t*=s,e*=s,i*=s,0>i)for(;(o=t+i*++a)>e;)r.push(o/s);else for(;e>(o=t+i*++a);)r.push(o/s);return r},as.map=function(t){var e=new o;for(var n in t)e.set(n,t[n]);return e},i(o,{has:function(t){return fs+t in this},get:function(t){return this[fs+t]},set:function(t,e){return this[fs+t]=e},remove:function(t){return t=fs+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1),this[e])}});var fs="\0",gs=fs.charCodeAt(0);as.nest=function(){function t(e,a,l){if(l>=s.length)return i?i.call(r,a):n?a.sort(n):a;for(var u,h,c,d,p=-1,f=a.length,g=s[l++],m=new o;f>++p;)(d=m.get(u=g(h=a[p])))?d.push(h):m.set(u,[h]);return e?(h=e(),c=function(n,i){h.set(n,t(e,i,l))}):(h={},c=function(n,i){h[n]=t(e,i,l)}),m.forEach(c),h}function e(t,n){if(n>=s.length)return t;var i=[],o=a[n++];return t.forEach(function(t,o){i.push({key:t,values:e(o,n)})}),o?i.sort(function(t,e){return o(t.key,e.key)}):i}var n,i,r={},s=[],a=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(as.map,n,0),0)},r.key=function(t){return s.push(t),r},r.sortKeys=function(t){return a[s.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},as.set=function(t){var e=new r;if(t)for(var n=0;t.length>n;n++)e.add(t[n]);return e},i(r,{has:function(t){return fs+t in this},add:function(t){return this[fs+t]=!0,t},remove:function(t){return t=fs+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1))}}),as.behavior={},as.rebind=function(t,e){for(var n,i=1,o=arguments.length;o>++i;)t[n=arguments[i]]=s(t,e,e[n]);return t},as.dispatch=function(){for(var t=new a,e=-1,n=arguments.length;n>++e;)t[arguments[e]]=l(t);return t},a.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return 2>arguments.length?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},as.event=null,as.mouse=function(t){return p(t,h())};var ms=/WebKit/.test(us.navigator.userAgent)?-1:0,vs=g;try{vs(ls.documentElement.childNodes)[0].nodeType}catch(ys){vs=f}var bs=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};as.touches=function(t,e){return 2>arguments.length&&(e=h().touches),e?vs(e).map(function(e){var n=p(t,e);return n.identifier=e.identifier,n}):[]},as.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=s.parentNode;return null!=h?as.touches(t).filter(function(t){return t.identifier===h})[0]:as.mouse(t)}function e(){if(!s.parentNode)return o();var e=t(),n=e[0]-d[0],i=e[1]-d[1];p|=n|i,d=e,u(),a({type:"drag",x:e[0]+r[0],y:e[1]+r[1],dx:n,dy:i})}function o(){a({type:"dragend"}),p&&(u(),as.event.target===l&&c(f,"click")),f.on(null!=h?"touchmove.drag-"+h:"mousemove.drag",null).on(null!=h?"touchend.drag-"+h:"mouseup.drag",null)}var r,s=this,a=n.of(s,arguments),l=as.event.target,h=as.event.touches?as.event.changedTouches[0].identifier:null,d=t(),p=0,f=as.select(us).on(null!=h?"touchmove.drag-"+h:"mousemove.drag",e).on(null!=h?"touchend.drag-"+h:"mouseup.drag",o,!0);i?(r=i.apply(s,arguments),r=[r.x-d[0],r.y-d[1]]):r=[0,0],null==h&&u(),a({type:"dragstart"})}var n=d(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},as.rebind(t,n,"on")};var ws=function(t,e){return e.querySelector(t)},xs=function(t,e){return e.querySelectorAll(t)},Ss=ls.documentElement,_s=Ss.matchesSelector||Ss.webkitMatchesSelector||Ss.mozMatchesSelector||Ss.msMatchesSelector||Ss.oMatchesSelector,Ts=function(t,e){return _s.call(t,e)};"function"==typeof Sizzle&&(ws=function(t,e){return Sizzle(t,e)[0]||null},xs=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Ts=Sizzle.matchesSelector),as.selection=function(){return Ps};var Es=as.selection.prototype=[];Es.select=function(t){var e,n,i,o,r=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;u>++l;)(o=i[l])?(e.push(n=t.call(o,o.__data__,l)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return m(r)},Es.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=y(t));for(var o=-1,r=this.length;r>++o;)for(var s=this[o],a=-1,l=s.length;l>++a;)(n=s[a])&&(i.push(e=vs(t.call(n,n.__data__,a))),e.parentNode=n);return m(i)};var ks={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};as.ns={prefix:ks,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),ks.hasOwnProperty(n)?{space:ks[n],local:t}:t}},Es.attr=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node();return t=as.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},as.requote=function(t){return t.replace(Cs,"\\$&")};var Cs=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Es.classed=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,o=-1;if(e=n.classList){for(;i>++o;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");i>++o;)if(!x(t[o]).test(e))return!1;return!0}for(e in t)this.each(S(e,t[e]));return this}return this.each(S(t,e))},Es.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(T(n,t[n],e));return this}if(2>i)return us.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(T(t,e,n))},Es.property=function(t,e){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Es.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Es.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Es.append=function(t){function e(){return this.appendChild(ls.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(ls.createElementNS(t.space,t.local))}return t=as.ns.qualify(t),this.select(t.local?n:e)},Es.insert=function(t,e){function n(n,i){return this.insertBefore(ls.createElementNS(this.namespaceURI,t),e.call(this,n,i))}function i(n,i){return this.insertBefore(ls.createElementNS(t.space,t.local),e.call(this,n,i))}return t=as.ns.qualify(t),"function"!=typeof e&&(e=v(e)),this.select(t.local?i:n)},Es.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Es.data=function(t,e){function n(t,n){var i,r,s,a=t.length,c=n.length,d=Math.min(a,c),p=Array(c),f=Array(c),g=Array(a);if(e){var m,v=new o,y=new o,b=[];for(i=-1;a>++i;)m=e.call(r=t[i],r.__data__,i),v.has(m)?g[i]=r:v.set(m,r),b.push(m);for(i=-1;c>++i;)m=e.call(n,s=n[i],i),(r=v.get(m))?(p[i]=r,r.__data__=s):y.has(m)||(f[i]=k(s)),y.set(m,s),v.remove(m);for(i=-1;a>++i;)v.has(b[i])&&(g[i]=t[i])}else{for(i=-1;d>++i;)r=t[i],s=n[i],r?(r.__data__=s,p[i]=r):f[i]=k(s);for(;c>i;++i)f[i]=k(n[i]);for(;a>i;++i)g[i]=t[i]}f.update=p,f.parentNode=p.parentNode=g.parentNode=t.parentNode,l.push(f),u.push(p),h.push(g)}var i,r,s=-1,a=this.length;if(!arguments.length){for(t=Array(a=(i=this[0]).length);a>++s;)(r=i[s])&&(t[s]=r.__data__);return t}var l=H([]),u=m([]),h=m([]);if("function"==typeof t)for(;a>++s;)n(i=this[s],t.call(i,i.parentNode.__data__,s));else for(;a>++s;)n(i=this[s],t);return u.enter=function(){return l},u.exit=function(){return h},u},Es.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Es.filter=function(t){var e,n,i,o=[];"function"!=typeof t&&(t=C(t));for(var r=0,s=this.length;s>r;r++){o.push(e=[]),e.parentNode=(n=this[r]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return m(o)},Es.order=function(){for(var t=-1,e=this.length;e>++t;)for(var n,i=this[t],o=i.length-1,r=i[o];--o>=0;)(n=i[o])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},Es.sort=function(t){t=M.apply(this,arguments);for(var e=-1,n=this.length;n>++e;)this[e].sort(t);return this.order()},Es.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(P(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(P(t,e,n))};var Ms=as.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ms.forEach(function(t){"on"+t in ls&&Ms.remove(t)}),Es.each=function(t){return N(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Es.call=function(t){var e=vs(arguments);return t.apply(e[0]=this,e),this},Es.empty=function(){return!this.node()},Es.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,o=n.length;o>i;i++){var r=n[i];if(r)return r}return null};var zs=[];as.selection.enter=H,as.selection.enter.prototype=zs,zs.append=Es.append,zs.insert=Es.insert,zs.empty=Es.empty,zs.node=Es.node,zs.select=function(t){for(var e,n,i,o,r,s=[],a=-1,l=this.length;l>++a;){i=(o=this[a]).update,s.push(e=[]),e.parentNode=o.parentNode;for(var u=-1,h=o.length;h>++u;)(r=o[u])?(e.push(i[u]=n=t.call(o.parentNode,r.__data__,u)),n.__data__=r.__data__):e.push(null)}return m(s)},Es.transition=function(){var t,e,n=ol||++ll,i=[],o=Object.create(ul);o.time=Date.now();for(var r=-1,s=this.length;s>++r;){i.push(t=[]);for(var a=this[r],l=-1,u=a.length;u>++l;)(e=a[l])&&Sr(e,l,n,o),t.push(e)}return br(i,n)},as.select=function(t){var e=["string"==typeof t?ws(t,ls):t];return e.parentNode=Ss,m([e])},as.selectAll=function(t){var e=vs("string"==typeof t?xs(t,ls):t);return e.parentNode=Ss,m([e])};var Ps=as.select(Ss);as.behavior.zoom=function(){function t(){this.on("mousedown.zoom",a).on("mousemove.zoom",h).on(Ns+".zoom",l).on("dblclick.zoom",p).on("touchstart.zoom",f).on("touchmove.zoom",g).on("touchend.zoom",f)}function e(t){return[(t[0]-_[0])/T,(t[1]-_[1])/T]}function n(t){return[t[0]*T+_[0],t[1]*T+_[1]]
}function i(t){T=Math.max(E[0],Math.min(E[1],t))}function o(t,e){e=n(e),_[0]+=t[0]-e[0],_[1]+=t[1]-e[1]}function r(){b&&b.domain(y.range().map(function(t){return(t-_[0])/T}).map(y.invert)),x&&x.domain(w.range().map(function(t){return(t-_[1])/T}).map(w.invert))}function s(t){r(),as.event.preventDefault(),t({type:"zoom",scale:T,translate:_})}function a(){function t(){l=1,o(as.mouse(i),d),s(r)}function n(){l&&u(),h.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&as.event.target===a&&c(h,"click.zoom")}var i=this,r=k.of(i,arguments),a=as.event.target,l=0,h=as.select(us).on("mousemove.zoom",t).on("mouseup.zoom",n),d=e(as.mouse(i));us.focus(),u()}function l(){m||(m=e(as.mouse(this))),i(Math.pow(2,.002*As())*T),o(as.mouse(this),m),s(k.of(this,arguments))}function h(){m=null}function p(){var t=as.mouse(this),n=e(t),r=Math.log(T)/Math.LN2;i(Math.pow(2,as.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)),o(t,n),s(k.of(this,arguments))}function f(){var t=as.touches(this),n=Date.now();if(v=T,m={},t.forEach(function(t){m[t.identifier]=e(t)}),u(),1===t.length){if(500>n-S){var r=t[0],a=e(t[0]);i(2*T),o(r,a),s(k.of(this,arguments))}S=n}}function g(){var t=as.touches(this),e=t[0],n=m[e.identifier];if(r=t[1]){var r,a=m[r.identifier];e=[(e[0]+r[0])/2,(e[1]+r[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(as.event.scale*v)}o(e,n),S=null,s(k.of(this,arguments))}var m,v,y,b,w,x,S,_=[0,0],T=1,E=Is,k=d(t,"zoom");return t.translate=function(e){return arguments.length?(_=e.map(Number),r(),t):_},t.scale=function(e){return arguments.length?(T=+e,r(),t):T},t.scaleExtent=function(e){return arguments.length?(E=null==e?Is:e.map(Number),t):E},t.x=function(e){return arguments.length?(b=e,y=e.copy(),_=[0,0],T=1,t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),_=[0,0],T=1,t):x},as.rebind(t,k,"on")};var As,Is=[0,1/0],Ns="onwheel"in ls?(As=function(){return-as.event.deltaY*(as.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ls?(As=function(){return as.event.wheelDelta},"mousewheel"):(As=function(){return-as.event.detail},"MozMousePixelScroll");O.prototype.toString=function(){return this.rgb()+""},as.hsl=function(t,e,n){return 1===arguments.length?t instanceof D?L(t.h,t.s,t.l):oe(""+t,re,L):L(+t,+e,+n)};var Hs=D.prototype=new O;Hs.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),L(this.h,this.s,this.l/t)},Hs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),L(this.h,this.s,t*this.l)},Hs.rgb=function(){return R(this.h,this.s,this.l)};var Os=Math.PI,Ls=1e-6,Ds=Os/180,Rs=180/Os;as.hcl=function(t,e,n){return 1===arguments.length?t instanceof $?V(t.h,t.c,t.l):t instanceof X?Y(t.l,t.a,t.b):Y((t=se((t=as.rgb(t)).r,t.g,t.b)).l,t.a,t.b):V(+t,+e,+n)};var js=$.prototype=new O;js.brighter=function(t){return V(this.h,this.c,Math.min(100,this.l+Bs*(arguments.length?t:1)))},js.darker=function(t){return V(this.h,this.c,Math.max(0,this.l-Bs*(arguments.length?t:1)))},js.rgb=function(){return Q(this.h,this.c,this.l).rgb()},as.lab=function(t,e,n){return 1===arguments.length?t instanceof X?G(t.l,t.a,t.b):t instanceof $?Q(t.l,t.c,t.h):se((t=as.rgb(t)).r,t.g,t.b):G(+t,+e,+n)};var Bs=18,Fs=.95047,Ws=1,Us=1.08883,qs=X.prototype=new O;qs.brighter=function(t){return G(Math.min(100,this.l+Bs*(arguments.length?t:1)),this.a,this.b)},qs.darker=function(t){return G(Math.max(0,this.l-Bs*(arguments.length?t:1)),this.a,this.b)},qs.rgb=function(){return Z(this.l,this.a,this.b)},as.rgb=function(t,e,n){return 1===arguments.length?t instanceof ne?ee(t.r,t.g,t.b):oe(""+t,ee,R):ee(~~t,~~e,~~n)};var Vs=ne.prototype=new O;Vs.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,o=30;return e||n||i?(e&&o>e&&(e=o),n&&o>n&&(n=o),i&&o>i&&(i=o),ee(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):ee(o,o,o)},Vs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ee(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},Vs.hsl=function(){return re(this.r,this.g,this.b)},Vs.toString=function(){return"#"+ie(this.r)+ie(this.g)+ie(this.b)};var $s=as.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});$s.forEach(function(t,e){$s.set(t,oe(e,ee,R))}),as.functor=ue,as.xhr=ce(he),as.csv=fe(",","text/csv"),as.tsv=fe("	","text/tab-separated-values");var Qs,Gs,Xs,Zs;as.timer=function(t,e,n){if(3>arguments.length){if(2>arguments.length)e=0;else if(!isFinite(e))return;n=Date.now()}var i=n+e,o={callback:t,time:i,next:null};Gs?Gs.next=o:Qs=o,Gs=o,Xs||(Zs=clearTimeout(Zs),Xs=1,Ys(ge))},as.timer.flush=function(){me(),ve()};var Ys=us.requestAnimationFrame||us.webkitRequestAnimationFrame||us.mozRequestAnimationFrame||us.oRequestAnimationFrame||us.msRequestAnimationFrame||function(t){setTimeout(t,17)},Ks=".",Js=",",ta=[3,3],ea=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(ye);as.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=as.round(t,be(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ea[8+n/3]},as.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},as.format=function(t){var e=na.exec(t),n=e[1]||" ",i=e[2]||">",o=e[3]||"",r=e[4]||"",s=e[5],a=+e[6],l=e[7],u=e[8],h=e[9],c=1,d="",p=!1;switch(u&&(u=+u.substring(1)),(s||"0"===n&&"="===i)&&(s=n="0",i="=",l&&(a-=Math.floor((a-1)/4))),h){case"n":l=!0,h="g";break;case"%":c=100,d="%",h="f";break;case"p":c=100,d="%",h="r";break;case"b":case"o":case"x":case"X":r&&(r="0"+h.toLowerCase());case"c":case"d":p=!0,u=0;break;case"s":c=-1,h="r"}"#"===r&&(r=""),"r"!=h||u||(h="g"),null!=u&&("g"==h?u=Math.max(1,Math.min(21,u)):("e"==h||"f"==h)&&(u=Math.max(0,Math.min(20,u)))),h=ia.get(h)||we;var f=s&&l;return function(t){if(p&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):o;if(0>c){var g=as.formatPrefix(t,u);t=g.scale(t),d=g.symbol}else t*=c;t=h(t,u),!s&&l&&(t=oa(t));var m=r.length+t.length+(f?0:e.length),v=a>m?Array(m=a-m+1).join(n):"";return f&&(t=oa(v+t)),Ks&&t.replace(".",Ks),e+=r,("<"===i?e+t+v:">"===i?v+e+t:"^"===i?v.substring(0,m>>=1)+e+t+v.substring(m):e+(f?t:v+t))+d}};var na=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ia=as.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=as.round(t,be(t,e))).toFixed(Math.max(0,Math.min(20,be(t*(1+1e-15),e))))}}),oa=he;if(ta){var ra=ta.length;oa=function(t){for(var e=t.lastIndexOf("."),n=e>=0?"."+t.substring(e+1):(e=t.length,""),i=[],o=0,r=ta[0];e>0&&r>0;)i.push(t.substring(e-=r,e+r)),r=ta[o=(o+1)%ra];return i.reverse().join(Js||"")+n}}as.geo={},as.geo.stream=function(t,e){t&&sa.hasOwnProperty(t.type)?sa[t.type](t,e):xe(t,e)};var sa={Feature:function(t,e){xe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;o>++i;)xe(n[i].geometry,e)}},aa={Sphere:function(t,e){e.sphere()},Point:function(t,e){var n=t.coordinates;e.point(n[0],n[1])},MultiPoint:function(t,e){for(var n,i=t.coordinates,o=-1,r=i.length;r>++o;)n=i[o],e.point(n[0],n[1])},LineString:function(t,e){Se(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;o>++i;)Se(n[i],e,0)},Polygon:function(t,e){_e(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;o>++i;)_e(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;o>++i;)xe(n[i],e)}};as.geo.area=function(t){return la=0,as.geo.stream(t,ha),la};var la,ua,ha={sphere:function(){la+=4*Os},point:z,lineStart:z,lineEnd:z,polygonStart:function(){ua=0,ha.lineStart=Te},polygonEnd:function(){var t=2*ua;la+=0>t?4*Os+t:t,ha.lineStart=ha.lineEnd=ha.point=z}};as.geo.bounds=function(){function t(t,e){b.push(w=[h=t,d=t]),c>e&&(c=e),e>p&&(p=e)}function e(e,n){var i=Ee([e*Ds,n*Ds]);if(v){var o=Ce(v,i),r=[o[1],-o[0],0],s=Ce(r,o);Pe(s),s=Ae(s);var l=e-f,u=l>0?1:-1,g=s[0]*Rs*u,m=Math.abs(l)>180;if(m^(g>u*f&&u*e>g)){var y=s[1]*Rs;y>p&&(p=y)}else if(g=(g+360)%360-180,m^(g>u*f&&u*e>g)){var y=-s[1]*Rs;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?f>e?a(h,e)>a(h,d)&&(d=e):a(e,d)>a(h,d)&&(h=e):d>=h?(h>e&&(h=e),e>d&&(d=e)):e>f?a(h,e)>a(h,d)&&(d=e):a(e,d)>a(h,d)&&(h=e)}else t(e,n);v=i,f=e}function n(){x.point=e}function i(){w[0]=h,w[1]=d,x.point=t,v=null}function o(t,n){if(v){var i=t-f;y+=Math.abs(i)>180?i+(i>0?360:-360):i}else g=t,m=n;ha.point(t,n),e(t,n)}function r(){ha.lineStart()}function s(){o(g,m),ha.lineEnd(),Math.abs(y)>Ls&&(h=-(d=180)),w[0]=h,w[1]=d,v=null}function a(t,e){return 0>(e-=t)?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?t>=e[0]&&e[1]>=t:e[0]>t||t>e[1]}var h,c,d,p,f,g,m,v,y,b,w,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=o,x.lineStart=r,x.lineEnd=s,y=0,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,0>ua?(h=-(d=180),c=-(p=90)):y>Ls?p=90:-Ls>y&&(c=-90),w[0]=h,w[1]=d}};return function(t){p=d=-(h=c=1/0),b=[],as.geo.stream(t,x),b.sort(l);for(var e,n=1,i=b.length,o=b[0],r=[o];i>n;++n)e=b[n],u(e[0],o)||u(e[1],o)?(a(o[0],e[1])>a(o[0],o[1])&&(o[1]=e[1]),a(e[0],o[1])>a(o[0],o[1])&&(o[0]=e[0])):r.push(o=e);for(var s,e,f=-1/0,i=r.length-1,n=0,o=r[i];i>=n;o=e,++n)e=r[n],(s=a(o[1],e[0]))>f&&(f=s,h=e[0],d=o[1]);return b=w=null,[[h,c],[d,p]]}}(),as.geo.centroid=function(t){ca=da=pa=fa=ga=0,as.geo.stream(t,ma);var e;return da&&Math.abs(e=Math.sqrt(pa*pa+fa*fa+ga*ga))>Ls?[Math.atan2(fa,pa)*Rs,Math.asin(Math.max(-1,Math.min(1,ga/e)))*Rs]:void 0};var ca,da,pa,fa,ga,ma={sphere:function(){2>ca&&(ca=2,da=pa=fa=ga=0)},point:Ne,lineStart:Oe,lineEnd:Le,polygonStart:function(){2>ca&&(ca=2,da=pa=fa=ga=0),ma.lineStart=He},polygonEnd:function(){ma.lineStart=Oe}},va=Be(De,Ve,Qe),ya=1e9;as.geo.projection=Je,as.geo.projectionMutator=tn,(as.geo.equirectangular=function(){return Je(nn)}).raw=nn.invert=nn,as.geo.rotation=function(t){function e(e){return e=t(e[0]*Ds,e[1]*Ds),e[0]*=Rs,e[1]*=Rs,e}return t=on(t[0]%360*Ds,t[1]*Ds,t.length>2?t[2]*Ds:0),e.invert=function(e){return e=t.invert(e[0]*Ds,e[1]*Ds),e[0]*=Rs,e[1]*=Rs,e},e},as.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=on(-t[0]*Ds,-t[1]*Ds,0).invert,o=[];return n(null,null,1,{point:function(t,n){o.push(t=e(t,n)),t[0]*=Rs,t[1]*=Rs}}),{type:"Polygon",coordinates:[o]}}var e,n,i=[0,0],o=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=ln((e=+i)*Ds,o*Ds),t):e},t.precision=function(i){return arguments.length?(n=ln(e*Ds,(o=+i)*Ds),t):o},t.angle(90)},as.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ds,o=t[1]*Ds,r=e[1]*Ds,s=Math.sin(i),a=Math.cos(i),l=Math.sin(o),u=Math.cos(o),h=Math.sin(r),c=Math.cos(r);return Math.atan2(Math.sqrt((n=c*s)*n+(n=u*h-l*c*a)*n),l*h+u*c*a)},as.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return as.range(Math.ceil(r/m)*m,o,m).map(d).concat(as.range(Math.ceil(u/v)*v,l,v).map(p)).concat(as.range(Math.ceil(i/f)*f,n,f).filter(function(t){return Math.abs(t%m)>Ls}).map(h)).concat(as.range(Math.ceil(a/g)*g,s,g).filter(function(t){return Math.abs(t%v)>Ls}).map(c))}var n,i,o,r,s,a,l,u,h,c,d,p,f=10,g=f,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(p(l).slice(1),d(o).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(r=+e[0][0],o=+e[1][0],u=+e[0][1],l=+e[1][1],r>o&&(e=r,r=o,o=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[r,u],[o,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(y)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(y=+e,h=hn(a,s,90),c=cn(i,n,y),d=hn(u,l,90),p=cn(r,o,y),t):y},t.majorExtent([[-180,-90+Ls],[180,90-Ls]]).minorExtent([[-180,-80-Ls],[180,80+Ls]])},as.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||o.apply(this,arguments)]}}var e,n,i=dn,o=pn;return t.distance=function(){return as.geo.distance(e||i.apply(this,arguments),n||o.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(o=e,n="function"==typeof e?null:e,t):o},t.precision=function(){return arguments.length?t:0},t},as.geo.interpolate=function(t,e){return fn(t[0]*Ds,t[1]*Ds,e[0]*Ds,e[1]*Ds)},as.geo.length=function(t){return ba=0,as.geo.stream(t,wa),ba};var ba,wa={sphere:z,point:z,lineStart:gn,lineEnd:z,polygonStart:z,polygonEnd:z};(as.geo.conicEqualArea=function(){return mn(vn)}).raw=vn,as.geo.albers=function(){return as.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},as.geo.albersUsa=function(){function t(t){var r=t[0],s=t[1];return e=null,n(r,s),e||(i(r,s),e)||o(r,s),e}var e,n,i,o,r=as.geo.albers(),s=as.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=as.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=r.scale(),n=r.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&.234>o&&i>=-.425&&-.214>i?s:o>=.166&&.234>o&&i>=-.214&&-.115>i?a:r).invert(t)},t.stream=function(t){var e=r.stream(t),n=s.stream(t),i=a.stream(t);return{point:function(t,o){e.point(t,o),n.point(t,o),i.point(t,o)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(r.precision(e),s.precision(e),a.precision(e),t):r.precision()},t.scale=function(e){return arguments.length?(r.scale(e),s.scale(.35*e),a.scale(e),t.translate(r.translate())):r.scale()},t.translate=function(e){if(!arguments.length)return r.translate();var u=r.scale(),h=+e[0],c=+e[1];return n=r.translate(e).clipExtent([[h-.455*u,c-.238*u],[h+.455*u,c+.238*u]]).stream(l).point,i=s.translate([h-.307*u,c+.201*u]).clipExtent([[h-.425*u+Ls,c+.12*u+Ls],[h-.214*u-Ls,c+.234*u-Ls]]).stream(l).point,o=a.translate([h-.205*u,c+.212*u]).clipExtent([[h-.214*u+Ls,c+.166*u+Ls],[h-.115*u-Ls,c+.234*u-Ls]]).stream(l).point,t},t.scale(1070)};var xa,Sa,_a,Ta,Ea,ka,Ca={point:z,lineStart:z,lineEnd:z,polygonStart:function(){Sa=0,Ca.lineStart=yn},polygonEnd:function(){Ca.lineStart=Ca.lineEnd=Ca.point=z,xa+=Math.abs(Sa/2)}},Ma={point:bn,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z},za={point:Sn,lineStart:_n,lineEnd:Tn,polygonStart:function(){za.lineStart=En},polygonEnd:function(){za.point=Sn,za.lineStart=_n,za.lineEnd=Tn}};as.geo.path=function(){function t(t){return t&&as.geo.stream(t,i(o.pointRadius("function"==typeof r?+r.apply(this,arguments):r))),o.result()}var e,n,i,o,r=4.5;return t.area=function(t){return xa=0,as.geo.stream(t,i(Ca)),xa},t.centroid=function(t){return ca=pa=fa=ga=0,as.geo.stream(t,i(za)),ga?[pa/ga,fa/ga]:void 0},t.bounds=function(t){return Ea=ka=-(_a=Ta=1/0),as.geo.stream(t,i(Ma)),[[_a,Ta],[Ea,ka]]},t.projection=function(n){return arguments.length?(i=(e=n)?n.stream||Cn(n):he,t):e},t.context=function(e){return arguments.length?(o=null==(n=e)?new wn:new kn(e),t):n},t.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:+e,t):r},t.projection(as.geo.albersUsa()).context(null)};var Pa=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(as.geo.azimuthalEqualArea=function(){return Je(Pa)}).raw=Pa;var Aa=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},he);(as.geo.azimuthalEquidistant=function(){return Je(Aa)}).raw=Aa,(as.geo.conicConformal=function(){return mn(zn)}).raw=zn,(as.geo.conicEquidistant=function(){return mn(Pn)}).raw=Pn;var Ia=Mn(function(t){return 1/t},Math.atan);(as.geo.gnomonic=function(){return Je(Ia)}).raw=Ia,An.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Os/2]},(as.geo.mercator=function(){return In(An)}).raw=An;var Na=Mn(function(){return 1},Math.asin);(as.geo.orthographic=function(){return Je(Na)}).raw=Na;var Ha=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(as.geo.stereographic=function(){return Je(Ha)}).raw=Ha,Nn.invert=function(t,e){return[Math.atan2(W(t),Math.cos(e)),F(Math.sin(e)/U(t))]},(as.geo.transverseMercator=function(){return In(Nn)}).raw=Nn,as.geom={},as.svg={},as.svg.line=function(){return Hn(he)};var Oa=as.map({linear:Dn,"linear-closed":Rn,"step-before":jn,"step-after":Bn,basis:$n,"basis-open":Qn,"basis-closed":Gn,bundle:Xn,cardinal:Un,"cardinal-open":Fn,"cardinal-closed":Wn,monotone:ei});Oa.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var La=[0,2/3,1/3,0],Da=[0,1/3,2/3,0],Ra=[0,1/6,2/3,1/6];as.geom.hull=function(t){function e(t){if(3>t.length)return[];var e,o,r,s,a,l,u,h,c,d,p,f,g=ue(n),m=ue(i),v=t.length,y=v-1,b=[],w=[],x=0;if(g===On&&i===Ln)e=t;else for(r=0,e=[];v>r;++r)e.push([+g.call(this,o=t[r],r),+m.call(this,o,r)]);for(r=1;v>r;++r)(e[r][1]<e[x][1]||e[r][1]==e[x][1]&&e[r][0]<e[x][0])&&(x=r);for(r=0;v>r;++r)r!==x&&(l=e[r][1]-e[x][1],a=e[r][0]-e[x][0],b.push({angle:Math.atan2(l,a),index:r}));for(b.sort(function(t,e){return t.angle-e.angle}),p=b[0].angle,d=b[0].index,c=0,r=1;y>r;++r){if(s=b[r].index,p==b[r].angle){if(a=e[d][0]-e[x][0],l=e[d][1]-e[x][1],u=e[s][0]-e[x][0],h=e[s][1]-e[x][1],a*a+l*l>=u*u+h*h){b[r].index=-1;continue}b[c].index=-1}p=b[r].angle,c=r,d=s}for(w.push(x),r=0,s=0;2>r;++s)b[s].index>-1&&(w.push(b[s].index),r++);for(f=w.length;y>s;++s)if(!(0>b[s].index)){for(;!ni(w[f-2],w[f-1],b[s].index,e);)--f;w[f++]=b[s].index}var S=[];for(r=f-1;r>=0;--r)S.push(t[w[r]]);return S}var n=On,i=Ln;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},as.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];n>++e;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return.5*i},t.centroid=function(e){var n,i,o=-1,r=t.length,s=0,a=0,l=t[r-1];for(arguments.length||(e=-1/(6*t.area()));r>++o;)n=l,l=t[o],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*e,a*e]},t.clip=function(e){for(var n,i,o,r,s,a,l=-1,u=t.length,h=t[u-1];u>++l;){for(n=e.slice(),e.length=0,r=t[l],s=n[(o=n.length)-1],i=-1;o>++i;)a=n[i],ii(a,h,r)?(ii(s,h,r)||e.push(oi(s,a,h,r)),e.push(a)):ii(s,h,r)&&e.push(oi(s,a,h,r)),s=a;h=r}return e},t},as.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return ri(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var o=t[i],r=o[0],s=o[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-r,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([o,e[a],e[a+1]])}),n},as.geom.voronoi=function(t){function e(t){var e,i,s,a=t.map(function(){return[]}),l=ue(o),u=ue(r),h=t.length,c=1e6;if(l===On&&u===Ln)e=t;else for(e=[],s=0;h>s;++s)e.push([+l.call(this,i=t[s],s),+u.call(this,i,s)]);if(ri(e,function(t){var e,n,i,o,r,s;1===t.a&&t.b>=0?(e=t.ep.r,n=t.ep.l):(e=t.ep.l,n=t.ep.r),1===t.a?(r=e?e.y:-c,i=t.c-t.b*r,s=n?n.y:c,o=t.c-t.b*s):(i=e?e.x:-c,r=t.c-t.a*i,o=n?n.x:c,s=t.c-t.a*o);var l=[i,r],u=[o,s];a[t.region.l.index].push(l,u),a[t.region.r.index].push(l,u)}),a=a.map(function(t,n){var i=e[n][0],o=e[n][1],r=t.map(function(t){return Math.atan2(t[0]-i,t[1]-o)}),s=as.range(t.length).sort(function(t,e){return r[t]-r[e]});return s.filter(function(t,e){return!e||r[t]-r[s[e-1]]>Ls}).map(function(e){return t[e]})}),a.forEach(function(t,n){var i=t.length;if(!i)return t.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(i>2)){var o=e[n],r=t[0],s=t[1],a=o[0],l=o[1],u=r[0],h=r[1],d=s[0],p=s[1],f=Math.abs(d-u),g=p-h;if(Ls>Math.abs(g)){var m=h>l?-c:c;t.push([-c,m],[c,m])}else if(Ls>f){var v=u>a?-c:c;t.push([v,-c],[v,c])}else{var m=(u-a)*(p-h)>(d-u)*(h-l)?c:-c,y=Math.abs(g)-f;Ls>Math.abs(y)?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-c,m],[c,m]))}}}),n)for(s=0;h>s;++s)n(a[s]);for(s=0;h>s;++s)a[s].point=t[s];return a}var n,i=null,o=On,r=Ln;return arguments.length?e(t):(e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(r=t,e):r},e.size=function(t){return arguments.length?(null==t?n=null:(i=[+t[0],+t[1]],n=as.geom.polygon([[0,0],[0,i[1]],i,[i[0],0]]).clip),e):i},e.links=function(t){var e,n,i,s=t.map(function(){return[]}),a=[],l=ue(o),u=ue(r),h=t.length;if(l===On&&u===Ln)e=t;else for(i=0;h>i;++i)e.push([+l.call(this,n=t[i],i),+u.call(this,n,i)]);return ri(e,function(e){var n=e.region.l.index,i=e.region.r.index;s[n][i]||(s[n][i]=s[i][n]=!0,a.push({source:t[n],target:t[i]}))}),a},e.triangles=function(t){if(o===On&&r===Ln)return as.geom.delaunay(t);var e,n,i,s,a,l=ue(o),u=ue(r);for(s=0,e=[],a=t.length;a>s;++s)n=[+l.call(this,i=t[s],s),+u.call(this,i,s)],n.data=i,e.push(n);return as.geom.delaunay(e).map(function(t){return t.map(function(t){return t.data})})},e)};var ja={l:"r",r:"l"};as.geom.quadtree=function(t,e,n,i,o){function r(t){function r(t,e,n,i,o,r,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,h=t.y;if(null!=l)if(.01>Math.abs(l-n)+Math.abs(h-i))u(t,e,n,i,o,r,s,a);else{var c=t.point;t.x=t.y=t.point=null,u(t,c,l,h,o,r,s,a),u(t,e,n,i,o,r,s,a)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,o,r,s,a)}function u(t,e,n,i,o,s,a,l){var u=.5*(o+a),h=.5*(s+l),c=n>=u,d=i>=h,p=(d<<1)+c;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=li()),c?o=u:a=u,d?s=h:l=h,r(t,e,n,i,o,s,a,l)}var h,c,d,p,f,g,m,v,y,b=ue(a),w=ue(l);if(null!=e)g=e,m=n,v=i,y=o;else if(v=y=-(g=m=1/0),c=[],d=[],f=t.length,s)for(p=0;f>p;++p)h=t[p],g>h.x&&(g=h.x),m>h.y&&(m=h.y),h.x>v&&(v=h.x),h.y>y&&(y=h.y),c.push(h.x),d.push(h.y);else for(p=0;f>p;++p){var x=+b(h=t[p],p),S=+w(h,p);g>x&&(g=x),m>S&&(m=S),x>v&&(v=x),S>y&&(y=S),c.push(x),d.push(S)}var _=v-g,T=y-m;_>T?y=m+_:v=g+T;var E=li();if(E.add=function(t){r(E,t,+b(t,++p),+w(t,p),g,m,v,y)},E.visit=function(t){ui(t,E,g,m,v,y)},p=-1,null==e){for(;f>++p;)r(E,t[p],c[p],d[p],g,m,v,y);--p}else t.forEach(E.add);return c=d=t=h=null,E}var s,a=On,l=Ln;return(s=arguments.length)?(a=si,l=ai,3===s&&(o=n,i=e,n=e=0),r(t)):(r.x=function(t){return arguments.length?(a=t,r):a},r.y=function(t){return arguments.length?(l=t,r):l},r.size=function(t){return arguments.length?(null==t?e=n=i=o=null:(e=n=0,i=+t[0],o=+t[1]),r):null==e?null:[i,o]},r)},as.interpolateRgb=hi,as.transform=function(t){var e=ls.createElementNS(as.ns.prefix.svg,"g");return(as.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new ci(n?n.matrix:Ba)})(t)},ci.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ba={a:1,b:0,c:0,d:1,e:0,f:0};as.interpolateNumber=gi,as.interpolateTransform=mi,as.interpolateObject=vi,as.interpolateString=yi;var Fa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;as.interpolate=bi,as.interpolators=[function(t,e){var n=typeof e;return("string"===n?$s.has(e)||/^(#|rgb\(|hsl\()/.test(e)?hi:yi:e instanceof O?hi:"object"===n?Array.isArray(e)?xi:vi:gi)(t,e)}],as.interpolateArray=xi;var Wa=function(){return he},Ua=as.map({linear:Wa,poly:Mi,quad:function(){return Ei},cubic:function(){return ki},sin:function(){return zi},exp:function(){return Pi},circle:function(){return Ai},elastic:Ii,back:Ni,bounce:function(){return Hi}}),qa=as.map({"in":he,out:_i,"in-out":Ti,"out-in":function(t){return Ti(_i(t))}});as.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=Ua.get(n)||Wa,i=qa.get(i)||he,Si(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},as.interpolateHcl=Oi,as.interpolateHsl=Li,as.interpolateLab=Di,as.interpolateRound=Ri,as.layout={},as.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;i>++n;)e.push(Fi(t[n]));return e}},as.layout.chord=function(){function t(){var t,u,c,d,p,f={},g=[],m=as.range(r),v=[];for(n=[],i=[],t=0,d=-1;r>++d;){for(u=0,p=-1;r>++p;)u+=o[d][p];g.push(u),v.push(as.range(r)),t+=u}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(o[e][t],o[e][n])})}),t=(2*Os-h*r)/t,u=0,d=-1;r>++d;){for(c=u,p=-1;r>++p;){var y=m[d],b=v[y][p],w=o[y][b],x=u,S=u+=w*t;f[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:S,value:w}}i[y]={index:y,startAngle:c,endAngle:u,value:(u-c)/t},u+=h}for(d=-1;r>++d;)for(p=d-1;r>++p;){var _=f[d+"-"+p],T=f[p+"-"+d];(_.value||T.value)&&n.push(_.value<T.value?{source:T,target:_}:{source:_,target:T})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,o,r,s,a,l,u={},h=0;return u.matrix=function(t){return arguments.length?(r=(o=t)&&o.length,n=i=null,u):o},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(s=t,n=i=null,u):s},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},as.layout.force=function(){function t(t){return function(e,n,i,o){if(e.point!==t){var r=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(r*r+s*s);if(g>(o-n)*a){var l=e.charge*a*a;return t.px-=r*l,t.py-=s*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=r*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=as.event.x,t.py=as.event.y,a.resume()}var n,i,o,r,s,a={},l=as.dispatch("start","tick","end"),u=[1,1],h=.9,c=Va,d=$a,p=-30,f=.1,g=.8,m=[],v=[];return a.tick=function(){if(.005>(i*=.99))return l.end({type:"end",alpha:i=0}),!0;var e,n,a,c,d,g,y,b,w,x=m.length,S=v.length;for(n=0;S>n;++n)a=v[n],c=a.source,d=a.target,b=d.x-c.x,w=d.y-c.y,(g=b*b+w*w)&&(g=i*r[n]*((g=Math.sqrt(g))-o[n])/g,b*=g,w*=g,d.x-=b*(y=c.weight/(d.weight+c.weight)),d.y-=w*y,c.x+=b*(y=1-y),c.y+=w*y);if((y=i*f)&&(b=u[0]/2,w=u[1]/2,n=-1,y))for(;x>++n;)a=m[n],a.x+=(b-a.x)*y,a.y+=(w-a.y)*y;if(p)for(Gi(e=as.geom.quadtree(m),i,s),n=-1;x>++n;)(a=m[n]).fixed||e.visit(t(a));for(n=-1;x>++n;)a=m[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*h,a.y-=(a.py-(a.py=a.y))*h);l.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(m=t,a):m},a.links=function(t){return arguments.length?(v=t,a):v},a.size=function(t){return arguments.length?(u=t,a):u},a.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,a):c},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,a):d},a.friction=function(t){return arguments.length?(h=+t,a):h},a.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.gravity=function(t){return arguments.length?(f=+t,a):f},a.theta=function(t){return arguments.length?(g=+t,a):g},a.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),as.timer(a.tick)),a):i},a.start=function(){function t(t,i){for(var o,r=e(n),s=-1,a=r.length;a>++s;)if(!isNaN(o=r[s][t]))return o;return Math.random()*i}function e(){if(!l){for(l=[],i=0;f>i;++i)l[i]=[];for(i=0;g>i;++i){var t=v[i];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,i,l,h,f=m.length,g=v.length,y=u[0],b=u[1];for(n=0;f>n;++n)(h=m[n]).index=n,h.weight=0;for(n=0;g>n;++n)h=v[n],"number"==typeof h.source&&(h.source=m[h.source]),"number"==typeof h.target&&(h.target=m[h.target]),++h.source.weight,++h.target.weight;for(n=0;f>n;++n)h=m[n],isNaN(h.x)&&(h.x=t("x",y)),isNaN(h.y)&&(h.y=t("y",b)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);if(o=[],"function"==typeof c)for(n=0;g>n;++n)o[n]=+c.call(this,v[n],n);else for(n=0;g>n;++n)o[n]=c;if(r=[],"function"==typeof d)for(n=0;g>n;++n)r[n]=+d.call(this,v[n],n);else for(n=0;g>n;++n)r[n]=d;if(s=[],"function"==typeof p)for(n=0;f>n;++n)s[n]=+p.call(this,m[n],n);else for(n=0;f>n;++n)s[n]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=as.behavior.drag().origin(he).on("dragstart.force",qi).on("drag.force",e).on("dragend.force",Vi)),arguments.length?(this.on("mouseover.force",$i).on("mouseout.force",Qi).call(n),void 0):n},as.rebind(a,l,"on")};var Va=20,$a=1;as.layout.hierarchy=function(){function t(e,s,a){var l=o.call(n,e,s);if(e.depth=s,a.push(e),l&&(u=l.length)){for(var u,h,c=-1,d=e.children=[],p=0,f=s+1;u>++c;)h=t(l[c],f,a),h.parent=e,d.push(h),p+=h.value;i&&d.sort(i),r&&(e.value=p)}else r&&(e.value=+r.call(n,e,s)||0);
return e}function e(t,i){var o=t.children,s=0;if(o&&(a=o.length))for(var a,l=-1,u=i+1;a>++l;)s+=e(o[l],u);else r&&(s=+r.call(n,t,i)||0);return r&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=Ki,o=Zi,r=Yi;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(o=t,n):o},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return e(t,0),t},n},as.layout.partition=function(){function t(e,n,i,o){var r=e.children;if(e.x=n,e.y=e.depth*o,e.dx=i,e.dy=o,r&&(s=r.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;s>++u;)t(a=r[u],n,l=a.value*i,o),n+=l}}function e(t){var n=t.children,i=0;if(n&&(o=n.length))for(var o,r=-1;o>++r;)i=Math.max(i,e(n[r]));return 1+i}function n(n,r){var s=i.call(this,n,r);return t(s[0],0,o[0],o[1]/e(s[0])),s}var i=as.layout.hierarchy(),o=[1,1];return n.size=function(t){return arguments.length?(o=t,n):o},Xi(n,i)},as.layout.pie=function(){function t(r){var s=r.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof o?o.apply(this,arguments):o)-a)/as.sum(s),u=as.range(r.length);null!=n&&u.sort(n===Qa?function(t,e){return s[e]-s[t]}:function(t,e){return n(r[t],r[e])});var h=[];return u.forEach(function(t){var e;h[t]={data:r[t],value:e=s[t],startAngle:a,endAngle:a+=e*l}}),h}var e=Number,n=Qa,i=0,o=2*Os;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(o=e,t):o},t};var Qa={};as.layout.stack=function(){function t(a,l){var u=a.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[r.call(t,e,n),s.call(t,e,n)]})}),c=n.call(t,h,l);u=as.permute(u,c),h=as.permute(h,c);var d,p,f,g=i.call(t,h,l),m=u.length,v=u[0].length;for(p=0;v>p;++p)for(o.call(t,u[0][p],f=g[p],h[0][p][1]),d=1;m>d;++d)o.call(t,u[d][p],f+=h[d-1][p][1],h[d][p][1]);return a}var e=he,n=io,i=oo,o=no,r=to,s=eo;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Ga.get(e)||io,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Xa.get(e)||oo,t):i},t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(o=e,t):o},t};var Ga=as.map({"inside-out":function(t){var e,n,i=t.length,o=t.map(ro),r=t.map(so),s=as.range(i).sort(function(t,e){return o[t]-o[e]}),a=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=s[e],l>a?(a+=r[n],u.push(n)):(l+=r[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return as.range(t.length).reverse()},"default":io}),Xa=as.map({silhouette:function(t){var e,n,i,o=t.length,r=t[0].length,s=[],a=0,l=[];for(n=0;r>n;++n){for(e=0,i=0;o>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;r>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,o,r,s,a,l,u,h=t.length,c=t[0],d=c.length,p=[];for(p[0]=l=u=0,n=1;d>n;++n){for(e=0,o=0;h>e;++e)o+=t[e][n][1];for(e=0,r=0,a=c[n][0]-c[n-1][0];h>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;r+=s*t[e][n][1]}p[n]=l-=o?r/o*a:0,u>l&&(u=l)}for(n=0;d>n;++n)p[n]-=u;return p},expand:function(t){var e,n,i,o=t.length,r=t[0].length,s=1/o,a=[];for(n=0;r>n;++n){for(e=0,i=0;o>e;e++)i+=t[e][n][1];if(i)for(e=0;o>e;e++)t[e][n][1]/=i;else for(e=0;o>e;e++)t[e][n][1]=s}for(n=0;r>n;++n)a[n]=0;return a},zero:oo});as.layout.histogram=function(){function t(t,r){for(var s,a,l=[],u=t.map(n,this),h=i.call(this,u,r),c=o.call(this,h,u,r),r=-1,d=u.length,p=c.length-1,f=e?1:1/d;p>++r;)s=l[r]=[],s.dx=c[r+1]-(s.x=c[r]),s.y=0;if(p>0)for(r=-1;d>++r;)a=u[r],a>=h[0]&&h[1]>=a&&(s=l[as.bisect(c,a,1,p)-1],s.y+=f,s.push(t[r]));return l}var e=!0,n=Number,i=ho,o=lo;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=ue(e),t):i},t.bins=function(e){return arguments.length?(o="number"==typeof e?function(t){return uo(t,e)}:ue(e),t):o},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},as.layout.tree=function(){function t(t,o){function r(t,e){var i=t.children,o=t._tree;if(i&&(s=i.length)){for(var s,l,u,h=i[0],c=h,d=-1;s>++d;)u=i[d],r(u,l),c=a(u,l,c),l=u;wo(t);var p=.5*(h._tree.prelim+u._tree.prelim);e?(o.prelim=e._tree.prelim+n(t,e),o.mod=o.prelim-p):o.prelim=p}else e&&(o.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,o=-1;for(e+=t._tree.mod;i>++o;)s(n[o],e)}}function a(t,e,i){if(e){for(var o,r=t,s=t,a=e,l=t.parent.children[0],u=r._tree.mod,h=s._tree.mod,c=a._tree.mod,d=l._tree.mod;a=fo(a),r=po(r),a&&r;)l=po(l),s=fo(s),s._tree.ancestor=t,o=a._tree.prelim+c-r._tree.prelim-u+n(a,r),o>0&&(xo(So(a,t,i),t,o),u+=o,h+=o),c+=a._tree.mod,u+=r._tree.mod,d+=l._tree.mod,h+=s._tree.mod;a&&!fo(s)&&(s._tree.thread=a,s._tree.mod+=c-h),r&&!po(l)&&(l._tree.thread=r,l._tree.mod+=u-d,i=t)}return i}var l=e.call(this,t,o),u=l[0];bo(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),r(u),s(u,-u._tree.prelim);var h=go(u,vo),c=go(u,mo),d=go(u,yo),p=h.x-n(h,c)/2,f=c.x+n(c,h)/2,g=d.depth||1;return bo(u,function(t){t.x=(t.x-p)/(f-p)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=as.layout.hierarchy().sort(null).value(null),n=co,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Xi(t,e)},as.layout.pack=function(){function t(t,o){var r=e.call(this,t,o),s=r[0];s.x=0,s.y=0,bo(s,function(t){t.r=Math.sqrt(t.value)}),bo(s,Co);var a=i[0],l=i[1],u=Math.max(2*s.r/a,2*s.r/l);if(n>0){var h=n*u/2;bo(s,function(t){t.r+=h}),bo(s,Co),bo(s,function(t){t.r-=h}),u=Math.max(2*s.r/a,2*s.r/l)}return Po(s,a/2,l/2,1/u),r}var e=as.layout.hierarchy().sort(_o),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},Xi(t,e)},as.layout.cluster=function(){function t(t,o){var r,s=e.call(this,t,o),a=s[0],l=0;bo(a,function(t){var e=t.children;e&&e.length?(t.x=No(e),t.y=Io(e)):(t.x=r?l+=n(t,r):0,t.y=0,r=t)});var u=Ho(a),h=Oo(a),c=u.x-n(u,h)/2,d=h.x+n(h,u)/2;return bo(a,function(t){t.x=(t.x-c)/(d-c)*i[0],t.y=(1-(a.y?t.y/a.y:1))*i[1]}),s}var e=as.layout.hierarchy().sort(null).value(null),n=co,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Xi(t,e)},as.layout.treemap=function(){function t(t,e){for(var n,i,o=-1,r=t.length;r>++o;)i=(n=t[o]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var r=n.children;if(r&&r.length){var s,a,l,u=c(n),h=[],d=r.slice(),f=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),h.area=0;(l=d.length)>0;)h.push(s=d[l-1]),h.area+=s.area,"squarify"!==p||f>=(a=i(h,g))?(d.pop(),f=a):(h.area-=h.pop().area,o(h,g,u,!1),g=Math.min(u.dx,u.dy),h.length=h.area=0,f=1/0);h.length&&(o(h,g,u,!0),h.length=h.area=0),r.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var r,s=c(e),a=i.slice(),l=[];for(t(a,s.dx*s.dy/e.value),l.area=0;r=a.pop();)l.push(r),l.area+=r.area,null!=r.z&&(o(l,r.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,o=0,r=1/0,s=-1,a=t.length;a>++s;)(n=t[s].area)&&(r>n&&(r=n),n>o&&(o=n));return i*=i,e*=e,i?Math.max(e*o*f/i,i/(e*r*f)):1/0}function o(t,e,n,i){var o,r=-1,s=t.length,a=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);s>++r;)o=t[r],o.x=a,o.y=u,o.dy=h,a+=o.dx=Math.min(n.x+n.dx-a,h?l(o.area/h):0);o.z=!0,o.dx+=n.x+n.dx-a,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);s>++r;)o=t[r],o.x=a,o.y=u,o.dx=h,u+=o.dy=Math.min(n.y+n.dy-u,h?l(o.area/h):0);o.z=!1,o.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function r(i){var o=s||a(i),r=o[0];return r.x=0,r.y=0,r.dx=u[0],r.dy=u[1],s&&a.revalue(r),t([r],r.dx*r.dy/r.value),(s?n:e)(r),d&&(s=o),o}var s,a=as.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=Lo,d=!1,p="squarify",f=.5*(1+Math.sqrt(5));return r.size=function(t){return arguments.length?(u=t,r):u},r.padding=function(t){function e(e){var n=t.call(r,e,e.depth);return null==n?Lo(e):Do(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Do(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Lo:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,r},r.round=function(t){return arguments.length?(l=t?Math.round:Number,r):l!=Number},r.sticky=function(t){return arguments.length?(d=t,s=null,r):d},r.ratio=function(t){return arguments.length?(f=t,r):f},r.mode=function(t){return arguments.length?(p=t+"",r):p},Xi(r,a)},as.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,o;do n=2*Math.random()-1,i=2*Math.random()-1,o=n*n+i*i;while(!o||o>1);return t+e*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=as.random.normal.apply(as,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},as.scale={},as.scale.linear=function(){return Uo([0,1],[0,1],bi,!1)},as.scale.log=function(){return Xo(as.scale.linear().domain([0,Math.LN10]),10,Zo,Yo,[1,10])};var Za=as.format(".0e");as.scale.pow=function(){return tr(as.scale.linear(),1,[0,1])},as.scale.sqrt=function(){return as.scale.pow().exponent(.5)},as.scale.ordinal=function(){return nr([],{t:"range",a:[[]]})},as.scale.category10=function(){return as.scale.ordinal().range(Ya)},as.scale.category20=function(){return as.scale.ordinal().range(Ka)},as.scale.category20b=function(){return as.scale.ordinal().range(Ja)},as.scale.category20c=function(){return as.scale.ordinal().range(tl)};var Ya=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ka=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ja=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],tl=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];as.scale.quantile=function(){return ir([],[])},as.scale.quantize=function(){return or(0,1,[0,1])},as.scale.threshold=function(){return rr([.5],[0,1])},as.scale.identity=function(){return sr([0,1])},as.svg.arc=function(){function t(){var t=e.apply(this,arguments),r=n.apply(this,arguments),s=i.apply(this,arguments)+el,a=o.apply(this,arguments)+el,l=(s>a&&(l=s,s=a,a=l),a-s),u=Os>l?"0":"1",h=Math.cos(s),c=Math.sin(s),d=Math.cos(a),p=Math.sin(a);return l>=nl?t?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":t?"M"+r*h+","+r*c+"A"+r+","+r+" 0 "+u+",1 "+r*d+","+r*p+"L"+t*d+","+t*p+"A"+t+","+t+" 0 "+u+",0 "+t*h+","+t*c+"Z":"M"+r*h+","+r*c+"A"+r+","+r+" 0 "+u+",1 "+r*d+","+r*p+"L0,0"+"Z"}var e=ar,n=lr,i=ur,o=hr;return t.innerRadius=function(n){return arguments.length?(e=ue(n),t):e},t.outerRadius=function(e){return arguments.length?(n=ue(e),t):n},t.startAngle=function(e){return arguments.length?(i=ue(e),t):i},t.endAngle=function(e){return arguments.length?(o=ue(e),t):o},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,r=(i.apply(this,arguments)+o.apply(this,arguments))/2+el;return[Math.cos(r)*t,Math.sin(r)*t]},t};var el=-Os/2,nl=2*Os-1e-6;as.svg.line.radial=function(){var t=Hn(cr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jn.reverse=Bn,Bn.reverse=jn,as.svg.area=function(){return dr(he)},as.svg.area.radial=function(){var t=dr(cr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},as.svg.chord=function(){function t(t,a){var l=e(this,r,t,a),u=e(this,s,t,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var o=e.call(t,n,i),r=a.call(t,o,i),s=l.call(t,o,i)+el,h=u.call(t,o,i)+el;return{r:r,a0:s,a1:h,p0:[r*Math.cos(s),r*Math.sin(s)],p1:[r*Math.cos(h),r*Math.sin(h)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Os)+",1 "+e}function o(t,e,n,i){return"Q 0,0 "+i}var r=dn,s=pn,a=pr,l=ur,u=hr;return t.radius=function(e){return arguments.length?(a=ue(e),t):a},t.source=function(e){return arguments.length?(r=ue(e),t):r},t.target=function(e){return arguments.length?(s=ue(e),t):s},t.startAngle=function(e){return arguments.length?(l=ue(e),t):l},t.endAngle=function(e){return arguments.length?(u=ue(e),t):u},t},as.svg.diagonal=function(){function t(t,o){var r=e.call(this,t,o),s=n.call(this,t,o),a=(r.y+s.y)/2,l=[r,{x:r.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=dn,n=pn,i=fr;return t.source=function(n){return arguments.length?(e=ue(n),t):e},t.target=function(e){return arguments.length?(n=ue(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},as.svg.diagonal.radial=function(){var t=as.svg.diagonal(),e=fr,n=t.projection;return t.projection=function(t){return arguments.length?n(gr(e=t)):e},t},as.svg.symbol=function(){function t(t,i){return(il.get(e.call(this,t,i))||yr)(n.call(this,t,i))}var e=vr,n=mr;return t.type=function(n){return arguments.length?(e=ue(n),t):e},t.size=function(e){return arguments.length?(n=ue(e),t):n},t};var il=as.map({circle:yr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*sl)),n=e*sl;return"M0,"+-e+"L"+n+",0"+" 0,"+e+" "+-n+",0"+"Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/rl),n=e*rl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/rl),n=e*rl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});as.svg.symbolTypes=il.keys();var ol,rl=Math.sqrt(3),sl=Math.tan(30*Ds),al=[],ll=0,ul={ease:Ci,delay:0,duration:250};al.call=Es.call,al.empty=Es.empty,al.node=Es.node,as.transition=function(t){return arguments.length?ol?t.transition():t:Ps.transition()},as.transition.prototype=al,al.select=function(t){var e,n,i,o=this.id,r=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){r.push(e=[]);for(var l=this[s],u=-1,h=l.length;h>++u;)(i=l[u])&&(n=t.call(i,i.__data__,u))?("__data__"in i&&(n.__data__=i.__data__),Sr(n,u,o,i.__transition__[o]),e.push(n)):e.push(null)}return br(r,o)},al.selectAll=function(t){var e,n,i,o,r,s=this.id,a=[];"function"!=typeof t&&(t=y(t));for(var l=-1,u=this.length;u>++l;)for(var h=this[l],c=-1,d=h.length;d>++c;)if(i=h[c]){r=i.__transition__[s],n=t.call(i,i.__data__,c),a.push(e=[]);for(var p=-1,f=n.length;f>++p;)Sr(o=n[p],p,s,r),e.push(o)}return br(a,s)},al.filter=function(t){var e,n,i,o=[];"function"!=typeof t&&(t=C(t));for(var r=0,s=this.length;s>r;r++){o.push(e=[]);for(var n=this[r],a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return br(o,this.id,this.time).ease(this.ease())},al.tween=function(t,e){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(t):N(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},al.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}function o(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function r(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(2>arguments.length){for(e in t)this.attr(e,t[e]);return this}var s=wi(t),a=as.ns.qualify(t);return wr(this,"attr."+t,e,a.local?r:o)},al.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(o));return i&&function(t){this.setAttribute(o,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(o.space,o.local));return i&&function(t){this.setAttributeNS(o.space,o.local,i(t))}}var o=as.ns.qualify(t);return this.tween("attr."+t,o.local?i:n)},al.style=function(t,e,n){function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var i,o=us.getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=s(o,e),function(e){this.style.setProperty(t,i(e),n)})})}var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}var s=wi(t);return wr(this,"style."+t,e,o)},al.styleTween=function(t,e,n){function i(i,o){var r=e.call(this,i,o,us.getComputedStyle(this,null).getPropertyValue(t));return r&&function(e){this.style.setProperty(t,r(e),n)}}return 3>arguments.length&&(n=""),this.tween("style."+t,i)},al.text=function(t){return wr(this,"text",t,xr)},al.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},al.ease=function(t){var e=this.id;return 1>arguments.length?this.node().__transition__[e].ease:("function"!=typeof t&&(t=as.ease.apply(as,arguments)),N(this,function(n){n.__transition__[e].ease=t}))},al.delay=function(t){var e=this.id;return N(this,"function"==typeof t?function(n,i,o){n.__transition__[e].delay=0|t.call(n,n.__data__,i,o)}:(t|=0,function(n){n.__transition__[e].delay=t}))},al.duration=function(t){var e=this.id;return N(this,"function"==typeof t?function(n,i,o){n.__transition__[e].duration=Math.max(1,0|t.call(n,n.__data__,i,o))}:(t=Math.max(1,0|t),function(n){n.__transition__[e].duration=t}))},al.each=function(t,e){var n=this.id;if(2>arguments.length){var i=ul,o=ol;ol=n,N(this,function(e,i,o){ul=e.__transition__[n],t.call(e,e.__data__,i,o)}),ul=i,ol=o}else N(this,function(i){i.__transition__[n].event.on(t,e)});return this},al.transition=function(){for(var t,e,n,i,o=this.id,r=++ll,s=[],a=0,l=this.length;l>a;a++){s.push(t=[]);for(var e=this[a],u=0,h=e.length;h>u;u++)(n=e[u])&&(i=Object.create(n.__transition__[o]),i.delay+=i.duration,Sr(n,u,r,i)),t.push(n)}return br(s,r)},as.svg.axis=function(){function t(t){t.each(function(){var t,c=as.select(this),d=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,p=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,f=Er(n,d,h),g=c.selectAll(".tick.minor").data(f,String),m=g.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=as.transition(g.exit()).style("opacity",1e-6).remove(),y=as.transition(g).style("opacity",1),b=c.selectAll(".tick.major").data(d,String),w=b.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),x=as.transition(b.exit()).style("opacity",1e-6).remove(),S=as.transition(b).style("opacity",1),_=jo(n),T=c.selectAll(".domain").data([0]),E=(T.enter().append("path").attr("class","domain"),as.transition(T)),k=n.copy(),C=this.__chart__||k;this.__chart__=k,w.append("line"),w.append("text");var M=w.select("line"),z=S.select("line"),P=b.select("text").text(p),A=w.select("text"),I=S.select("text");switch(i){case"bottom":t=_r,m.attr("y2",r),y.attr("x2",0).attr("y2",r),M.attr("y2",o),A.attr("y",Math.max(o,0)+a),z.attr("x2",0).attr("y2",o),I.attr("x",0).attr("y",Math.max(o,0)+a),P.attr("dy",".71em").style("text-anchor","middle"),E.attr("d","M"+_[0]+","+s+"V0H"+_[1]+"V"+s);break;case"top":t=_r,m.attr("y2",-r),y.attr("x2",0).attr("y2",-r),M.attr("y2",-o),A.attr("y",-(Math.max(o,0)+a)),z.attr("x2",0).attr("y2",-o),I.attr("x",0).attr("y",-(Math.max(o,0)+a)),P.attr("dy","0em").style("text-anchor","middle"),E.attr("d","M"+_[0]+","+-s+"V0H"+_[1]+"V"+-s);break;case"left":t=Tr,m.attr("x2",-r),y.attr("x2",-r).attr("y2",0),M.attr("x2",-o),A.attr("x",-(Math.max(o,0)+a)),z.attr("x2",-o).attr("y2",0),I.attr("x",-(Math.max(o,0)+a)).attr("y",0),P.attr("dy",".32em").style("text-anchor","end"),E.attr("d","M"+-s+","+_[0]+"H0V"+_[1]+"H"+-s);break;case"right":t=Tr,m.attr("x2",r),y.attr("x2",r).attr("y2",0),M.attr("x2",o),A.attr("x",Math.max(o,0)+a),z.attr("x2",o).attr("y2",0),I.attr("x",Math.max(o,0)+a).attr("y",0),P.attr("dy",".32em").style("text-anchor","start"),E.attr("d","M"+s+","+_[0]+"H0V"+_[1]+"H"+s)}if(n.ticks)w.call(t,C),S.call(t,k),x.call(t,k),m.call(t,C),y.call(t,k),v.call(t,k);else{var N=k.rangeBand()/2,H=function(t){return k(t)+N};w.call(t,H),S.call(t,H)}})}var e,n=as.scale.linear(),i=hl,o=6,r=6,s=6,a=3,l=[10],u=null,h=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in cl?e+"":hl,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return o;var i=arguments.length-1;return o=+e,r=i>1?+n:o,s=i>0?+arguments[i]:o,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(h=+e,t):h},t};var hl="bottom",cl={top:1,right:1,bottom:1,left:1};as.svg.brush=function(){function t(r){r.each(function(){var r,s=as.select(this),u=s.selectAll(".background").data([0]),c=s.selectAll(".extent").data([0]),d=s.selectAll(".resize").data(h,String);s.style("pointer-events","all").on("mousedown.brush",o).on("touchstart.brush",o),u.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return dl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",t.empty()?"none":null),d.exit().remove(),a&&(r=jo(a),u.attr("x",r[0]).attr("width",r[1]-r[0]),n(s)),l&&(r=jo(l),u.attr("y",r[0]).attr("height",r[1]-r[0]),i(s)),e(s)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function i(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function o(){function o(){var t=as.event.changedTouches;return t?as.touches(y,t)[0]:as.mouse(y)}function h(){32==as.event.keyCode&&(E||(m=null,k[0]-=c[1][0],k[1]-=c[1][1],E=2),u())}function d(){32==as.event.keyCode&&2==E&&(k[0]+=c[1][0],k[1]+=c[1][1],E=0,u())}function p(){var t=o(),r=!1;v&&(t[0]+=v[0],t[1]+=v[1]),E||(as.event.altKey?(m||(m=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),k[0]=c[+(t[0]<m[0])][0],k[1]=c[+(t[1]<m[1])][1]):m=null),_&&f(t,a,0)&&(n(x),r=!0),T&&f(t,l,1)&&(i(x),r=!0),r&&(e(x),w({type:"brush",mode:E?"move":"resize"}))}function f(t,e,n){var i,o,s=jo(e),a=s[0],l=s[1],u=k[n],h=c[1][n]-c[0][n];return E&&(a-=u,l-=h+u),i=Math.max(a,Math.min(l,t[n])),E?o=(i+=u)+h:(m&&(u=Math.max(a,Math.min(l,2*m[n]-i))),i>u?(o=i,i=u):o=u),c[0][n]!==i||c[1][n]!==o?(r=null,c[0][n]=i,c[1][n]=o,!0):void 0}function g(){p(),x.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),as.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w({type:"brushend"}),u()}var m,v,y=this,b=as.select(as.event.target),w=s.of(y,arguments),x=as.select(y),S=b.datum(),_=!/^(n|s)$/.test(S)&&a,T=!/^(e|w)$/.test(S)&&l,E=b.classed("extent"),k=o(),C=as.select(us).on("mousemove.brush",p).on("mouseup.brush",g).on("touchmove.brush",p).on("touchend.brush",g).on("keydown.brush",h).on("keyup.brush",d);if(E)k[0]=c[0][0]-k[0],k[1]=c[0][1]-k[1];else if(S){var M=+/w$/.test(S),z=+/^n/.test(S);v=[c[1-M][0]-k[0],c[1-z][1]-k[1]],k[0]=c[M][0],k[1]=c[z][1]}else as.event.altKey&&(m=k.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),as.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),p(),u()}var r,s=d(t,"brushstart","brush","brushend"),a=null,l=null,h=pl[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(a=e,h=pl[!a<<1|!l],t):a},t.y=function(e){return arguments.length?(l=e,h=pl[!a<<1|!l],t):l},t.extent=function(e){var n,i,o,s,u;return arguments.length?(r=[[0,0],[0,0]],a&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),r[0][0]=n,r[1][0]=i,a.invert&&(n=a(n),i=a(i)),n>i&&(u=n,n=i,i=u),c[0][0]=0|n,c[1][0]=0|i),l&&(o=e[0],s=e[1],a&&(o=o[1],s=s[1]),r[0][1]=o,r[1][1]=s,l.invert&&(o=l(o),s=l(s)),o>s&&(u=o,o=s,s=u),c[0][1]=0|o,c[1][1]=0|s),t):(e=r||c,a&&(n=e[0][0],i=e[1][0],r||(n=c[0][0],i=c[1][0],a.invert&&(n=a.invert(n),i=a.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(o=e[0][1],s=e[1][1],r||(o=c[0][1],s=c[1][1],l.invert&&(o=l.invert(o),s=l.invert(s)),o>s&&(u=o,o=s,s=u))),a&&l?[[n,o],[i,s]]:a?[n,i]:l&&[o,s])},t.clear=function(){return r=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return a&&c[0][0]===c[1][0]||l&&c[0][1]===c[1][1]},as.rebind(t,s,"on")};var dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];as.time={};var fl=Date,gl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];kr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ml.setUTCDate.apply(this._,arguments)},setDay:function(){ml.setUTCDay.apply(this._,arguments)},setFullYear:function(){ml.setUTCFullYear.apply(this._,arguments)},setHours:function(){ml.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ml.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ml.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ml.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ml.setUTCSeconds.apply(this._,arguments)},setTime:function(){ml.setTime.apply(this._,arguments)}};var ml=Date.prototype,vl="%a %b %e %X %Y",yl="%m/%d/%Y",bl="%H:%M:%S",wl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Sl=["January","February","March","April","May","June","July","August","September","October","November","December"],_l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];as.time.year=Cr(function(t){return t=as.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),as.time.years=as.time.year.range,as.time.years.utc=as.time.year.utc.range,as.time.day=Cr(function(t){var e=new fl(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),as.time.days=as.time.day.range,as.time.days.utc=as.time.day.utc.range,as.time.dayOfYear=function(t){var e=as.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},gl.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=as.time[t]=Cr(function(t){return(t=as.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});as.time[t+"s"]=n.range,as.time[t+"s"].utc=n.utc.range,as.time[t+"OfYear"]=function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)}}),as.time.week=as.time.sunday,as.time.weeks=as.time.sunday.range,as.time.weeks.utc=as.time.sunday.utc.range,as.time.weekOfYear=as.time.sundayOfYear,as.time.format=function(t){function e(e){for(var i,o,r,s=[],a=-1,l=0;n>++a;)37===t.charCodeAt(a)&&(s.push(t.substring(l,a)),null!=(o=Pl[i=t.charAt(++a)])&&(i=t.charAt(++a)),(r=Al[i])&&(i=r(e,null==o?"e"===i?" ":"0":o)),s.push(i),l=a+1);return s.push(t.substring(l,a)),s.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=zr(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var o=new fl;return o.setFullYear(n.y,n.m,n.d),o.setHours(n.H,n.M,n.S,n.L),o},e.toString=function(){return t},e};var Tl=Pr(wl),El=Pr(xl),kl=Pr(Sl),Cl=Ar(Sl),Ml=Pr(_l),zl=Ar(_l),Pl={"-":"",_:" ",0:"0"},Al={a:function(t){return xl[t.getDay()]},A:function(t){return wl[t.getDay()]},b:function(t){return _l[t.getMonth()]},B:function(t){return Sl[t.getMonth()]},c:as.time.format(vl),d:function(t,e){return Ir(t.getDate(),e,2)},e:function(t,e){return Ir(t.getDate(),e,2)},H:function(t,e){return Ir(t.getHours(),e,2)},I:function(t,e){return Ir(t.getHours()%12||12,e,2)},j:function(t,e){return Ir(1+as.time.dayOfYear(t),e,3)},L:function(t,e){return Ir(t.getMilliseconds(),e,3)},m:function(t,e){return Ir(t.getMonth()+1,e,2)},M:function(t,e){return Ir(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Ir(t.getSeconds(),e,2)},U:function(t,e){return Ir(as.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ir(as.time.mondayOfYear(t),e,2)},x:as.time.format(yl),X:as.time.format(bl),y:function(t,e){return Ir(t.getFullYear()%100,e,2)},Y:function(t,e){return Ir(t.getFullYear()%1e4,e,4)},Z:Zr,"%":function(){return"%"}},Il={a:Nr,A:Hr,b:Or,B:Lr,c:Dr,d:qr,e:qr,H:Vr,I:Vr,L:Gr,m:Ur,M:$r,p:Xr,S:Qr,x:Rr,X:jr,y:Fr,Y:Br},Nl=/^\s*\d+/,Hl=as.map({am:0,pm:1});as.time.format.utc=function(t){function e(t){try{fl=kr;var e=new fl;return e._=t,n(e)}finally{fl=Date}}var n=as.time.format(t);return e.parse=function(t){try{fl=kr;var e=n.parse(t);return e&&e._}finally{fl=Date}},e.toString=n.toString,e};var Ol=as.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");as.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yr:Ol,Yr.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Yr.toString=Ol.toString,as.time.second=Cr(function(t){return new fl(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),as.time.seconds=as.time.second.range,as.time.seconds.utc=as.time.second.utc.range,as.time.minute=Cr(function(t){return new fl(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),as.time.minutes=as.time.minute.range,as.time.minutes.utc=as.time.minute.utc.range,as.time.hour=Cr(function(t){var e=t.getTimezoneOffset()/60;return new fl(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),as.time.hours=as.time.hour.range,as.time.hours.utc=as.time.hour.utc.range,as.time.month=Cr(function(t){return t=as.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),as.time.months=as.time.month.range,as.time.months.utc=as.time.month.utc.range;var Ll=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Dl=[[as.time.second,1],[as.time.second,5],[as.time.second,15],[as.time.second,30],[as.time.minute,1],[as.time.minute,5],[as.time.minute,15],[as.time.minute,30],[as.time.hour,1],[as.time.hour,3],[as.time.hour,6],[as.time.hour,12],[as.time.day,1],[as.time.day,2],[as.time.week,1],[as.time.month,1],[as.time.month,3],[as.time.year,1]],Rl=[[as.time.format("%Y"),De],[as.time.format("%B"),function(t){return t.getMonth()
}],[as.time.format("%b %d"),function(t){return 1!=t.getDate()}],[as.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[as.time.format("%I %p"),function(t){return t.getHours()}],[as.time.format("%I:%M"),function(t){return t.getMinutes()}],[as.time.format(":%S"),function(t){return t.getSeconds()}],[as.time.format(".%L"),function(t){return t.getMilliseconds()}]],jl=as.scale.linear(),Bl=ts(Rl);Dl.year=function(t,e){return jl.domain(t.map(ns)).ticks(e).map(es)},as.time.scale=function(){return Kr(as.scale.linear(),Dl,Bl)};var Fl=Dl.map(function(t){return[t[0].utc,t[1]]}),Wl=[[as.time.format.utc("%Y"),De],[as.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[as.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[as.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[as.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[as.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[as.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[as.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Ul=ts(Wl);return Fl.year=function(t,e){return jl.domain(t.map(os)).ticks(e).map(is)},as.time.scale.utc=function(){return Kr(as.scale.linear(),Fl,Ul)},as.text=ce(function(t){return t.responseText}),as.json=function(t,e){return de(t,"application/json",rs,e)},as.html=function(t,e){return de(t,"text/html",ss,e)},as.xml=ce(function(t){return t.responseXML}),as}(),/*! URI.js v1.11.2 http://medialize.github.com/URI.js/ */
function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.IPv6=e(t)}(this,function(t){var e=t&&t.IPv6;return{best:function(t){t=t.toLowerCase().split(":");var e=t.length,n=8;""===t[0]&&""===t[1]&&""===t[2]?(t.shift(),t.shift()):""===t[0]&&""===t[1]?t.shift():""===t[e-1]&&""===t[e-2]&&t.pop(),e=t.length,-1!==t[e-1].indexOf(".")&&(n=7);var i;for(i=0;e>i&&""!==t[i];i++);if(n>i)for(t.splice(i,1,"0000");n>t.length;)t.splice(i,0,"0000");for(i=0;n>i;i++){for(var e=t[i].split(""),o=0;3>o&&"0"===e[0]&&e.length>1;o++)e.splice(0,1);t[i]=e.join("")}var e=-1,r=o=0,s=-1,a=!1;for(i=0;n>i;i++)a?"0"===t[i]?r+=1:(a=!1,r>o&&(e=s,o=r)):"0"==t[i]&&(a=!0,s=i,r=1);for(r>o&&(e=s,o=r),o>1&&t.splice(e,o,""),e=t.length,n="",""===t[0]&&(beststr=":"),i=0;e>i&&(n+=t[i],i!==e-1);i++)n+=":";return""===t[e-1]&&(n+=":"),n},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}}),function(t){function e(t){throw RangeError(E[t])}function n(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function i(t){for(var e,n,i=[],o=0,r=t.length;r>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&r>o?(n=t.charCodeAt(o++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),o--)):i.push(e);return i}function o(t){return n(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(55296|1023&t>>>10),t=56320|1023&t),e+=M(t)}).join("")}function r(t,e,n){var i=0;for(t=n?C(t/y):t>>1,t+=C(t/e);t>k*m>>1;i+=f)t=C(t/k);return C(i+(k+1)*t/(t+v))}function s(t){var n,i,s,a,l,u,h=[],c=t.length,d=0,v=w,y=b;for(i=t.lastIndexOf(x),0>i&&(i=0),s=0;i>s;++s)t.charCodeAt(s)>=128&&e("not-basic"),h.push(t.charCodeAt(s));for(i=i>0?i+1:0;c>i;){for(s=d,n=1,a=f;i>=c&&e("invalid-input"),l=t.charCodeAt(i++),l=10>l-48?l-22:26>l-65?l-65:26>l-97?l-97:f,(l>=f||l>C((p-d)/n))&&e("overflow"),d+=l*n,u=y>=a?g:a>=y+m?m:a-y,!(u>l);a+=f)l=f-u,n>C(p/l)&&e("overflow"),n*=l;n=h.length+1,y=r(d-s,n,0==s),C(d/n)>p-v&&e("overflow"),v+=C(d/n),d%=n,h.splice(d++,0,v)}return o(h)}function a(t){var n,o,s,a,l,u,h,c,d,v,y,S,_=[];for(t=i(t),v=t.length,n=w,o=0,l=b,u=0;v>u;++u)d=t[u],128>d&&_.push(M(d));for((s=a=_.length)&&_.push(x);v>s;){for(h=p,u=0;v>u;++u)d=t[u],d>=n&&h>d&&(h=d);for(y=s+1,h-n>C((p-o)/y)&&e("overflow"),o+=(h-n)*y,n=h,u=0;v>u;++u)if(d=t[u],n>d&&++o>p&&e("overflow"),d==n){for(c=o,h=f;d=l>=h?g:h>=l+m?m:h-l,!(d>c);h+=f)S=c-d,c=f-d,_.push(M(d+S%c+22+75*(26>d+S%c)-0)),c=C(S/c);_.push(M(c+22+75*(26>c)-0)),l=r(o,y,s==a),o=0,++s}++o,++n}return _.join("")}var l="object"==typeof exports&&exports,u="object"==typeof module&&module&&module.exports==l&&module,h="object"==typeof global&&global;(h.global===h||h.window===h)&&(t=h);var c,d,p=2147483647,f=36,g=1,m=26,v=38,y=700,b=72,w=128,x="-",S=/^xn--/,_=/[^ -~]/,T=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=f-g,C=Math.floor,M=String.fromCharCode;if(c={version:"1.2.3",ucs2:{decode:i,encode:o},decode:s,encode:a,toASCII:function(t){return n(t.split(T),function(t){return _.test(t)?"xn--"+a(t):t}).join(".")},toUnicode:function(t){return n(t.split(T),function(t){return S.test(t)?s(t.slice(4).toLowerCase()):t}).join(".")}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return c});else if(l&&!l.nodeType)if(u)u.exports=c;else for(d in c)c.hasOwnProperty(d)&&(l[d]=c[d]);else t.punycode=c}(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SecondLevelDomains=e(t)}(this,function(t){var e=t&&t.SecondLevelDomains,n=Object.prototype.hasOwnProperty,i={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(t){return!!t.match(i.has_expression)},is:function(t){return!!t.match(i.is_expression)},get:function(t){return(t=t.match(i.has_expression))&&t[1]||null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this},init:function(){var t,e="";for(t in i.list)n.call(i.list,t)&&(e+="|("+("("+i.list[t]+")."+t)+")");i.has_expression=RegExp("\\.("+e.substr(1)+")$","i"),i.is_expression=RegExp("^("+e.substr(1)+")$","i")}};return i.init(),i}),function(t,e){"object"==typeof exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,n,i){function o(t,e){return this instanceof o?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new o(t,e)}function r(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":(Object.prototype.toString.call(t)+"").slice(8,-1)}function a(t){return"Array"===s(t)}function l(t,e){var n,i;if(a(e)){for(n=0,i=e.length;i>n;n++)if(!l(t,e[n]))return!1;return!0}var o=s(e);for(n=0,i=t.length;i>n;n++)if("RegExp"===o){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function u(t,e){if(!a(t)||!a(e)||t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,i=t.length;i>n;n++)if(t[n]!==e[n])return!1;return!0}function h(t){return escape(t)}function c(t){return encodeURIComponent(t).replace(/[!'()*]/g,h).replace(/\*/g,"%2A")}var d=i&&i.URI,p=o.prototype,f=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();return"input"===e&&"image"!==t.type?void 0:o.domAttributes[e]}},o.encode=c,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=c,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="";try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}},o.recodePath=function(t){t=(t+"").split("/");for(var e=0,n=t.length;n>e;e++)t[e]=o.encodePathSegment(o.decode(t[e]));return t.join("/")},o.decodePath=function(t){t=(t+"").split("/");for(var e=0,n=t.length;n>e;e++)t[e]=o.decodePathSegment(t[e]);return t.join("/")};var g,m={encode:"encode",decode:"decode"},v=function(t,e){return function(n){return o[e](n+"").replace(o.characters[t][e].expression,function(n){return o.characters[t][e].map[n]})}};for(g in m)o[g+"PathSegment"]=v("pathname",m[g]);o.encodeReserved=v("reserved","encode"),o.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(n+3):"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},o.parseHost=function(t,e){var n,i=t.indexOf("/");return-1===i&&(i=t.length),"["===t.charAt(0)?(n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,i)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,i)||null,e.port=null):(n=t.substring(0,i).split(":"),e.hostname=n[0]||null,e.port=n[1]||null),e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),t.substring(i)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n=t.indexOf("/"),i=n>-1?t.lastIndexOf("@",n):t.indexOf("@");return i>-1&&(-1===n||n>i)?(n=t.substring(0,i).split(":"),e.username=n[0]?o.decode(n[0]):null,n.shift(),e.password=n[0]?o.decode(n.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,i,r={},s=t.split("&"),a=s.length,l=0;a>l;l++)n=s[l].split("="),i=o.decodeQuery(n.shift(),e),n=n.length?o.decodeQuery(n.join("="),e):null,r[i]?("string"==typeof r[i]&&(r[i]=[r[i]]),r[i].push(n)):r[i]=n;return r},o.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e=t.port?e+("["+t.hostname+"]:"+t.port):e+t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username),t.password&&(e+=":"+o.encode(t.password)),e+="@"),e},o.buildQuery=function(t,e,n){var i,r,s,l,u="";for(r in t)if(f.call(t,r)&&r)if(a(t[r]))for(i={},s=0,l=t[r].length;l>s;s++)void 0!==t[r][s]&&void 0===i[t[r][s]+""]&&(u+="&"+o.buildQueryParameter(r,t[r][s],n),!0!==e&&(i[t[r][s]+""]=!0));else void 0!==t[r]&&(u+="&"+o.buildQueryParameter(r,t[r],n));return u.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var i in e)f.call(e,i)&&o.addQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===t[e]?t[e]=n:("string"==typeof t[e]&&(t[e]=[t[e]]),a(n)||(n=[n]),t[e]=t[e].concat(n))}},o.removeQuery=function(t,e,n){var i;if(a(e))for(n=0,i=e.length;i>n;n++)t[e[n]]=void 0;else if("object"==typeof e)for(i in e)f.call(e,i)&&o.removeQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==n){if(t[e]===n)t[e]=void 0;else if(a(t[e])){i=t[e];var r,s,l={};if(a(n))for(r=0,s=n.length;s>r;r++)l[n[r]]=!0;else l[n]=!0;for(r=0,s=i.length;s>r;r++)void 0!==l[i[r]]&&(i.splice(r,1),s--,r--);t[e]=i}}else t[e]=void 0}},o.hasQuery=function(t,e,n,i){if("object"==typeof e){for(var r in e)if(f.call(e,r)&&!o.hasQuery(t,r,e[r]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(n)){case"Undefined":return e in t;case"Boolean":return t=Boolean(a(t[e])?t[e].length:t[e]),n===t;case"Function":return!!n(t[e],e,t);case"Array":return a(t[e])?(i?l:u)(t[e],n):!1;case"RegExp":return a(t[e])?i?l(t[e],n):!1:Boolean(t[e]&&t[e].match(n));case"Number":n+="";case"String":return a(t[e])?i?l(t[e],n):!1:t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.commonPath=function(t,e){var n,i=Math.min(t.length,e.length);for(n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return 1>n?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":(("/"!==t.charAt(n)||"/"!==e.charAt(n))&&(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e){return t.replace(o.find_uri_expression,e)},o.ensureValidHostname=function(e){if(e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},o.noConflict=function(t){return t?(t={URI:this.noConflict()},URITemplate&&"function"==typeof URITemplate.noConflict&&(t.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(t.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(t.SecondLevelDomains=SecondLevelDomains.noConflict()),t):(i.URI===this&&(i.URI=d),this)},p.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new o(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},v=function(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}};for(g in m)p[g]=v(m[g]);m={query:"?",fragment:"#"},v=function(t,e){return function(n,i){return void 0===n?this._parts[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this._parts[t]=n,this.build(!i),this)}};for(g in m)p[g]=v(g,m[g]);m={search:["?","query"],hash:["#","fragment"]},v=function(t,e){return function(n,i){var o=this[t](n,i);return"string"==typeof o&&o.length?e+o:o}};for(g in m)p[g]=v(m[g][1],m[g][0]);p.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?o.decodePath(n):n}return this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},p.path=p.pathname,p.href=function(t,e){var n;if(void 0===t)return""+this;this._string="",this._parts=o._parts();var i=t instanceof o,r="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(r=o.getDomAttribute(t),t=t[r]||"",r=!1),!i&&r&&void 0!==t.pathname&&(t=""+t),"string"==typeof t)this._parts=o.parse(t,this._parts);else{if(!i&&!r)throw new TypeError("invalid input");for(n in i=i?t._parts:t)f.call(this._parts,n)&&(this._parts[n]=i[n])}return this.build(!e),this},p.is=function(t){var e=!1,i=!1,r=!1,s=!1,a=!1,l=!1,u=!1,h=!this._parts.urn;switch(this._parts.hostname&&(h=!1,i=o.ip4_expression.test(this._parts.hostname),r=o.ip6_expression.test(this._parts.hostname),e=i||r,a=(s=!e)&&n&&n.has(this._parts.hostname),l=s&&o.idn_expression.test(this._parts.hostname),u=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return h;case"absolute":return!h;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return r;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var y=p.protocol,b=p.port,w=p.hostname;p.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),t.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-]");return y.call(this,t,e)},p.scheme=p.protocol,p.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return b.call(this,t,e)},p.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={};o.parseHost(t,n),t=n.hostname}return w.call(this,t,e)},p.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildHost(this._parts):"":(o.parseHost(t,this._parts),this.build(!e),this)},p.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildAuthority(this._parts):"":(o.parseAuthority(t,this._parts),this.build(!e),this)},p.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var n=o.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},p.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},p.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}return n=this._parts.hostname.length-this.domain().length,n=this._parts.hostname.substring(0,n),n=RegExp("^"+r(n)),t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&o.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(n,t),this.build(!e),this},p.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);return n&&2>n.length?this._parts.hostname:(n=this._parts.hostname.length-this.tld(e).length-1,n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||"")}if(!t)throw new TypeError("cannot set domain empty");return o.ensureValidHostname(t),!this._parts.hostname||this.is("IP")?this._parts.hostname=t:(n=RegExp(r(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(n,t)),this.build(!e),this},p.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(i+1);return!0!==e&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");i=RegExp(r(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=RegExp(r(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},p.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(n):n}return n=this._parts.path.length-this.filename().length,n=this._parts.path.substring(0,n),n=RegExp("^"+r(n)),this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(n,t),this.build(!e),this},p.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(n+1);return t?o.decodePathSegment(n):n}n=!1,"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(n=!0);var i=RegExp(r(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(i,t),n?this.normalizePath(e):this.build(!e),this},p.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this.filename(),i=n.lastIndexOf(".");return-1===i?"":(n=n.substring(i+1),n=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(n):n)}if("."===t.charAt(0)&&(t=t.substring(1)),n=this.suffix())i=t?RegExp(r(n)+"$"):RegExp(r("."+n)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return i&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(i,t)),this.build(!e),this},p.segment=function(t,e,n){var i=this._parts.urn?":":"/",o=this.path(),r="/"===o.substring(0,1),o=o.split(i);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw Error("Bad segment '"+t+"', must be 0-based integer");if(r&&o.shift(),0>t&&(t=Math.max(o.length+t,0)),void 0===e)return void 0===t?o:o[t];if(null===t||void 0===o[t])if(a(e)){o=[],t=0;for(var s=e.length;s>t;t++)(e[t].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(e[t]))}else(e||"string"==typeof e)&&(""===o[o.length-1]?o[o.length-1]=e:o.push(e));else e||"string"==typeof e&&e.length?o[t]=e:o.splice(t,1);return r&&o.unshift(""),this.path(o.join(i),n)},p.segmentCoded=function(t,e,n){var i,r;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(t=this.segment(t,e,n),a(t))for(i=0,r=t.length;r>i;i++)t[i]=o.decode(t[i]);else t=void 0!==t?o.decode(t):void 0;return t}if(a(e))for(i=0,r=e.length;r>i;i++)e[i]=o.decode(e[i]);else e="string"==typeof e?o.encode(e):e;return this.segment(t,e,n)};var x=p.query;return p.query=function(t,e){if(!0===t)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=t.call(this,n);return this._parts.query=o.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):x.call(this,t,e)},p.setQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var r in t)f.call(t,r)&&(i[r]=t[r]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[t]=void 0!==e?e:null}return this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.addQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(i,t,void 0===e?null:e),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.removeQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(i,t,e),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.hasQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(i,t,e,n)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},p.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this
},p.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},p.normalizePath=function(t){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var e,n,i,r=this._parts.path;for("/"!==r.charAt(0)&&(e=!0,r="/"+r),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");n=r.indexOf("/../"),-1!==n;){if(0===n){r=r.substring(3);break}i=r.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),r=r.substring(0,i)+r.substring(n+3)}return e&&this.is("relative")&&(r=r.substring(1)),r=o.recodePath(r),this._parts.path=r,this.build(!t),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},p.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var t=o.encode,e=o.decode;return o.encode=escape,o.decode=decodeURIComponent,this.normalize(),o.encode=t,o.decode=e,this},p.unicode=function(){var t=o.encode,e=o.decode;return o.encode=c,o.decode=unescape,this.normalize(),o.encode=t,o.decode=e,this},p.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var i="",r=0,s=e._parts.query.split("&"),a=s.length;a>r;r++){var l=(s[r]||"").split("="),i=i+("&"+o.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(i+="="+o.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},p.absoluteTo=function(t){var e,n,i=this.clone(),r=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol||(i._parts.protocol=t._parts.protocol),this._parts.hostname)return i;for(e=0;n=r[e];e++)i._parts[n]=t._parts[n];for(r=["query","path"],e=0;n=r[e];e++)!i._parts[n]&&t._parts[n]&&(i._parts[n]=t._parts[n]);return"/"!==i.path().charAt(0)&&(t=t.directory(),i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},p.relativeTo=function(t){var e,n,i,r,s=this.clone().normalize();if(s._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=s._parts,n=t._parts,i=s.path(),r=t.path(),"/"!==i.charAt(0))throw Error("URI is already relative");if("/"!==r.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password||null!==e.protocol||null!==e.username||null!==e.password||e.hostname!==n.hostname||e.port!==n.port?s.build():(e.hostname=null,e.port=null,i===r?(e.path="",s.build()):(t=o.commonPath(s.path(),t.path()))?(n=n.path.substring(t.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),e.path=n+e.path.substring(t.length),s.build()):s.build())},p.equals=function(t){var e=this.clone();t=new o(t);var n,i={},r={},s={};if(e.normalize(),t.normalize(),""+e==""+t)return!0;if(i=e.query(),r=t.query(),e.query(""),t.query(""),""+e!=""+t||i.length!==r.length)return!1;i=o.parseQuery(i,this._parts.escapeQuerySpace),r=o.parseQuery(r,this._parts.escapeQuerySpace);for(n in i)if(f.call(i,n)){if(a(i[n])){if(!u(i[n],r[n]))return!1}else if(i[n]!==r[n])return!1;s[n]=!0}for(n in r)if(f.call(r,n)&&!s[n])return!1;return!0},p.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},p.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o}),function(t,e){"object"==typeof exports?module.exports=e(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],e):t.URITemplate=e(t.URI,t)}(this,function(t,e){function n(t){return n._cache[t]?n._cache[t]:this instanceof n?(this.expression=t,n._cache[t]=this,this):new n(t)}function i(t){this.data=t,this.cache={}}var o=e&&e.URITemplate,r=Object.prototype.hasOwnProperty,s=n.prototype,a={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return n._cache={},n.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,n.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,n.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,n.expand=function(t,e){var i,o,r,s=a[t.operator],l=s.named?"Named":"Unnamed",u=t.variables,h=[];for(r=0;o=u[r];r++)i=e.get(o.name),i.val.length?h.push(n["expand"+l](i,s,o.explode,o.explode&&s.separator||",",o.maxlength,o.name)):i.type&&h.push("");return h.length?s.prefix+h.join(s.separator):""},n.expandNamed=function(e,n,i,o,r,s){var a="",l=n.encode;n=n.empty_name_separator;var u,h,c,d=!e[l].length,p=2===e.type?"":t[l](s);for(h=0,c=e.val.length;c>h;h++)r?(u=t[l](e.val[h][1].substring(0,r)),2===e.type&&(p=t[l](e.val[h][0].substring(0,r)))):d?(u=t[l](e.val[h][1]),2===e.type?(p=t[l](e.val[h][0]),e[l].push([p,u])):e[l].push([void 0,u])):(u=e[l][h][1],2===e.type&&(p=e[l][h][0])),a&&(a+=o),i?a+=p+(n||u?"=":"")+u:(h||(a+=t[l](s)+(n||u?"=":"")),2===e.type&&(a+=p+","),a+=u);return a},n.expandUnnamed=function(e,n,i,o,r,s){s="";var a=n.encode;n=n.empty_name_separator;var l,u,h,c,d=!e[a].length;for(h=0,c=e.val.length;c>h;h++)r?u=t[a](e.val[h][1].substring(0,r)):d?(u=t[a](e.val[h][1]),e[a].push([2===e.type?t[a](e.val[h][0]):void 0,u])):u=e[a][h][1],s&&(s+=o),2===e.type&&(l=r?t[a](e.val[h][0].substring(0,r)):e[a][h][0],s+=l,s=i?s+(n||u?"=":""):s+","),s+=u;return s},n.noConflict=function(){return e.URITemplate===n&&(e.URITemplate=o),n},s.expand=function(t){var e="";this.parts&&this.parts.length||this.parse(),t instanceof i||(t=new i(t));for(var o=0,r=this.parts.length;r>o;o++)e+="string"==typeof this.parts[o]?this.parts[o]:n.expand(this.parts[o],t);return e},s.parse=function(){var t,e,i,o=this.expression,r=n.EXPRESSION_PATTERN,s=n.VARIABLE_PATTERN,l=n.VARIABLE_NAME_PATTERN,u=[],h=0;for(r.lastIndex=0;;){if(e=r.exec(o),null===e){u.push(o.substring(h));break}if(u.push(o.substring(h,e.index)),h=e.index+e[0].length,!a[e[1]])throw Error('Unknown Operator "'+e[1]+'" in "'+e[0]+'"');if(!e[3])throw Error('Unclosed Expression "'+e[0]+'"');t=e[2].split(",");for(var c=0,d=t.length;d>c;c++){if(i=t[c].match(s),null===i)throw Error('Invalid Variable "'+t[c]+'" in "'+e[0]+'"');if(i[1].match(l))throw Error('Invalid Variable Name "'+i[1]+'" in "'+e[0]+'"');t[c]={name:i[1],explode:!!i[3],maxlength:i[4]&&parseInt(i[4],10)}}if(!t.length)throw Error('Expression Missing Variable(s) "'+e[0]+'"');u.push({expression:e[0],operator:e[1],variables:t})}return u.length||u.push(o),this.parts=u,this},i.prototype.get=function(t){var e,n=this.data,i={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[t])return this.cache[t];if(this.cache[t]=i,n="[object Function]"==Object.prototype.toString.call(n)+""?n(t):"[object Function]"==Object.prototype.toString.call(n[t])+""?n[t](t):n[t],void 0!==n&&null!==n)if("[object Array]"==Object.prototype.toString.call(n)+""){for(e=0,t=n.length;t>e;e++)void 0!==n[e]&&null!==n[e]&&i.val.push([void 0,n[e]+""]);i.val.length&&(i.type=3)}else if("[object Object]"==Object.prototype.toString.call(n)+""){for(e in n)r.call(n,e)&&void 0!==n[e]&&null!==n[e]&&i.val.push([e,n[e]+""]);i.val.length&&(i.type=2)}else i.type=1,i.val.push([void 0,n+""]);return i},t.expand=function(e,i){var o=new n(e).expand(i);return new t(o)},n}),window.Mirador=window.Mirador||function(t){Mirador.DEFAULT_SETTINGS.workspaceAutoSave&&(Mirador.settingsLoader=new Mirador.SettingsLoader(t),t=Mirador.settingsLoader.config),Mirador.viewer=new Mirador.Viewer(t),Mirador.manifests=new Mirador.ManifestsLoader(t)},function(t){t.DEFAULT_SETTINGS={workspaceAutoSave:!0,showNoImageChoiceOption:!0,initialLayout:"stackAll3Columns",availableViews:{imageView:{label:"Image View"},scrollView:{label:"Scroll View"},thumbnailsView:{label:"Thumbnails View"},metadataView:{label:"Metadata View"}},maxWidgetsLimit:10,mainMenu:{height:25,width:"100%"},statusBar:{show:!0,height:25,width:"100%"},scale:{height:60,maxWidth:230},widget:{height:400,width:400},widgetToolbar:{height:25},widgetStatusBar:{height:26},imageView:{height:400,width:350,annotationsList:{display:!0,width:200}},scrollView:{height:400,imageLabelHeight:25,toolbarHeight:25,width:600},thumbnailsView:{height:400,thumbsMaxHeight:150,thumbsMinHeight:50,thumbsDefaultZoom:.5,width:600},metadataView:{height:400,width:600},saveController:{saveInterval:8e3},lockController:{lockProfile:"lazyZoom",notifyMaxMin:!1}},t.isValidView=function(){return t.DEFAULT_SETTINGS.availableViews.view===void 0},t.inArrayToBoolean=function(t){return-1===t?!1:!0},t.castToArray=function(t){return"string"==typeof t?[t]:t},t.getUniques=function(t){for(var e={},n=[],i=0;t.length>i;i++)e[t[i]]=!0;for(var o in e)n.push(o);return n},t.getTitlePrefix=function(t){var e=[];return t&&t.label&&e.push(t.label),e.join(" / ")},t.trimString=function(t){return t.replace(/^\s+|\s+$/g,"")},t.trimStringBy=function(t,e){return t.length>e&&(t=t.substr(0,e)+"..."),t},t.stringifyObject=function(e,n){var i,o=!0,r=15,s="<br/>";if(e instanceof RegExp)return"/"+e.source+"/";if(n===void 0&&(n=0),e instanceof Array)return i="[ ",jQuery.each(e,function(e,o){i+=(0===e?"":", ")+t.stringifyObject(o,n+r)}),i+" ]";if("object"==typeof e){i='<div style="margin-left:'+n+'px">';for(var a in e)e.hasOwnProperty(a)&&(i+=(o?"":s)+a+": "+t.stringifyObject(e[a],n+r),o=!1);return i+"</div>"}return""+e},t.getJsonFromUrl=function(t,e){var n;return jQuery.ajax({url:t,dataType:"json",async:e||!1,success:function(t){n=t},error:function(t,e,n){console.error(t,e,n)}}),n},t.getViewLabel=function(e){var n=t.DEFAULT_SETTINGS.availableViews[e];return n&&n.label?n.label:e},t.extractLabelFromAttribute=function(t){var e=t;return e=e.replace(/^@/,""),e=e.replace(/([A-Z])/g," $1"),e=e.replace(/\s{2,}/g," "),e=e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},t.toString=function(t,e){var n="",i=e||" ";return"string"===jQuery.type(t)&&(n=t),jQuery.isArray(t)&&(n=t.join(i)),n},t.getManifestIdByUri=function(e){var n;return n=jQuery.map(t.manifests,function(t,n){return e===t.uri?n:void 0}),n[0]||n},t.getMetadataByManifestId=function(e){return t.manifests[e].metadata},t.getImagesListByManifestId=function(e){return t.manifests[e].sequences[0].imagesList},t.getCollectionTitle=function(t){return t.details.label||""},t.getImageTitlesAndIds=function(t){var e=[];return jQuery.each(t,function(t,n){e.push({title:n.title,id:n.id})}),e},t.genUUID=function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)});return"uuid-"+t},t.throttle=function(t,e,n){var i,o,r,s=null,a=0;n!==void 0&&(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,r=t.apply(i,o)};return function(){var u=new Date;a||n.leading!==!1||(a=u);var h=e-(u-a);return i=this,o=arguments,0>=h?(clearTimeout(s),s=null,a=u,r=t.apply(i,o)):s||n.trailing===!1||(s=setTimeout(l,h)),r}},t.debounce=function(t,e,n){var i,o,r,s,a;return function(){r=this,o=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(r,o)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(r,o)),a}},t.parseRegion=function(t){t=new URI(t);var e=t.hash();return regionArray=e.split("=")[1].split(",")},t.getOsdFrame=function(t,e){var n=e.width,i=e.height,o=e.canvasWidth,r=e.canvasHeight,s=n/o,a=i/r,l=t[0]*s/n,u=t[1]*a/n,h=t[2]*s/n,c=t[3]*a/n,d=new OpenSeadragon.Rect(l,u,h,c);return d}}(Mirador),jQuery.fn.scrollStop=function(t){$(this).scroll(function(){var e=this,n=$(e);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,e))})},function(t){var e=Array.prototype.slice;t.extend(t.event.special,{resizestop:{add:function(e){var n=e.handler;t(this).resize(function(i){clearTimeout(n._timer),i.type="resizestop";var o=t.proxy(n,this,i);n._timer=setTimeout(o,e.data||200)})}},resizestart:{add:function(e){var n=e.handler;t(this).on("resize",function(i){clearTimeout(n._timer),n._started||(i.type="resizestart",n.apply(this,arguments),n._started=!0),n._timer=setTimeout(t.proxy(function(){n._started=!1},this),e.data||300)})}}}),t.extend(t.fn,{resizestop:function(){t(this).on.apply(this,["resizestop"].concat(e.call(arguments)))},resizestart:function(){t(this).on.apply(this,["resizestart"].concat(e.call(arguments)))}})}(jQuery),function(t){t.ManifestsLoader=function(t){return this.getManifestsData(t)},t.ManifestsLoader.prototype={getManifestsData:function(e){var n=this,i={},o=[],r=[];return jQuery.each(e.data,function(t,e){n.hasWidgets(e)?o.unshift(t):o.push(t)}),jQuery.each(o,function(o,s){var a,l="manifest-"+t.genUUID(),u=e.data[s],h=jQuery.Deferred();jQuery.isEmptyObject(u)||(a=new t.Manifest(u.manifestUri,h),r.push(h),h.done(function(e){e&&(i[l]={uri:t.trimString(u.manifestUri),metadata:a.metadata,sequences:a.sequences,location:u.location||"-"},n.hasWidgets(u)&&t.viewer.renderWidgetsForCollection(u),t.viewer.addStatusBarMessage("left","Loaded "+u.manifestUri,600))}))}),jQuery.when.apply(null,r).done(function(){var e="Loaded "+t.viewer.numManifestsLoaded+" of "+r.length+" manifests to viewer";t.viewer.updateLoadWindowContent(),t.viewer.addStatusBarMessage("left",e,1e3,!0)}).done(function(){t.viewer.workspaceAutoSave&&t.viewer.saveController.save()}),i},hasWidgets:function(t){return t.widgets!==void 0&&t.widgets&&!jQuery.isEmptyObject(t.widgets)&&t.widgets.length>0}}}(Mirador),function(t){t.Viewer=function(e){jQuery.extend(!0,this,{id:e.id,hash:e.id,data:null,element:null,canvas:null,initialLayout:t.DEFAULT_SETTINGS.initialLayout||"cascade",currentLayout:null,layout:null,mainMenu:null,numManifestsLoaded:0,showStatusBar:t.DEFAULT_SETTINGS.statusBar.show,statusBar:null,widgets:[],collectionsListingCls:"mirador-listing-collections",mainMenuLoadWindowCls:".mirador-main-menu .load-window",workspaceAutoSave:t.DEFAULT_SETTINGS.workspaceAutoSave,windowSize:{},resizeRatio:{},lastWidgetPosition:{x:"left",y:"top",offset:0}},t.DEFAULT_SETTINGS,e),this.element=this.element||jQuery("#"+this.id),this.data&&this.create(),this.lockController=new t.LockController,this.workspaceAutoSave&&(this.saveController=new t.SaveController)},t.Viewer.prototype={create:function(){this.mainMenu=new t.MainMenu({appendTo:this.element}),this.canvas=jQuery("<div/>").addClass("mirador-viewer").appendTo(this.element),this.showStatusBar&&(this.statusBar=new t.StatusBar({appendTo:this.element})),this.layout=new t.Layout,this.alignViewerElements(),this.attachEvents()},alignViewerElements:function(){this.canvas.height(this.element.height()-this.mainMenu.element.outerHeight(!0)),this.showStatusBar&&this.canvas.height(this.canvas.height()-this.statusBar.element.outerHeight(!0))},renderWidgetsForCollection:function(e){var n=this;jQuery.each(e.widgets,function(i,o){!jQuery.isEmptyObject(o)&&t.isValidView(o.type)&&(o.manifestId=t.getManifestIdByUri(e.manifestUri),n.addWidget(o))}),this.initialLayout!==void 0&&(t.viewer.layout.applyLayout(this.initialLayout),this.currentLayout=this.initialLayout)},addWidget:function(e){jQuery.extend(!0,e,{appendTo:this.canvas,id:"mirador-widget-"+t.genUUID(),position:{my:this.getWidgetPosition()}}),this.widgets.push(new t.Widget(e))},removeWidget:function(e){jQuery.each(t.viewer.widgets,function(n,i){i&&i.id===e&&("imageView"===i.type&&t.viewer.lockController.removeLockedView(i.id),t.viewer.widgets.splice(n,1))})},loadView:function(e,n,i,o){t.viewer.addWidget({height:t.DEFAULT_SETTINGS[e].height,manifestId:n,openAt:o,imageId:i,type:e,width:t.DEFAULT_SETTINGS[e].width})},getWidgetPosition:function(){var t=25,e=this.lastWidgetPosition.x+"+"+this.lastWidgetPosition.offset,n=this.lastWidgetPosition.y+"+"+this.lastWidgetPosition.offset;return this.lastWidgetPosition.offset+=t,e+" "+n},updateLoadWindowContent:function(){var e={cssCls:this.collectionsListingCls,collections:[]},n=this.arrangeCollectionsFromManifests(),i=[];jQuery.each(n,function(t){i.push(t)}),jQuery.each(i.sort(),function(t,i){e.collections.push({location:i,list:n[i]})}),t.loadWindowContent=t.Templates.mainMenu.loadWindowContent(e),jQuery(this.mainMenuLoadWindowCls).tooltipster("update",t.loadWindowContent)},arrangeCollectionsFromManifests:function(){var e={};return jQuery.isEmptyObject(t.manifests)||jQuery.each(t.manifests,function(n,i){var o=i.location;e[o]===void 0&&(e[o]=[]),e[o].push({manifestId:n,collectionTitle:t.trimStringBy(t.getCollectionTitle(i.metadata),60),imageData:t.getImageTitlesAndIds(i.sequences[0].imagesList)})}),jQuery.each(e,function(t){e[t]=e[t].sort(function(t,e){return t.collectionTitle.localeCompare(e.collectionTitle)})}),e},addStatusBarMessage:function(t,e,n,i){var o=this.statusBar.element.find(".mirador-status-bar-msg-"+t);n=isNaN(n)?0:n,i&&"boolean"!=typeof i&&(i=!0),o.text(e),i&&setTimeout(function(){o.fadeOut()},n)},attachEvents:function(){var t=this;jQuery(window).on("resizestart",function(e){e.target==window&&t.saveCurrentWindowSize()}),jQuery(window).on("resizestop",function(e){e.target==window&&t.resizeViewer()})},resizeWidgets:function(){var e=this;null!==this.currentLayout?t.viewer.layout.applyLayout(this.currentLayout):jQuery.each(this.widgets,function(t,n){var i,o,r=n.getPosition(),s=r[0],a=r[1];i=e.resizeRatio.width*s,o=e.resizeRatio.height*a,1>e.resizeRatio.width&&(n.setPosition(i,a),n.setWidth(e.resizeRatio.width*n.getWidth())),1>e.resizeRatio.height&&(n.setPosition(s,o),n.setHeight(e.resizeRatio.height*n.getHeight()))})},resizeViewer:function(){this.resizeRatio.width=(jQuery(window).width()/this.windowSize.width).toFixed(2),this.resizeRatio.height=(jQuery(window).height()/this.windowSize.height).toFixed(2),this.alignViewerElements(),this.resizeWidgets(),this.saveCurrentWindowSize()},saveCurrentWindowSize:function(){this.windowSize.width=jQuery(window).width(),this.windowSize.height=jQuery(window).height()},saveCurrentLayout:function(t){this.currentLayout=t}}}(Mirador),function(t){t.Templates={mainMenu:{menuItems:Handlebars.compile(['<ul class="{{mainMenuCls}}">',"<li>",'<a href="javascript:;" class="bookmark-workspace" title="Bookmark Workspace">','<span class="icon-bookmark-workspace"></span>Bookmark Workspace',"</a>","</li>","<li>",'<a href="javascript:;" class="load-window" title="Load Window">','<span class="icon-load-window"></span>Load Window',"</a>","</li>","<li>",'<a href="javascript:;" class="window-options" title="Window Options">','<span class="icon-window-options"></span>Window Options',"</a>","</li>","<li>",'<a href="javascript:;" class="clear-local-storage" title="Clear saved workspace and reload">','<span class="icon-clear-local-storage"></span>',"</a>","</li>","</ul>"].join("")),windowOptionsMenu:Handlebars.compile(['<ul class="{{windowOptionsMenuCls}}">','<li><a class="cascade-all" href="javascript:;">Cascade All</a></li>','<li><a class="tile-all-vertically" href="javascript:;">Tile All Vertically</li>','<li><a class="tile-all-horizontally" href="javascript:;">Tile All Horizontally</a></li>','<li><a class="stack-all-vertically-2-cols" href="javascript:;">Stack Vertically (2 columns)</a></li>','<li><a class="stack-all-vertically-3-cols" href="javascript:;">Stack Vertically (3 columns)</a></li>','<li class="ui-state-disabled"><a href="javascript:;">Open Recent</a></li>','<li><a class="close-all" href="javascript:;">Close All</a></li>',"</ul>"].join("")),loadWindowContent:Handlebars.compile(['<fieldset class="{{cssCls}}">',"<legend>Available/Loaded manuscripts</legend>","<select>","{{#collections}}",'<optgroup label="{{location}}">',"{{#list}}",'<option data-manifest-id="{{manifestId}}">{{collectionTitle}}</option>',"{{/list}}","</optgroup>","{{/collections}}","</select><br/>",'<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>',"{{#collections}}","{{#list}}",'<ul class="ul-{{manifestId}}">',"{{#imageData}}",'<li><a href="javascript:;" data-image-id="{{id}}" data-manifest-id="{{../manifestId}}">{{trimTitlePrefix title}}</a></li>',"{{/imageData}}","</ul>","{{/list}}","{{/collections}}","</fieldset>"].join("")),clearLocalStorage:Handlebars.compile(['<div class="{{cssCls}}">',"<p>Do you want to delete your saved workspace, and reload the viewer?</p>","<p>","<a class=\"btn-cancel\" href=\"javascript: jQuery('{{selectorClearLocalStorage}}').tooltipster('hide');\">Cancel</a>",'<a class="btn-clear" href="javascript: localStorage.clear(); location.reload();">Clear</a>',"</p>","</div>"].join(""))},statusBar:{textFrames:Handlebars.compile(['<div class="mirador-status-bar-msg-left"></div>','<div class="mirador-status-bar-msg-right"></div>'].join(""))},widget:{initialLayout:Handlebars.compile(['<div class="{{widgetToolbarCls}}"></div>','<div class="{{widgetContentCls}}">Loading...</div>','<div class="{{widgetStatusBarCls}}"></div>'].join(""))},imageView:{navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-annotations"><i class="icon-comments"></i></a>','<a href="javascript:;" class="mirador-btn mirador-icon-choices"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-previous"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-next"></a>',"</div>"].join("")),statusbar:Handlebars.compile(['<div class="{{statusbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-lock"></a>','<div class="mirador-image-dimensions">','<span class="noDimensionsWarning">No Dimensions Given</span>','<textarea rows="1" class="mirador-image-view-physical-dimensions x">{{width}}</textarea>',"<span>✕</span>",'<textarea rows="1" class="mirador-image-view-physical-dimensions y">{{height}}</textarea>','<span class="units">mm','<select class="unit-selector">','<option value="mm">millimeters</option>','<option value="cm">centimeters</option>','<option value="m">meters</option>',"</select>","</span>","</div>","</div>"].join("")),annotationPanel:Handlebars.compile(['<div class="annotationListPanel">','<div class="resizeGrip"></div>',"{{> annotationStats}}",'<ul class="annotationList">',"{{#each annotations}}","{{> annotationListing}}","{{/each}}","</ul>","</div>"].join("")),annotationStats:function(){var t=['<div class="annotationPanelHeader">','<h4>Annotation List (<span class="annotationsTotal">{{annotationCount}}</span>)</h4>','<div class="annoSearch">','<select id="annotationTypeSelector" name="annotationTypes">','<option value="">All (<span class="annotationCount">{{annotationCount}}</span>)</option>','<option value="commenting">Commentary (<span class="imageAnnotationCount">{{imageAnnotationCount}}</span>)</option>','<option value="painting">Transcription (<span class="textAnnotationCount">{{textAnnotationCount}}</span>)</option>',"</select>","</div>","</div>"].join("");return Handlebars.registerPartial("annotationStats",t),Handlebars.compile(t)}(),noAnnotationMessage:function(){var t=['<div class="annotationPanelHeader">',"<h4>No Annotations Provided</h4>","</div>"].join("");return Handlebars.registerPartial("annotationStats",t),Handlebars.compile(t)}(),annotationListing:function(){var t=['<li id="listing_{{id}}" class="annotationListing">',"{{#if title}}","<h3>{{title}}</h3>","{{/if}}","<p>{{content}}</p>","</li>"].join("");return Handlebars.registerPartial("annotationListing",t),Handlebars.compile(t)}(),annotationDetail:Handlebars.compile(['<div class="annotationDetails">','<div class="annotationNumber">{{annotationNumber}}</div>','<a class="annotationDetailToggle mirador-icon-annotationDetail-toggle" title="Hide this detail panel."><i class="icon-eye-close"></i></a>',"<p>{{body}}</p>","</div>"].join("")),annotationDetailToggle:Handlebars.compile(['<div class="displayBottomPanelButton">','<a class="annotationDetailToggle mirador-icon-annotationDetail-toggle" title="Display annotation details in bottom panel."><i class="icon-eye-open"></i></a>',"</div>"].join("")),imageChoices:Handlebars.compile(['<ul class="mirador-image-view-choices">',"{{#choicesInfo}}",'<li><a href="javascript:;" class="mirador-image-view-choice" data-choice="{{label}}" data-image-url="{{imageUrl}}">{{label}}</a></li>',"{{/choicesInfo}}","</ul>"].join(""))},scrollView:{imagesFrame:Handlebars.compile(['<div class="{{frameCls}}"></div>'].join("")),listImages:Handlebars.compile(["{{#images}}",'<div id="{{id}}" class="item">','<div class="header" style="height: {{../toolbarHeight}}px">','<div id="{{id}}-osd-toolbar" class="toolbar">','<a href="javascript:;" class="enable-zoom">Enable zoom</a>',"</div>","</div>",'<div id="{{id}}-osd" class="image-instance">','<img class="static-thumb">',"</div>",'<div class="title">{{title}}</div>',"</div>","{{/images}}"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))},thumbnailsView:{listImages:Handlebars.compile(['<ul class="{{listingCssCls}} listing-thumbs">',"{{#thumbs}}","<li>",'<a href="javascript:;">','<img title="{{title}}" data-image-id="{{id}}" src="{{thumbUrl}}" height="{{../defaultHeight}}">','<div class="thumb-label">{{title}}</div>',"</a>","</li>","{{/thumbs}}","</ul>"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>',"</div>"].join(""))},metadataView:{listTerms:Handlebars.compile(['<div class="sub-title">Details (Metadata about physical object/intellectual work):</div>','<dl class="{{metadataListingCls}}">',"{{#each details}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Rights Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each rights}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Linking Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each links}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">About (Metadata about this manuscript\'s manifest file):</div>','<dl class="{{metadataListingCls}}">',"{{#each about}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>"].join(""),{noEscape:!0}),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))}},Handlebars.registerHelper("trimTitlePrefix",function(t){return t=t.replace(/^Beinecke MS \w+,? \[?/,""),t=t.replace(/\]$/,"")})}(Mirador),function(t){t.MainMenuWindowOptions=function(t){jQuery.extend(!0,this,{menuContent:null,windowOptionsMenuCls:"window-options-menu"},t),this.html=this.html||"<div/>",this.render(),this.attachEvents()},t.MainMenuWindowOptions.prototype={render:function(){this.html=t.Templates.mainMenu.windowOptionsMenu({windowOptionsMenuCls:this.windowOptionsMenuCls})},attachEvents:function(){var e="."+this.windowOptionsMenuCls+" .cascade-all",n="."+this.windowOptionsMenuCls+" .tile-all-vertically",i="."+this.windowOptionsMenuCls+" .tile-all-horizontally",o="."+this.windowOptionsMenuCls+" .stack-all-vertically-2-cols",r="."+this.windowOptionsMenuCls+" .stack-all-vertically-3-cols",s="."+this.windowOptionsMenuCls+" .close-all";jQuery(document).on("click",e,function(){t.viewer.layout.applyLayout("cascade")}),jQuery(document).on("click",n,function(){t.viewer.layout.applyLayout("tileAllVertically")}),jQuery(document).on("click",i,function(){t.viewer.layout.applyLayout("tileAllHorizontally")}),jQuery(document).on("click",o,function(){t.viewer.layout.applyLayout("stackAll2Columns")}),jQuery(document).on("click",r,function(){t.viewer.layout.applyLayout("stackAll3Columns")}),jQuery(document).on("click",s,function(){t.viewer.layout.closeAll()})}}}(Mirador),function(t){t.MainMenuLoadWindow=function(t){jQuery.extend(!0,this,{element:null,width:300,collectionsListingCls:"mirador-listing-collections"},t),this.element=this.element||jQuery("<div/>"),this.attachEvents()},t.MainMenuLoadWindow.prototype={attachEvents:function(){var e="."+this.collectionsListingCls,n=e+" select",i=e+" ul",o=e+" a.mirador-icon-scroll-view",r=e+" a.mirador-icon-metadata-view",s=e+" a.mirador-icon-thumbnails-view";jQuery(document).on("change",n,function(){var t=jQuery(this).find("option:selected").data("manifest-id");jQuery(i).hide(),jQuery(i+".ul-"+t).show()}),jQuery(document).on("click",i,function(e){var n,i,o=jQuery(e.target);n=o.data("manifest-id"),i=o.data("image-id"),t.viewer.loadView("imageView",n,i)}),jQuery(document).on("click",s,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("thumbnailsView",e)}),jQuery(document).on("click",o,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("scrollView",e)}),jQuery(document).on("click",r,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("metadataView",e)})}}}(Mirador),function(t){t.MainMenu=function(e){jQuery.extend(!0,this,{element:null,mainMenuHeight:t.DEFAULT_SETTINGS.mainMenu.height,mainMenuWidth:t.DEFAULT_SETTINGS.mainMenu.width,windowOptionsMenu:null,loadWindow:null,clearLocalStorage:"",viewerCls:"mirador-viewer",mainMenuBarCls:"mirador-main-menu-bar",mainMenuCls:"mirador-main-menu",windowOptionsMenuCls:"mirador-window-options-menu",clearLocalStorageCls:"clear-local-storage",clearLocalStorageDialogCls:"mirador-main-menu-clear-local-storage",collectionsListingCls:"mirador-listing-collections"},e),this.element=this.element||jQuery("<div/>"),this.render(),this.attachMainMenuEvents()},t.MainMenu.prototype={render:function(){this.element.addClass(this.mainMenuBarCls).height(this.mainMenuHeight).width(this.mainMenuWidth).appendTo(this.appendTo),this.element.append(t.Templates.mainMenu.menuItems({mainMenuCls:this.mainMenuCls})),this.windowOptionsMenu=new t.MainMenuWindowOptions({windowOptionsMenuCls:this.windowOptionsMenuCls}),t.loadWindowContent="Loading...",this.loadWindow=new t.MainMenuLoadWindow({collectionsListingCls:this.collectionsListingCls}),this.clearLocalStorage=t.Templates.mainMenu.clearLocalStorage({cssCls:this.clearLocalStorageDialogCls,selectorClearLocalStorage:"."+this.mainMenuCls+" ."+this.clearLocalStorageCls})},attachMainMenuEvents:function(){var t=this.element.find("."+this.mainMenuCls);selectorBookmarkWorkspace=".bookmark-workspace",selectorLoadWindow=".load-window",selectorWindowOptions=".window-options",selectorClearLocalStorage="."+this.clearLocalStorageCls,selectorWindowOptionsMenu="."+this.mainMenuBarCls+" ."+this.windowOptionsMenuCls,_this=this,t.on("click",selectorBookmarkWorkspace,function(){}),t.find(selectorLoadWindow).tooltipster({arrow:!0,content:_this.loadWindow.element,interactive:!0,position:"bottom",theme:".tooltipster-mirador",functionReady:function(){var t=.8*jQuery("."+_this.viewerCls).height();
jQuery("."+_this.collectionsListingCls).height(t),jQuery("."+_this.collectionsListingCls+" ul").height(t-70)}}),t.find(selectorWindowOptions).tooltipster({arrow:!0,content:_this.windowOptionsMenu.html,interactive:!0,theme:".tooltipster-mirador"}),t.find(selectorClearLocalStorage).tooltipster({arrow:!0,content:_this.clearLocalStorage,interactive:!0,theme:".tooltipster-mirador"})}}}(Mirador),function(t){t.StatusBar=function(e){jQuery.extend(!0,this,{element:null,statusBarHeight:t.DEFAULT_SETTINGS.statusBar.height,statusBarWidth:t.DEFAULT_SETTINGS.statusBar.width,statusBarBarCls:"mirador-status-bar"},e),this.element=this.element||jQuery("<div/>"),this.render()},t.StatusBar.prototype={render:function(){this.element.addClass(this.statusBarBarCls).height(this.statusBarHeight).width(this.statusBarWidth).appendTo(this.appendTo),this.element.append(t.Templates.statusBar.textFrames({})),this.xbox=this.element.find(".x"),this.ybox=this.element.find(".y")}}}(Mirador),function(t){t.Layout=function(t){jQuery.extend(!0,this,{rowPadding:10,columnPadding:10,cascade:{x:10,y:40,offset:25}},t)},t.Layout.prototype={cascadeAll:function(){var e,n,i=this,o=0,r={};r.top=t.viewer.mainMenu.element.outerHeight(!0),r.left=this.columnPadding,jQuery.each(t.viewer.widgets,function(t,r){e=i.cascade.x+o,n=i.cascade.y+o,r.setPosition(e,n),r.moveToTop(),o+=i.cascade.offset})},tileAllVertically:function(){this.stackAllByColumns(1)},tileAllHorizontally:function(){this.stackAllByColumns(t.viewer.widgets.length)},stackAllByColumns:function(e){var n,i,o,r,s=this,a={},l=0;a.top=t.viewer.mainMenu.element.outerHeight(!0)+this.rowPadding,a.width=t.viewer.canvas.width()-this.columnPadding,a.height=t.viewer.canvas.height()-this.rowPadding,n=Math.ceil(t.viewer.widgets.length/e),i=Math.floor(a.width/e)-this.columnPadding,o=Math.ceil(a.height/n)-this.rowPadding,jQuery.each(t.viewer.widgets,function(t,n){var u=0,h=0;r=t%e,0===r&&0!==t&&++l,u=s.columnPadding+r*(s.columnPadding+i),h=a.top+l*(s.rowPadding+o),n.setPositionAndSize(u,h,i,o)})},closeAll:function(){jQuery.each(t.viewer.widgets.slice(),function(t,e){e&&e.close()})},applyLayout:function(e){switch(e){case"cascade":this.cascadeAll();break;case"tileAllVertically":this.tileAllVertically();break;case"tileAllHorizontally":this.tileAllHorizontally();break;case"stackAll2Columns":this.stackAllByColumns(2);break;case"stackAll3Columns":this.stackAllByColumns(3);break;default:e="cascade",this.cascadeAll()}t.viewer.saveCurrentLayout(e)}}}(Mirador),function(t){t.Manifest=function(e,n){jQuery.extend(!0,this,{uri:e,jsonLd:null,sequences:[],metadata:{about:{},details:{},rights:{},links:{}},showNoImageChoiceOption:t.DEFAULT_SETTINGS.showNoImageChoiceOption}),this.loadManifestDataFromURI(n)},t.Manifest.prototype={loadManifestDataFromURI:function(t){var e=this;jQuery.ajax({url:e.uri,dataType:"json",async:!0,success:function(n){e.jsonLd=n,e.sequences=e.parseSequences(),e.parseMetadata(),t.resolve(!0)},error:function(){console.log("Failed loading "+e.uri),t.resolve(!1)}})},parseSequences:function(){var t=this,e=[];return jQuery.each(this.jsonLd.sequences,function(n,i){"sc:Sequence"===i["@type"]&&e.push({id:i["@id"],imagesList:t.getImagesList(i)})}),e},getImagesList:function(t){var e=this,n=[];return jQuery.each(t.canvases,function(t,i){var o,r=[];"sc:Canvas"===i["@type"]&&(r=i.resources||i.images,jQuery.each(r,function(t,r){"oa:Annotation"===r["@type"]&&(o=e.getImageObject(r),o.title=i.label||"",o.canvasWidth=i.width,o.canvasHeight=i.height,o.canvasId=i["@id"],i.otherContent&&(o.annotations=jQuery.map(i.otherContent,function(t){return t["@id"].indexOf(".json")>=0?t["@id"]:t["@id"]+".json"})),e.isDetailImage(r.on)||n.push(o))}))}),n},getImageObject:function(t){var e,n=t.resource;return e=n.hasOwnProperty("@type")&&"oa:Choice"===n["@type"]?this.getImageObjWithChoices(t.resource):this.getImageProperties(n),this.showNoImageChoiceOption&&e.choices.push(this.getNoImageChoiceObj()),e},getImageProperties:function(t){var e={height:t.height||0,width:t.width||0,id:t.service["@id"],imageUrl:t.service["@id"].replace(/\/$/,""),choices:[],choiceLabel:t.label||"Default"};return e.aspectRatio=e.width/e.height||1,e},getImageObjWithChoices:function(t){var e,n,i=this,o=[],r=1;return jQuery.isArray(t.item)?o=t.item:o.push(t.item),e=this.getImageProperties(t["default"]),""===e.choiceLabel&&(e.choiceLabel="Choice "+r),jQuery.each(o,function(t,o){n=i.getImageProperties(o),""===n.choiceLabel&&(r+=1,n.choiceLabel="Choice "+r),e.choices.push(n)}),e},getNoImageChoiceObj:function(){return{height:0,width:0,imageUrl:null,choices:[],choiceLabel:"No Image",aspectRatio:1}},isDetailImage:function(t){return/#xywh/.test(t)},parseMetadata:function(){this.parseMetadataAbout(),this.parseMetadataDetails(),this.parseMetadataRights(),this.parseMetadataLinks(),++t.viewer.numManifestsLoaded},parseMetadataAbout:function(){this.metadata.about={"@context":this.jsonLd["@context"]||"","@id":this.jsonLd["@id"]||""}},parseMetadataDetails:function(){this.metadata.details={label:this.jsonLd.label||"",agent:this.jsonLd.agent||"",location:this.jsonLd.location||"",date:this.jsonLd.date||"",description:this.jsonLd.description||""};var t={};this.jsonLd.metadata!==void 0&&jQuery.each(this.jsonLd.metadata,function(e,n){t[n.label]=n.value}),this.metadata.metadata=t},parseMetadataRights:function(){this.metadata.rights={license:this.jsonLd.license||"",attribution:this.jsonLd.attribution||""}},parseMetadataLinks:function(){this.metadata.links={service:this.jsonLd.service||"",seeAlso:this.jsonLd.seeAlso||"",within:this.jsonLd.within||""}}}}(Mirador),function(t){t.AnnotationsLayer=function(e){jQuery.extend(!0,this,{sidePanel:null,bottomPanel:null,regionController:null,width:t.DEFAULT_SETTINGS.imageView.annotationsList.width,parent:null,stateEvents:{},showList:!0,annotationUrls:null,annotations:[],commentAnnotations:0,textAnnotations:0,visible:!1,selectedAnnotation:null,hoveredAnnotation:null,annotationListCls:"mirador-annotation-list",filter:null},e),this.create()},t.AnnotationsLayer.prototype={create:function(){var e=this;e.getAnnotations().done(function(){e.bottomPanel=new t.AnnotationBottomPanel({parent:e}),e.regionController=new t.AnnotationLayerRegionController({parent:e}),e.sidePanel=new t.AnnotationLayerSidePanel({parent:e})}),this.bindEvents()},get:function(t){return this[t]},set:function(t,e,n){_this=this,this[t]=e,_this.event(t+":set").publish(e,n)},event:function(t){var e=t&&this.stateEvents[t];return e||(this.callbacks=jQuery.Callbacks(),e={publish:this.callbacks.fire,subscribe:this.callbacks.add,unsubscribe:this.callbacks.remove},t&&(this.stateEvents[t]=e)),e},getAnnotations:function(){var e=this,n=[];return e.set("annotations",[]),e.annotationUrls?(jQuery.each(e.annotationUrls,function(i,o){var r=jQuery.ajax({url:o,dataType:"json",async:!0,success:function(n){jQuery.each(n.resources,function(n,i){var o={region:t.parseRegion(i.on),title:null,content:i.resource.full?i.resource.full.chars:i.resource.chars,type:i.motivation.split(":")[1],id:t.genUUID()};o.osdFrame=t.getOsdFrame(o.region,e.parent.currentImg),e.annotations.push(o)}),e.computeAnnotationStats()},error:function(){console.log("Failed loading "+uri)}});n.push(r)}),jQuery.when.apply(this,n)):(e.annotations=[],jQuery.when(function(){}))},bindEvents:function(){var t=this;t.event("visible:set").subscribe(function(e){e===!1?t.hide():t.show()}),t.event("disabled:set").subscribe(function(e){e===!0?t.hide():t.show()}),t.event("selectedAnnotation:set").subscribe(function(e,n){return null===e?(t.deselect(),void 0):(t.focusSelected(e,n),void 0)}),t.event("hoveredAnnotation:set").subscribe(function(e,n){t.accentHovered(e,n)}),t.event("annotationUrls:set").subscribe(function(e){e&&console.log(e),t.changePage()}),t.event("filter:set").subscribe(function(e,n){t.filterAnnotations(e,n)})},computeAnnotationStats:function(){var t=0,e=0;jQuery.each(_this.annotations,function(n,i){"commenting"===i.type?t++:e++}),_this.commentAnnotations=t,_this.textAnnotations=e},setVisible:function(){var t=this;t.get("visible")===!1?t.set("visible",!0):t.set("visible",!1)},changePage:function(){var t=this;return null===t.annotations?(t.set("visible",!1),void 0):(t.selectedAnnotation&&t.set("selectedAnnotation",null),t.getAnnotations().done(function(){t.sidePanel.render(),t.regionController.render()}),void 0)},accentHovered:function(t,e){var n=this;"listing"===e?n.regionController.accentHovered(t):n.sidePanel.accentHovered(t)},focusSelected:function(t,e){var n=this;n.sidePanel.focusSelected(t,e),n.regionController.focusSelected(t),n.bottomPanel.focusSelected(t)},deselect:function(){var t=this;t.bottomPanel.deselect(),t.sidePanel.deselect(),t.regionController.deselect()},filterAnnotations:function(t){_this=this,filteredAnnos=jQuery.grep(_this.annotations,function(e){return e.type!==t}),filteredIds=jQuery.map(filteredAnnos,function(t){return t.id}),filteredRegions=jQuery.map(filteredIds,function(t){var e="#region_"+t;return jQuery(e)}),filteredListings=jQuery.map(filteredIds,function(t){var e="#listing_"+t;return jQuery(e)}),console.log(_this),_this.parent.element.find(".annotation").fadeIn(),_this.parent.element.find(".annotationListing").slideDown(),_this.bottomPanel.deselect(),""!==t&&(jQuery(filteredRegions).map(function(){return this.toArray()}).fadeOut(),jQuery(filteredListings).map(function(){return this.toArray()}).slideUp())},append:function(t){this.element.append(t)},show:function(){var t=this;this.parent.parent.element.find(".mirador-widget-content").css("padding-right",t.width),this.sidePanel.show(),this.regionController.show(),this.bottomPanel.show()},hide:function(){this.parent.parent.element.find(".mirador-widget-content").css("padding-right",0),this.sidePanel.hide(),this.regionController.hide(),this.bottomPanel.hide(),this.bottomPanel.hidden=!1}}}(Mirador),function(t){t.Widget=function(e){jQuery.extend(!0,this,{appendTo:"body",autoOpen:!0,containerCls:".mirador-viewer",closeOnEscape:!1,content:null,draggable:!0,element:null,height:t.DEFAULT_SETTINGS.widget.height,id:null,metadataDetails:null,openAt:null,showStatusbar:!0,showToolbar:!0,statusbar:null,toolbar:null,type:"thumbnailsView",viewObj:null,widgetCls:"mirador-widget",widgetContentCls:"mirador-widget-content",widgetStatusbarCls:"mirador-widget-statusbar",widgetToolbarCls:"mirador-widget-toolbar",width:t.DEFAULT_SETTINGS.widget.width,position:{my:"left top",at:"left+50 top+50",of:".mirador-viewer",collision:"fit",within:".mirador-viewer"},dialogOptions:{resize:function(){},resizeStop:function(){},close:function(){}},dialogExtendOptions:{maximizable:!0,collapsable:!0,icons:{maximize:"ui-icon-arrow-4-diag",collapse:"ui-icon-minus"},mainMenuHeight:t.viewer.mainMenu.element.outerHeight(!0),statusBarHeight:t.viewer.statusBar.element.outerHeight(!0)}},e),this.element=this.element||jQuery("<div/>"),this.metadataDetails=t.getMetadataByManifestId(this.manifestId).details,this.imagesList=t.getImagesListByManifestId(this.manifestId),this.create(),this.attachEvents()},t.Widget.prototype={create:function(){this.dialogExtendOptions.containerCls=this.containerCls,this.element.addClass(this.widgetCls).attr("id",this.id).attr("title",this.getTitle()).appendTo(this.appendTo).dialog(this).dialog(this.dialogOptions).dialogExtend(this.dialogExtendOptions).dialog("option","id",this.id).parent().resizable({containment:this.containerCls}).draggable({containment:this.containerCls}),this.toolbar=new t.WidgetToolbar({parent:this,showToolbar:this.showToolbar}),this.statusbar=new t.WidgetStatusBar({parent:this,showStatusbar:this.showStatusbar}),this.content=new t.WidgetContent({parent:this}),this.render()},render:function(){var e=this.type[0].toUpperCase()+this.type.substring(1,1e3);this.viewObj=new t[e]({imagesList:this.imagesList,manifestId:this.manifestId,element:this.content.element,imageId:this.imageId,openAt:this.openAt,parent:this}),this.viewObj.render()},setPosition:function(t,e){t=Math.round(t),e=Math.round(e),this.element.dialog("option","position",[t,e])},setWidth:function(t){this.element.dialog("option","width",Math.round(t))},setHeight:function(t){this.element.dialog("option","height",Math.round(t))},setSize:function(t,e){this.setWidth(Math.round(t)),this.setHeight(Math.round(e)),this.element.trigger("dialogresize"),this.element.trigger("dialogresizestop")},setPositionAndSize:function(t,e,n,i){this.setPosition(t,e),this.setSize(n,i)},getPosition:function(){return this.element.dialog("option","position")},getHeight:function(){return this.element.dialog("option","height")},getWidth:function(){return this.element.dialog("option","width")},moveToTop:function(){this.element.dialog("moveToTop")},close:function(){this.element.dialog("destroy"),this.element.remove(),t.viewer.removeWidget(this.id)},attachEvents:function(){var e=this;this.element.dialog({close:function(){e.close()},drag:function(){t.viewer.saveCurrentLayout(null)},resize:function(){t.viewer.saveCurrentLayout(null)}})},getTitle:function(){return t.getViewLabel(this.type)+" : "+t.getTitlePrefix(this.metadataDetails)}}}(Mirador),function(t){t.WidgetToolbar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetToolbar.height,parent:null,showToolbar:!1,toolbarCls:"mirador-widget-toolbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetToolbar.prototype={create:function(){this.element.addClass(this.toolbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showToolbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.LockController=function(t){jQuery.extend(this,{translationMethod:null,lockedViews:[],lockProfile:"lazyZoom"},t)},t.LockController.prototype={LockOptions:{relativeZoom:function(t,e){t.viewport.panTo(t.viewport.getCenter()),t.viewport.zoomTo(e.leaderZoom,t.viewport.getCenter())},relativeLock:function(t,e){var n=e.leaderBounds;t.viewport.fitBounds(n)},dimensionalZoom:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,o=t.viewport.getAspectRatio()*i,r=n.x-i/2,s=n.y-o/2;console.log(o),followerTargetRect=new OpenSeadragon.Rect(r,s,i,o),console.log(followerTargetRect),console.log("updated"),t.viewport.fitBounds(followerTargetRect)},dimensionalLock:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,o=t.viewport.getAspectRatio*i,r=n.x-i/2,s=n.y-o/2;followerTargetRect=new OpenSeadragon.Rect(r,s,i,o),t.viewport.fitBounds(followerTargetRect)},lazyZoom:function(t,e){var n=t.viewport.getCenter(),i=e.leaderZoom/e.leaderOldZoom,o=t.viewport.getMaxZoom(),r=t.viewport.getMinZoom(),s=t.viewport.getZoom()*i;console.log("factor: "+i),o>=s&&s>=r?t.viewport.zoomBy(i,n):s>o?(t.viewport.zoomTo(o,n),console.log("reachedMax")):r>s&&(t.viewport.zoomTo(r,n),console.log("reachedMin"))},lazyLock:function(){}},addLockedView:function(t){lockObj={viewId:t.parent.id,rectObj:t.osd.viewport.getBounds(),zoomLevel:t.zoomLevel,width:t.width,units:t.units,viewport:t.osd.viewport},this.lockedViews.push(lockObj)},broadcast:function(t){var e=this,n=jQuery.map(e.lockedViews,function(e){return e.viewId===t?e:void 0})[0],i={leaderId:t,leaderBounds:n.viewport.getBounds(),leaderCenter:n.viewport.getCenter(),leaderOldZoom:n.zoomLevel,leaderZoom:n.viewport.getZoom(),leaderWidth:n.width,leaderContainerWidth:n.viewport.getContainerSize().x},o=jQuery.map(e.lockedViews,function(e){return e.viewId!=t?e:void 0});jQuery.each(o,function(t,n){e.LockOptions[e.lockProfile](n,i)}),n.zoomLevel=n.viewport.getZoom()},removeLockedView:function(t){for(var e=0;this.lockedViews.length>e;e++)if(this.lockedViews[e].viewId===t){this.lockedViews.splice(e,1);break}}}}(Mirador),function(t){t.Iiif={getUri:function(t){var e=t,n=/http?:\/\/stacks.stanford.edu\/image\/(\w+\/\S+)/i.exec(t);return n&&2===n.length&&(e="https://stacks.stanford.edu/image/iiif/"+encodeURIComponent(n[1])),e},getUriWithHeight:function(t,e){return t=t.replace(/\/$/,""),this.getUri(t)+"/full/,"+e+"/0/native.jpg"},prepJsonForOsd:function(t){return t.image_host=this.getImageHostUrl(t),t.scale_factors=this.packageScaleFactors(t),t.profile=t.profile.replace(/image-api\/1.\d/,"image-api"),t.tile_width||(t.tile_width=256,t.tile_height=256),t},getImageHostUrl:function(t){var e,n=[];return t.hasOwnProperty("image_host")||(t.image_host=t.tilesUrl||t["@id"]||"",t.hasOwnProperty("identifier")?(e=RegExp("/?"+t.identifier+"/?$","i"),t.image_host=t.image_host.replace(e,"")):(e=RegExp("(.*)/(.*)$"),n=e.exec(t.image_host),n.length>1&&(t.image_host=n[1]))),t.image_host},packageScaleFactors:function(t){var e=[];if(t.hasOwnProperty("scale_factors")&&jQuery.isArray(t.scale_factors))for(var n=0;t.scale_factors.length>n;n++)e.push(n);return e}}}(Mirador),function(t){t.ImageView=function(t){jQuery.extend(this,{currentImg:null,currentImgIndex:0,element:null,elemChoice:null,height:null,width:null,units:"mm",unitsLong:"Millimetres",imageId:null,imagesList:[],leading:!1,locked:!1,navToolbarCls:"mirador-image-view-nav-toolbar",annotationsLayer:null,openAt:null,zoomLevel:null,osd:null,osdBounds:null,osdCls:"mirador-osd",osdToolbarCls:"mirador-osd-toolbar",parent:null,scale:null,scaleCls:"mirador-image-scale",selectedChoice:"",statusbarCls:"mirador-image-view-statusbar",imageViewBgCls:"mirador-image-view-bg"},t),null!==this.imageId&&(this.currentImgIndex=this.getImageIndexById(this.imageId)),null!==this.openAt&&(this.currentImgIndex=this.getImageIndexByTitle(this.openAt)),this.parent.element.find(".mirador-widget-content").addClass(this.imageViewBgCls),this.currentImg=this.imagesList[this.currentImgIndex]},t.ImageView.prototype={render:function(){this.addToolbarNav(),this.createOpenSeadragonInstance(this.currentImg.imageUrl),this.addStatusbarNav(),this.attachWindowEvents(),this.addAnnotationsLayer()},createOpenSeadragonInstance:function(e,n){var i,o,r=t.Iiif.getUri(e)+"/info.json",s="mirador-osd-"+t.genUUID(),a=s+"-toolbar",l=this;this.element.find("."+this.osdCls).remove(),this.addOpenSeadragonToolBar(a),i=t.getJsonFromUrl(r,!1),o=jQuery("<div/>").addClass(this.osdCls).attr("id",s).appendTo(this.element),this.osd=t.OpenSeadragon({id:o.attr("id"),toolbar:a,tileSources:t.Iiif.prepJsonForOsd(i)}),this.osd.addHandler("open",function(){l.addScale(),l.attachOsdEvents(),l.zoomLevel=l.osd.viewport.getZoom(),n!==void 0&&l.osd.viewport.fitBounds(n,!0)}),this.parent.element.dialog("option","title",this.getTitle()),this.parent.toolbar.element.find("."+this.osdToolbarCls+" button:last-child").hide(),this.renderChoices()},clearOpenSeadragonInstance:function(){this.element.find("."+this.osdCls).remove(),this.osd=null,this.renderChoices()},addOpenSeadragonToolBar:function(t){var e=jQuery("<div/>").addClass(this.osdToolbarCls).attr("id",t);this.parent.toolbar.element.find("."+this.osdToolbarCls).remove(),this.parent.toolbar.append(e)},renderChoices:function(){var e=this,n=[];this.clearChoices(),this.currentImg.choices.length>0&&(n.push({label:this.currentImg.choiceLabel,imageUrl:this.currentImg.imageUrl}),jQuery.each(this.currentImg.choices,function(t,e){n.push({label:e.choiceLabel,imageUrl:e.imageUrl})}),this.elemChoice.show(),this.selectedChoice=this.currentImg.choiceLabel,this.elemChoice.tooltipster({arrow:!0,content:t.Templates.imageView.imageChoices({choicesInfo:n}),functionReady:function(){e.addImageChoiceEvents()},interactive:!0,position:"bottom",theme:".tooltipster-mirador"}),this.addImageChoiceEvents())},addImageChoiceEvents:function(){var t=this,e=jQuery(document).find(".mirador-image-view-choices");e.find("li a").each(function(){jQuery(this).removeClass("mirador-image-view-choice-selected"),jQuery(this).data("choice")===t.selectedChoice&&jQuery(this).addClass("mirador-image-view-choice-selected")}),e.on("click","li a",function(n){var i=jQuery(n.target),o=jQuery.Deferred();t.storeCurrentOsdBounds(o),o.done(function(){"No Image"!==i.data("choice")?t.createOpenSeadragonInstance(i.data("image-url"),t.osdBounds):t.clearOpenSeadragonInstance()}),t.selectedChoice=i.data("choice"),e.find("li a").removeClass("mirador-image-view-choice-selected"),i.addClass("mirador-image-view-choice-selected")})},clearChoices:function(){""!==this.elemChoice.data("plugin_tooltipster")&&this.elemChoice.tooltipster("destroy"),this.elemChoice.hide()},storeCurrentOsdBounds:function(t){null!==this.parent.viewObj.osd&&(this.osdBounds=this.parent.viewObj.osd.viewport.getBounds()),t.resolve()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.imageView.navToolbar({navToolbarCls:this.navToolbarCls,hasAnnotations:this.currentImg.annotations})),this.elemChoice=this.parent.toolbar.element.find("."+this.navToolbarCls+" .mirador-icon-choices"),this.elemChoice.hide(),this.attachNavEvents()},addStatusbarNav:function(){this.parent.statusbar.append(t.Templates.imageView.statusbar({statusbarCls:this.statusbarCls,width:this.width,height:this.height})),this.attachStatusbarEvents()},addScale:function(){this.scale||(this.scale=new t.WidgetScale({parent:this,showScale:!0}))},addAnnotationsLayer:function(){this.annotationsLayer=new t.AnnotationsLayer({parent:this,annotationUrls:this.currentImg.annotations})},getImageIndexByTitle:function(e){var n=0;return jQuery.each(this.imagesList,function(i,o){t.trimString(o.title)===t.trimString(e)&&(n=i)}),n},getImageIndexById:function(e){var n=0;return jQuery.each(this.imagesList,function(i,o){t.trimString(o.id)===t.trimString(e)&&(n=i)}),n},getTitle:function(){var e=[];return e.push(t.getViewLabel(this.parent.type)+" : "+t.getTitlePrefix(this.parent.metadataDetails)),this.currentImg.title&&e.push(this.currentImg.title),e.join(" / ")},setHeight:function(t){this.height=t},setWidth:function(t){this.width=t},next:function(){var t,e=this.currentImgIndex+1;this.locked||this.imagesList.length>e&&(this.currentImgIndex=e,this.currentImg=this.imagesList[e],t=this.currentImg.imageUrl,this.createOpenSeadragonInstance(t),this.annotationsLayer.set("annotationUrls",this.currentImg.annotations))},prev:function(){var t=this.currentImgIndex-1;this.locked||t>=0&&(this.currentImgIndex=t,this.currentImg=this.imagesList[t],this.createOpenSeadragonInstance(this.currentImg.imageUrl),this.annotationsLayer.set("annotationUrls",this.currentImg.annotations))},attachWindowEvents:function(){var t=this;this.parent.element.on({mouseenter:function(){t.leading=!0},mouseleave:function(){t.leading=!1}}),this.parent.element.dialog({resize:function(){t.osd.viewport.ensureVisible()}}),this.parent.element.bind("dialogextendmaximize dialogextendrestore",function(){t.osd.viewport.ensureVisible()})},attachOsdEvents:function(){var t=this;this.osd.addHandler("zoom",function(){t.broadcast()}),this.osd.addHandler("pan",function(){t.broadcast()})},attachNavEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-annotations",i=".mirador-icon-metadata-view",o=".mirador-icon-scroll-view",r=".mirador-icon-thumbnails-view",s=".mirador-icon-next",a=".mirador-icon-previous",l=this;e.on("click",a,function(){l.prev()}),e.on("click",s,function(){l.next()}),e.on("click",i,function(){t.viewer.loadView("metadataView",l.manifestId)}),e.on("click",o,function(){t.viewer.loadView("scrollView",l.manifestId)}),e.on("click",r,function(){t.viewer.loadView("thumbnailsView",l.manifestId)}),e.on("click",n,function(){l.annotationsLayer.setVisible()})},attachStatusbarEvents:function(){var t=this.parent.statusbar.element.find("."+this.statusbarCls),e=".mirador-icon-lock",n=".mirador-image-view-physical-dimensions",i=".units",o=this;t.on("click",e,function(){o.locked?o.unlock():o.lock()}),t.on("keypress paste keyup",n,function(t){o.dimensionChange(t)}),t.on("input",i,function(){o.unitChange()})},broadcast:function(){this.scale.render(),null!==this.osd&&null!==this.osd.viewport&&(this.zoomLevel=this.osd.viewport.getZoom()),this.locked===!0&&this.leading===!0&&t.viewer.lockController.broadcast(this.parent.id)},reachedExtent:function(){},lock:function(){this.locked=!0,this.parent.element.parent().addClass("locked"),t.viewer.lockController.addLockedView(this.parent.viewObj)},unlock:function(){this.locked=!1,this.parent.element.parent().removeClass("locked"),t.viewer.lockController.removeLockedView(this.parent.id)},dimensionChange:function(t){var e,n,i=/[0-9]|\./.test(String.fromCharCode(t.keyCode))&&!t.shiftKey,o=t.currentTarget.className,r=o.charAt(o.length-1),s=this.parent.viewObj.currentImg.aspectRatio;i||t.preventDefault(),13===(t.keyCode||t.which)&&t.target.blur(),"x"===r?(e=this.parent.statusbar.element.find(".x").val(),n=Math.floor(s*e),e?this.parent.statusbar.element.find(".y").val(n):this.parent.statusbar.element.find(".y").val("")):(n=this.parent.statusbar.element.find(".y").val(),e=Math.floor(n/s),n?this.parent.statusbar.element.find(".x").val(e):this.parent.statusbar.element.find(".x").val(""),this.height=n,this.width=e),unitCls=".units",this.setWidth(e),this.setHeight(n),this.scale.dimensionsProvided=e?!0:!1,this.scale.render()},unitChange:function(){}}}(Mirador),function(t){t.ScrollView=function(e){jQuery.extend(this,{element:null,imagesList:[],currentImg:null,frameCls:"scroll-view-frame",imageItemCls:"item",parent:null,imagesFrame:null,tplData:{},toolbarHeight:t.DEFAULT_SETTINGS.scrollView.toolbarHeight,imageLabelHeight:t.DEFAULT_SETTINGS.scrollView.imageLabelHeight,maxItemHeight:0,navToolbarCls:"mirador-scroll-view-nav-toolbar"},e)},t.ScrollView.prototype={render:function(){this.element.html(""),this.setProperties(),this.loadContent(),this.attachEvents()},setProperties:function(){var e=this,n=[];jQuery.each(this.imagesList,function(i,o){var r=e.parent.element.attr("id")+"-item-"+i;n[r]={},n[r].aspectRatio=(o.width/o.height).toFixed(2),n[r].infoJsonUrl=t.Iiif.getUri(o.imageUrl)+"/info.json",n[r].imageUrl=o.imageUrl}),this.imagesList.attrs=n},appendImagesFrame:function(){this.imagesFrame=jQuery(t.Templates.scrollView.imagesFrame({frameCls:this.frameCls})),this.element.append(this.imagesFrame)},generateTemplateData:function(){var t=this,e=[];return jQuery.each(this.imagesList,function(n,i){var o=t.parent.element.attr("id")+"-item-"+n;e.push({id:o,title:i.title})}),{toolbarHeight:this.toolbarHeight,images:e}},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.scrollView.navToolbar({navToolbarCls:this.navToolbarCls}))},getMaxItemHeight:function(){var t=0;return t+=parseInt(this.imagesFrame.css("padding-top"),10),t+=parseInt(this.imagesFrame.css("padding-bottom"),10),this.imagesFrame.height()-t},loadContent:function(){this.appendImagesFrame(),this.addToolbarNav(),this.imagesFrame.append(t.Templates.scrollView.listImages(this.generateTemplateData())),this.setFrameAndItemsDimensions(),this.loadImagesInViewPort()},setFrameAndItemsDimensions:function(){var t=this,e="."+this.imageItemCls,n=this.getMaxItemHeight(),i=n-(this.toolbarHeight+this.imageLabelHeight);totalItemWidth=0,this.imagesFrame.find(e).each(function(e){var o=t.parent.element.attr("id")+"-item-"+e,r=Math.round(t.imagesList.attrs[o].aspectRatio*i),s=jQuery(this).find(".image-instance");jQuery(this).width(r).height(n),s.height(i),totalItemWidth+=jQuery(this).outerWidth(!0)}),this.imagesFrame.width(totalItemWidth+15)},loadImagesInViewPort:function(){var e=this,n=this.element.find("."+this.frameCls+" ."+this.imageItemCls),i=jQuery(this.element).width();jQuery(n).each(function(){var n,o,r=jQuery(this),s=r.attr("id"),a=r.find(".image-instance"),l=r.find(".static-thumb"),u=r.find(".enable-zoom"),h=e.isItemInViewport(i,r);a.find(".openseadragon-container").remove(),r.find(".toolbar form").remove(),u.unbind().show().click(function(){e.showOsdContent(s,l,u)}),l.height("100%").width("100%").show(),h&&(o=e.imagesList.attrs[s].imageUrl,n=t.Iiif.getUriWithHeight(o,jQuery(a).height()),l.attr("src",n))})},showOsdContent:function(e,n,i){var o;i.hide(),n.hide(),o=t.getJsonFromUrl(this.imagesList.attrs[e].infoJsonUrl,!1),t.OpenSeadragon({id:e+"-osd",toolbar:e+"-osd-toolbar",tileSources:t.Iiif.prepJsonForOsd(o)}),jQuery("#"+e+"-osd-toolbar button:last-child").hide()},isItemInViewport:function(t,e){var n=e.position().left+e.width();return n>0&&t>e.position().left},attachEvents:function(){this.attachWindowEvents(),this.attachNavEvents(),this.attachKeyboardScrollingEvents()},attachWindowEvents:function(){var t=this;this.parent.element.dialog({resizeStop:function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()}}),this.parent.element.on("dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()})},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=37,i=39,o=jQuery("#"+this.parent.id+" ."+this.frameCls);o.on("mouseenter",function(){o.data("hover",!0)}),o.on("mouseleave",function(){o.data("hover",!1)}),jQuery(document).on("keydown",function(r){var s,a=t.element.width();o.data("hover")&&(s=t.element.scrollLeft(),r.keyCode===n&&t.element.animate({scrollLeft:s-a},e),r.keyCode===i&&t.element.animate({scrollLeft:s+a},e))})},attachNavEvents:function(){var e=this,n=this.parent.toolbar.element.find("."+this.navToolbarCls),i=".mirador-icon-metadata-view",o=".mirador-icon-thumbnails-view";this.element.scrollStop(function(){e.loadImagesInViewPort()}),n.on("click",i,function(){t.viewer.loadView("metadataView",e.manifestId)}),n.on("click",o,function(){t.viewer.loadView("thumbnailsView",e.manifestId)})}}}(Mirador),function(t){t.MetadataView=function(e){jQuery.extend(this,{currentImg:null,element:null,parent:null,metadata:null,metadataListingCls:"metadata-listing",navToolbarCls:"mirador-metadata-view-nav-toolbar"},e),this.metadata=t.getMetadataByManifestId(this.manifestId)},t.MetadataView.prototype={render:function(){var e=this,n=["about","details","rights","links","metadata"],i={metadataListingCls:this.metadataListingCls};jQuery.each(n,function(n,o){i[o]=[],jQuery.each(e.metadata[o],function(n,r){"object"==typeof r&&(r=t.stringifyObject(r)),"string"==typeof r&&""!==r&&i[o].push({label:t.extractLabelFromAttribute(n),value:e.addLinksToUris(r)})})}),this.element.append(t.Templates.metadataView.listTerms(i)),this.addToolbarNav(),this.attachEvents()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.metadataView.navToolbar({navToolbarCls:this.navToolbarCls}))},attachEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-scroll-view",i=".mirador-icon-thumbnails-view",o=this;e.on("click",n,function(){t.viewer.loadView("scrollView",o.manifestId)}),e.on("click",i,function(){t.viewer.loadView("thumbnailsView",o.manifestId)})},addLinksToUris:function(t){var e,n=/(http|ftp|https):\/\/[\w\-]+(\.[\w\-]+)+([\w.,@?\^=%&amp;:\/~+#\-]*[\w@?\^=%&amp;\/~+#\-])?/gi,i=t;return"string"==typeof t&&(e=t.match(n),e&&jQuery.each(e,function(t,e){i=i.replace(e,'<a href="'+e+'" target="_blank">'+e+"</a>")})),i}}}(Mirador),function(t){t.ThumbnailsView=function(e){jQuery.extend(this,{currentImg:null,element:null,imagesList:[],sliderCls:"thumbnails-view-slider",sliderId:"",thumbsListingCls:"",thumbsMaxHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMaxHeight,thumbsMinHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMinHeight,thumbsDefaultZoom:t.DEFAULT_SETTINGS.thumbnailsView.thumbsDefaultZoom,thumbsDefaultHeight:this.thumbsMinHeight,parent:null,navToolbarCls:"mirador-thumbnails-view-nav-toolbar"},e)},t.ThumbnailsView.prototype={render:function(){this.sliderId=this.parent.element.attr("id")+"-thumbs-slider",this.thumbsListingCls=this.parent.element.attr("id")+"-thumbs-listing",this.thumbsDefaultHeight=this.thumbsMinHeight+(this.thumbsMaxHeight-this.thumbsMinHeight)*this.thumbsDefaultZoom,this.element.html(""),this.addToolbarNav(),this.loadContent(),this.setUpSlider(),this.attachEvents()
},loadContent:function(){var e=this,n={defaultHeight:this.thumbsDefaultHeight,listingCssCls:this.thumbsListingCls};n.thumbs=jQuery.map(this.imagesList,function(n){return{thumbUrl:t.Iiif.getUriWithHeight(n.imageUrl,e.thumbsMaxHeight),title:n.title,id:n.id}}),this.element.append(t.Templates.thumbnailsView.listImages(n))},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.thumbnailsView.navToolbar({navToolbarCls:this.navToolbarCls}))},setUpSlider:function(){var t=jQuery("<div/>").attr("id",this.sliderId).addClass(this.sliderCls).slider({max:this.thumbsMaxHeight,min:this.thumbsMinHeight,value:this.thumbsDefaultHeight,step:1});this.parent.toolbar.append(t)},attachEvents:function(){this.attachKeyboardScrollingEvents(),this.attachNavEvents()},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=38,i=40,o=this.parent.content.element;o.on("mouseenter",function(){o.data("hover",!0)}),o.on("mouseleave",function(){o.data("hover",!1)}),jQuery(document).on("keydown",function(r){var s,a=t.parent.content.element.height();o.data("hover")&&(s=t.element.scrollTop(),r.keyCode===n&&t.element.animate({scrollTop:s-a},e),r.keyCode===i&&t.element.animate({scrollTop:s+a},e))})},attachNavEvents:function(){var e="."+this.thumbsListingCls+" li img",n="."+this.thumbsListingCls+" li a",i="#"+this.sliderId,o=this.parent.toolbar.element.find("."+this.navToolbarCls),r=".mirador-icon-scroll-view",s=".mirador-icon-metadata-view",a=this;jQuery(i).on("slide",function(t,n){jQuery(e).attr("height",n.value)}),jQuery(n).on("click",function(e){var n,i=jQuery(e.target);n=i.data("image-id"),t.viewer.loadView("imageView",a.manifestId,n)}),o.on("click",s,function(){t.viewer.loadView("metadataView",a.manifestId)}),o.on("click",r,function(){t.viewer.loadView("scrollView",a.manifestId)})}}}(Mirador),function(t){t.WidgetStatusBar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetStatusBar.height,parent:null,showStatusbar:!1,statusbarCls:"mirador-widget-statusbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetStatusBar.prototype={create:function(){this.element.addClass(this.statusbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showStatusbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.WidgetContent=function(t){jQuery.extend(!0,this,{appendTo:"body",element:null,contentCls:"mirador-widget-content",parent:null},t),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetContent.prototype={create:function(){var t=this;this.element.addClass(this.contentCls).height(t.getHeight()).appendTo(this.parent.element),this.parent.element.on("dialogresize dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.updateHeight()})},updateHeight:function(){this.element.height(this.getHeight())},getHeight:function(){var t=this.parent.element.height();return t-=this.parent.toolbar.element.outerHeight(!0),t-=this.parent.statusbar.element.outerHeight(!0)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.OpenSeadragon=function(t){return OpenSeadragon(jQuery.extend({preserveViewport:!0,visibilityRatio:1,minZoomLevel:0,defaultZoomLevel:0,prefixUrl:"images/openseadragon/",navImages:{zoomIn:{REST:"zoom-in.png",GROUP:"zoom-in.png",HOVER:"zoom-in-hover.png",DOWN:"zoom-in-hover.png"},zoomOut:{REST:"zoom-out.png",GROUP:"zoom-out.png",HOVER:"zoom-out-hover.png",DOWN:"zoom-out-hover.png"},home:{REST:"fit.png",GROUP:"fit.png",HOVER:"fit-hover.png",DOWN:"fit-hover.png"},fullpage:{REST:"full-screen.png",GROUP:"full-screen.png",HOVER:"full-screen-hover.png",DOWN:"full-screen-hover.png"},previous:{REST:"previous.png",GROUP:"previous.png",HOVER:"previous-hover.png",DOWN:"previous-hover.png"},next:{REST:"next.png",GROUP:"next.png",HOVER:"next-hover.png",DOWN:"next-hover.png"}}},t))}}(Mirador),function(t){t.WidgetScale=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,parent:null,height:t.DEFAULT_SETTINGS.scale.height,width:t.DEFAULT_SETTINGS.scale.maxWidth,physicalScaleWidth:null,showScale:!1,scaleCls:"mirador-image-scale",dimensionsProvided:!1,visualisation:{},controlElement:null},e),jQuery(this.parent.element).find("."+this.scaleCls).remove(),this.element=this.element||jQuery("<svg/>"),this.create()},t.WidgetScale.prototype={create:function(){var t=this;scaleDimensions=this.calculateScaleDimensions(),visPadding=10;var e=this.width+3*visPadding,n=this.height;t.controlElement=t.parent.parent.element.find(".mirador-image-dimensions");var i=this.visualisation.scale=d3.select(this.parent.element[0]).append("svg").attr("class",this.scaleCls).attr("height",n).attr("width",e),o=this.visualisation.xScaleFunction=d3.scale.linear().domain([0,d3.max(scaleDimensions)]).range([visPadding,e-2*visPadding]),r=this.visualisation.axis=d3.svg.axis().scale(o).orient("bottom").ticks(4);i.append("g").attr("class","axis x").attr("transform","translate("+visPadding+","+(n-4.5*visPadding)+")").call(r),i.append("text").attr("class","scale-units").text(t.parent.unitsLong).attr("transform","translate("+visPadding+","+(n-visPadding)+")"),this.render()},render:function(){return t.debounce(function(){var t=this,e=this.visualisation.scale,n=this.visualisation.axis,i=this.visualisation.xScaleFunction,o=this.calculateScaleDimensions();i.domain([0,d3.max(o)]),e.select(".x.axis").transition().duration(850).call(n),this.showScale&&this.dimensionsProvided?(this.visualisation.scale.attr("class",this.scaleCls),this.controlElement.removeClass("noDimensionsSet")):(this.visualisation.scale.attr("class",function(){return t.scaleCls+" hidden"}),this.controlElement.addClass("noDimensionsSet"))},50)}(),calculateScaleDimensions:function(){var t,e=this,n=null,i=e.parent.parent.element.width(),o=e.width,r=o/i;return null!==e.parent.osd&&null!==e.parent.osd.viewport&&(t=e.parent.osd.viewport.getBounds().width),physicalViewportWidth=e.parent.width*t,n=physicalViewportWidth*r,[n]},show:function(){this.element.fadeIn()},hide:function(){this.element.fadeOut()}}}(Mirador),function(t){t.SettingsLoader=function(t){var e=this;jQuery.extend(!0,this,{config:e.load()?e.load():t})},t.SettingsLoader.prototype={load:function(){return localStorage.getItem("Mirador_data")?(console.log("session restored"),JSON.parse(localStorage.getItem("Mirador_data"))):!1}}}(Mirador),function(t){t.SaveController=function(){jQuery.extend(!0,this,{saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval})},t.SaveController.prototype={buildJSON:function(){var e,n={},i={id:"viewer",data:[]};return e=function(t){var e={height:t.getHeight(),width:t.getWidth(),type:t.type,position:t.position};return"imageView"===e.type&&(e.openAt=t.openAt,e.zoomState=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}(t.viewObj.osd.viewport.getBounds()),e.dimensions=[],e.lockedViews=[]),"thumbnailsView"===e.type,"scrollView"===e.type,e},jQuery.each(t.viewer.widgets,function(t,i){n[i.manifestId]||(n[i.manifestId]=[]),n[i.manifestId].push(e(i))}),jQuery.each(t.manifests,function(e){var o={manifestUri:t.manifests[e].uri,title:t.getTitlePrefix(t.getMetadataByManifestId(e).details)[0],widgets:[],location:t.manifests[e].location||"-"};n.hasOwnProperty(e)&&(o.widgets=n[e]),i.data.push(o)}),JSON.stringify(i)},save:function(){t.viewer&&localStorage.setItem("Mirador_data",this.buildJSON()),setTimeout(function(){t.viewer.saveController.save(),t.viewer.addStatusBarMessage("right","Workspace saved at "+new Date,1e3,!1)},t.viewer?t.viewer.saveController.saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval)}}}(Mirador),function(t){t.AnnotationBottomPanel=function(t){jQuery.extend(!0,this,{visible:!1,parent:null,hidden:!1},t),this.create()},t.AnnotationBottomPanel.prototype={create:function(){var e=this,n=null;this.element=jQuery(t.Templates.imageView.annotationDetail(n)),this.showPanelButton=jQuery(t.Templates.imageView.annotationDetailToggle()),this.annotationViewport=e.parent.parent.parent.element.find(".mirador-widget-content"),this.annotationViewport.append(e.element),this.annotationViewport.append(e.showPanelButton.hide()),e.hide(),e.bindEvents()},focusSelected:function(){this.visible=!0,this.render(),this.show()},bindEvents:function(){var t=this;this.element.find(".annotationDetailToggle").on("click",function(){t.toggleHidden()}),this.showPanelButton.find(".annotationDetailToggle").on("click",function(){t.toggleHidden()})},render:function(){var t=this,e=t.parent.selectedAnnotation,n=jQuery.grep(t.parent.annotations,function(t){return t.id===e})[0].content;t.element.find("p").fadeOut(function(){jQuery(this).text(n).fadeIn()})},deselect:function(){var t=this;t.visible=!1,t.hidden=!1,t.hide()},toggleHidden:function(){var t=this;return console.log("toggle called"),t.hidden?(t.hidden=!1,t.show(),void 0):(t.hidden=!0,t.hide(),void 0)},show:function(){var t=this;!this.hidden&&this.visible&&(t.showPanelButton.fadeOut("fast"),this.element.animate({height:"20%",opacity:1,display:"block"}))},hide:function(){var t=this;return this.element.animate({height:0,opacity:0,display:"none"}),t.hidden&&t.visible?(t.showPanelButton.fadeIn("slow"),void 0):(t.showPanelButton.fadeOut("fast"),void 0)}}}(Mirador),function(t){t.AnnotationLayerRegionController=function(t){jQuery.extend(!0,this,{visible:!0,lastSelected:null,lastHovered:null},t),this.create()},t.AnnotationLayerRegionController.prototype={create:function(){this.render(),this.hide()},append:function(t){this.element.append(t)},sortRegionsBySize:function(t,e){var n=parseInt(t.region[2],10)*parseInt(t.region[3],10),i=parseInt(e.region[2],10)*parseInt(e.region[3],10);return i-n},render:function(){var t=this,e=this.parent.get("annotations").slice().sort(this.sortRegionsBySize);t.parent.get("visible")&&(jQuery.each(e,function(e,n){var i='<div class="annotation" id="region_'+n.id+'">',o=jQuery(i)[0];t.parent.parent.osd.drawer.addOverlay(o,n.osdFrame)}),setTimeout(function(){t.bindEvents()},200))},bindEvents:function(){var t=this;jQuery(".annotation").on("click",function(e){t.clickRegion(e)}),jQuery(".annotation").on("mouseenter",function(e){t.hoverRegion(e)}),jQuery(".annotation").on("mouseleave",function(){t.leaveRegion(event)})},leaveRegion:function(){this.parent.set("hoveredAnnotation",null,"region")},clickRegion:function(t){var e=this,n=jQuery(t.target).attr("id").split("_")[1];e.parent.set("selectedAnnotation",n,"region")},hoverRegion:function(t){var e=this,n=jQuery(t.target).attr("id").split("_")[1];e.parent.set("hoveredAnnotation",n,"region")},accentHovered:function(t){var e=this;null===t&&(null===e.lastHovered||e.lastHovered.removeClass("hovered"));var n="#region_"+t,i=jQuery(n);null===e.lastHovered||e.lastHovered.removeClass("hovered"),i.hasClass("selected")||i.addClass("hovered"),e.lastHovered=i},focusSelected:function(t){var e=this,n="#region_"+t,i=jQuery(n);null===e.lastSelected||e.lastSelected.removeClass("selected"),i.removeClass("hovered"),i.addClass("selected"),e.lastSelected=i;var o=jQuery.grep(e.parent.annotations,function(e){return e.id===t})[0].osdFrame;e.parent.parent.osd.viewport.fitBounds(o)},deselect:function(){var t=this;t.lastSelected.removeClass("selected")},show:function(){this.render()},hide:function(){this.parent.annotationUrls&&this.parent.parent.osd.drawer.clearOverlays()}}}(Mirador),function(t){t.AnnotationListing=function(t){jQuery.extend(!0,this,{element:null,id:null,title:null,content:null,type:null},t),this.create()},t.AnnotationListing.prototype={create:function(){this.render()},render:function(){templateData={id:this.id,title:this.title,content:this.content},this.element=jQuery(t.Templates.imageView.annotationListing(templateData)),this.parent.listShell.append(this.element),this.bindEvents()},bindEvents:function(){var t=this;this.element.on("click",function(){t.parent.parent.set("selectedAnnotation",t.id,"listing")}),this.element.on("mouseover",function(){t.parent.parent.set("hoveredAnnotation",t.id,"listing")}),this.element.on("mouseleave",function(){t.parent.parent.set("hoveredAnnotation",null,"listing")})},show:function(){this.element.fadeIn()},hide:function(){this.element.fadeOut()}}}(Mirador),function(t){t.AnnotationLayerSidePanel=function(t){jQuery.extend(!0,this,{element:null,listShell:null,visible:!0,listings:[],lastSelected:null,lastHovered:null},t),this.create()},t.AnnotationLayerSidePanel.prototype={create:function(){var e={annotations:this.parent.get("annotations"),annotationCount:this.parent.get("annotations").length,imageAnnotationCount:this.parent.get("commentAnnotations"),textAnnotationCount:this.parent.get("textAnnotations")};this.element=jQuery(t.Templates.imageView.annotationPanel(e)),this.listShell=this.element.find(".annotationList"),this.listStats=this.element.find(".annotationPanelHeader"),this.parent.parent.element.append(this.element),this.render(),this.parent.get("visible")||this.element.hide()},bindEvents:function(){var t=this;this.annoSelector.on("change",function(){t.parent.set("filter",t.annoSelector.val())})},render:function(){var e=this;this.listings=[],this.listShell.empty();var n={annotations:this.parent.get("annotations"),annotationCount:this.parent.get("annotations").length,imageAnnotationCount:this.parent.get("commentAnnotations"),textAnnotationCount:this.parent.get("textAnnotations")};this.listStats.replaceWith(t.Templates.imageView.annotationStats(n)),this.listStats=this.element.find(".annotationPanelHeader"),this.annoSelector=this.element.find("select"),console.log(this.annoSelector),jQuery.each(this.parent.get("annotations"),function(n,i){var o=new t.AnnotationListing({id:i.id,title:i.title,content:i.content,type:i.type,parent:e});e.listings.push(o)}),this.bindEvents()},focusSelected:function(t,e){var n=this,i="#listing_"+t,o=jQuery(i);null===n.lastSelected||n.lastSelected.removeClass("selected"),o.removeClass("hovered"),o.addClass("selected"),n.lastSelected=o,"listing"!==e&&n.listShell.stop().scrollTo(o,500)},deselect:function(){var t=this;null===t.lastSelected||t.lastSelected.removeClass("selected"),t.lastSelected=null},accentHovered:function(t){var e=this;null===t&&(null===e.lastHovered||e.lastHovered.removeClass("hovered"));var n="#listing_"+t,i=jQuery(n);null===e.lastHovered||e.lastHovered.removeClass("hovered"),i.hasClass("selected")||i.addClass("hovered"),e.lastHovered=i},show:function(){this.render(),this.element.stop().show()},hide:function(){this.element.stop().hide()}}}(Mirador);